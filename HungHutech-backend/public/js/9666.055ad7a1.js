"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[9666],{397:function(e,n,t){var a=t(7751);e.exports=a("document","documentElement")},679:function(e,n,t){var a=t(1625),l=TypeError;e.exports=function(e,n){if(a(n,e))return e;throw new l("Incorrect invocation")}},1072:function(e,n,t){var a=t(1828),l=t(8727);e.exports=Object.keys||function(e){return a(e,l)}},1114:function(e,n,t){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,n){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,n||"default");if("object"!=a(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function o(e){var n=l(e,"string");return"symbol"==a(n)?n:n+""}function i(e,n,t){return(n=o(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{A:function(){return i}})},1701:function(e,n,t){var a=t(6518),l=t(9565),o=t(9306),i=t(8551),r=t(1767),u=t(9462),c=t(6319),d=t(9539),_=t(684),g=t(4549),s=t(6395),h=!s&&!_("map",function(){}),p=!s&&!h&&g("map",TypeError),v=s||h||p,m=u(function(){var e=this.iterator,n=i(l(this.next,e)),t=this.done=!!n.done;if(!t)return c(e,this.mapper,[n.value,this.counter++],!0)});a({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(e){i(this);try{o(e)}catch(n){d(this,"throw",n)}return p?l(p,this,e):new m(r(this),{mapper:e})}})},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},2106:function(e,n,t){var a=t(283),l=t(4913);e.exports=function(e,n,t){return t.get&&a(t.get,n,{getter:!0}),t.set&&a(t.set,n,{setter:!0}),l.f(e,n,t)}},2211:function(e,n,t){var a=t(9039);e.exports=!a(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2360:function(e,n,t){var a,l=t(8551),o=t(6801),i=t(8727),r=t(421),u=t(397),c=t(4055),d=t(6119),_=">",g="<",s="prototype",h="script",p=d("IE_PROTO"),v=function(){},m=function(e){return g+h+_+e+g+"/"+h+_},y=function(e){e.write(m("")),e.close();var n=e.parentWindow.Object;return e=null,n},b=function(){var e,n=c("iframe"),t="java"+h+":";return n.style.display="none",u.appendChild(n),n.src=String(t),e=n.contentWindow.document,e.open(),e.write(m("document.F=Object")),e.close(),e.F},f=function(){try{a=new ActiveXObject("htmlfile")}catch(n){}f="undefined"!=typeof document?document.domain&&a?y(a):b():y(a);var e=i.length;while(e--)delete f[s][i[e]];return f()};r[p]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(v[s]=l(e),t=new v,v[s]=null,t[p]=e):t=f(),void 0===n?t:o.f(t,n)}},2787:function(e,n,t){var a=t(9297),l=t(4901),o=t(8981),i=t(6119),r=t(2211),u=i("IE_PROTO"),c=Object,d=c.prototype;e.exports=r?c.getPrototypeOf:function(e){var n=o(e);if(a(n,u))return n[u];var t=n.constructor;return l(t)&&n instanceof t?t.prototype:n instanceof c?d:null}},3373:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});t(4114);var a=t(1431),l=t(5220),o=t(8548),i=t(163),r=t(6604),u=t(5086),c=t(1910),d=t(2831),_=t(3583),g=t(5916),s=t(3691);const h={class:"orangehrm-job-info"},p={class:"orangehrm-form-section"},v={class:"orangehrm-form-actions"};var m=(0,a.pM)({__name:"EmployeeJobInfo",props:{employee:{},loading:{type:Boolean}},emits:["reload"],setup(e,{emit:n}){const t=e,l=n,u=(0,a.KR)(!1),c=(0,a.KR)(!1),d=(0,a.KR)([]),m=(0,a.KR)([]),y=(0,a.KR)([]),b=(0,a.Kh)({thong_tin_cong_viec:{ngay_vao_lam:"",chuc_danh_id:"",phong_ban_id:"",trang_thai_lao_dong_id:""}});(0,a.wB)(()=>t.employee,e=>{e?.thong_tin_cong_viec&&(b.thong_tin_cong_viec={ngay_vao_lam:e.thong_tin_cong_viec.ngay_vao_lam||"",chuc_danh_id:e.thong_tin_cong_viec.chuc_danh_id?._id||"",phong_ban_id:e.thong_tin_cong_viec.phong_ban_id?._id||"",trang_thai_lao_dong_id:e.thong_tin_cong_viec.trang_thai_lao_dong_id?._id||""})},{immediate:!0,deep:!0});const f=async()=>{try{const[e,n,t]=await Promise.all([_.A.getAll({limit:1e3}),g.A.getAll({limit:1e3}),s.A.getAll({limit:1e3})]);d.value=e.data||[],m.value=n.data||[],y.value=t.data||[]}catch(e){console.error("Error loading dropdown data:",e),d.value=[],m.value=[],y.value=[]}},k=async()=>{if(t.employee){c.value=!0;try{await r.A.update(t.employee._id,b),i.nk.success("Cập nhật thông tin công việc thành công"),u.value=!1,l("reload")}catch(e){i.nk.error(e.response?.data?.msg||"Không thể cập nhật thông tin")}finally{c.value=!1}}},F=()=>{u.value=!1,t.employee?.thong_tin_cong_viec&&(b.thong_tin_cong_viec={...t.employee.thong_tin_cong_viec})};return(0,a.sV)(()=>{f()}),(n,t)=>{const l=(0,a.g2)("el-date-picker"),i=(0,a.g2)("el-form-item"),r=(0,a.g2)("el-col"),_=(0,a.g2)("el-option"),g=(0,a.g2)("el-select"),s=(0,a.g2)("el-row"),f=(0,a.g2)("el-button"),w=(0,a.g2)("el-form"),A=(0,a.gN)("loading");return(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",h,[(0,a.bF)(w,{ref:"formRef",model:b,"label-width":"180px","label-position":"left"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",p,[t[5]||(t[5]=(0,a.Lk)("h3",{class:"orangehrm-section-title"},"Thông tin công việc",-1)),(0,a.bF)(s,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(r,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"Ngày vào làm",prop:"ngay_vao_lam"},{default:(0,a.k6)(()=>[(0,a.bF)(l,{modelValue:b.thong_tin_cong_viec.ngay_vao_lam,"onUpdate:modelValue":t[0]||(t[0]=e=>b.thong_tin_cong_viec.ngay_vao_lam=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",disabled:!u.value,style:{width:"100%"}},null,8,["modelValue","disabled"])]),_:1})]),_:1}),(0,a.bF)(r,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"Chức danh",prop:"chuc_danh_id"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:b.thong_tin_cong_viec.chuc_danh_id,"onUpdate:modelValue":t[1]||(t[1]=e=>b.thong_tin_cong_viec.chuc_danh_id=e),placeholder:"Chọn chức danh",disabled:!u.value,style:{width:"100%"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value,e=>((0,a.uX)(),(0,a.Wv)(_,{key:e._id,label:e.ten_chuc_danh,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(s,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(r,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"Phòng ban",prop:"phong_ban_id"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:b.thong_tin_cong_viec.phong_ban_id,"onUpdate:modelValue":t[2]||(t[2]=e=>b.thong_tin_cong_viec.phong_ban_id=e),placeholder:"Chọn phòng ban",disabled:!u.value,style:{width:"100%"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.value,e=>((0,a.uX)(),(0,a.Wv)(_,{key:e._id,label:e.ten,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),(0,a.bF)(r,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(i,{label:"Trạng thái lao động",prop:"trang_thai_lao_dong_id"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:b.thong_tin_cong_viec.trang_thai_lao_dong_id,"onUpdate:modelValue":t[3]||(t[3]=e=>b.thong_tin_cong_viec.trang_thai_lao_dong_id=e),placeholder:"Chọn trạng thái",disabled:!u.value,style:{width:"100%"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(y.value,e=>((0,a.uX)(),(0,a.Wv)(_,{key:e._id,label:e.ten,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),(0,a.Lk)("div",v,[u.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(f,{onClick:F},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.eW)("Hủy",-1)])]),_:1}),(0,a.bF)(f,{type:"primary",loading:c.value,onClick:k},{default:(0,a.k6)(()=>[...t[8]||(t[8]=[(0,a.eW)(" Lưu thay đổi ",-1)])]),_:1},8,["loading"])],64)):((0,a.uX)(),(0,a.Wv)(f,{key:0,type:"primary",icon:(0,a.R1)(o.Edit),onClick:t[4]||(t[4]=e=>u.value=!0)},{default:(0,a.k6)(()=>[...t[6]||(t[6]=[(0,a.eW)(" Chỉnh sửa ",-1)])]),_:1},8,["icon"]))])]),_:1},8,["model"])])),[[A,e.loading]])}}}),y=t(6262);const b=(0,y.A)(m,[["__scopeId","data-v-3a69ab1a"]]);var f=b,k=t(7918);const F={class:"orangehrm-salary-info"},w={class:"orangehrm-form-section"},A={class:"section-header"};var R=(0,a.pM)({__name:"EmployeeSalaryInfo",props:{employee:{},loading:{type:Boolean}},emits:["reload"],setup(e,{emit:n}){const t=e,l=n,u=(0,a.KR)(),c=(0,a.KR)(!1),d=(0,a.KR)(!1),_=(0,a.KR)(!1),g=(0,a.KR)(-1),s=(0,a.KR)([]),h=(0,a.Kh)({ten_luong:"",so_tien:0,don_vi_tien_te:"VND",ky_tra_luong:"Hàng tháng",ghi_chu:""}),p={ten_luong:[{required:!0,message:"Vui lòng chọn loại lương",trigger:"change"}],so_tien:[{required:!0,message:"Vui lòng nhập số tiền",trigger:"blur"}],don_vi_tien_te:[{required:!0,message:"Vui lòng chọn đơn vị tiền tệ",trigger:"change"}],ky_tra_luong:[{required:!0,message:"Vui lòng chọn kỳ trả lương",trigger:"change"}]};(0,a.wB)(()=>t.employee,e=>{s.value=e?.luong?[...e.luong]:[]},{immediate:!0,deep:!0});const v=(e,n)=>{const t=Number(e?.$numberDecimal||e||0);return"VND"===n?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)},m=()=>{g.value=-1,h.ten_luong="",h.so_tien=0,h.don_vi_tien_te="VND",h.ky_tra_luong="Hàng tháng",h.ghi_chu="",_.value=!0},y=e=>{g.value=e;const n=s.value[e];h.ten_luong=n.ten_luong||"",h.so_tien=Number(n.so_tien?.$numberDecimal||n.so_tien||0),h.don_vi_tien_te=n.don_vi_tien_te||"VND",h.ky_tra_luong=n.ky_tra_luong||"Hàng tháng",h.ghi_chu=n.ghi_chu||"",_.value=!0},b=async e=>{try{await k.s.confirm("Bạn có chắc chắn muốn xóa thông tin lương này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});const n=[...s.value];n.splice(e,1),d.value=!0,await r.A.update(t.employee._id,{luong:n}),i.nk.success("Xóa thông tin lương thành công"),l("reload")}catch(n){"cancel"!==n&&i.nk.error(n.response?.data?.msg||"Không thể xóa thông tin lương")}finally{d.value=!1}},f=async()=>{if(u.value&&t.employee)try{const e=await u.value.validate();if(!e)return;d.value=!0;const n=[...s.value];-1===g.value?n.push({...h}):n[g.value]={...h},await r.A.update(t.employee._id,{luong:n}),i.nk.success(-1===g.value?"Thêm thông tin lương thành công":"Cập nhật thông tin lương thành công"),_.value=!1,l("reload")}catch(e){i.nk.error(e.response?.data?.msg||"Không thể lưu thông tin lương")}finally{d.value=!1}};return(n,t)=>{const l=(0,a.g2)("el-button"),i=(0,a.g2)("el-table-column"),r=(0,a.g2)("el-table"),k=(0,a.g2)("el-empty"),R=(0,a.g2)("el-option"),E=(0,a.g2)("el-select"),V=(0,a.g2)("el-form-item"),C=(0,a.g2)("el-input-number"),L=(0,a.g2)("el-col"),K=(0,a.g2)("el-row"),W=(0,a.g2)("el-input"),B=(0,a.g2)("el-form"),x=(0,a.g2)("el-dialog"),S=(0,a.gN)("loading");return(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",F,[(0,a.Lk)("div",w,[(0,a.Lk)("div",A,[t[8]||(t[8]=(0,a.Lk)("h3",{class:"orangehrm-section-title"},"Thông tin lương",-1)),c.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:0,type:"primary",icon:(0,a.R1)(o.Plus),size:"small",onClick:m},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.eW)(" Thêm lương ",-1)])]),_:1},8,["icon"]))]),s.value.length>0?((0,a.uX)(),(0,a.Wv)(r,{key:0,data:s.value,border:"",class:"orangehrm-table",style:{"margin-top":"20px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{prop:"ten_luong",label:"Loại lương","min-width":"150"}),(0,a.bF)(i,{label:"Số tiền","min-width":"150",align:"right"},{default:(0,a.k6)(e=>[(0,a.eW)((0,a.v_)(v(e.row.so_tien,e.row.don_vi_tien_te)),1)]),_:1}),(0,a.bF)(i,{prop:"ky_tra_luong",label:"Kỳ trả lương","min-width":"120"}),(0,a.bF)(i,{prop:"ghi_chu",label:"Ghi chú","min-width":"200","show-overflow-tooltip":""}),(0,a.bF)(i,{label:"Thao tác",width:"150",align:"center"},{default:(0,a.k6)(e=>[(0,a.bF)(l,{size:"small",icon:(0,a.R1)(o.Edit),onClick:n=>y(e.$index)},{default:(0,a.k6)(()=>[...t[9]||(t[9]=[(0,a.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,a.bF)(l,{size:"small",type:"danger",icon:(0,a.R1)(o.Delete),onClick:n=>b(e.$index)},{default:(0,a.k6)(()=>[...t[10]||(t[10]=[(0,a.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])):((0,a.uX)(),(0,a.Wv)(k,{key:1,description:"Chưa có thông tin lương","image-size":100}))]),(0,a.bF)(x,{modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=e=>_.value=e),title:-1===g.value?"Thêm thông tin lương":"Chỉnh sửa thông tin lương",width:"600px"},{footer:(0,a.k6)(()=>[(0,a.bF)(l,{onClick:t[5]||(t[5]=e=>_.value=!1)},{default:(0,a.k6)(()=>[...t[11]||(t[11]=[(0,a.eW)("Hủy",-1)])]),_:1}),(0,a.bF)(l,{type:"primary",loading:d.value,onClick:f},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(-1===g.value?"Thêm":"Cập nhật"),1)]),_:1},8,["loading"])]),default:(0,a.k6)(()=>[(0,a.bF)(B,{ref_key:"formRef",ref:u,model:h,rules:p,"label-width":"140px"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"Loại lương",prop:"ten_luong",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{modelValue:h.ten_luong,"onUpdate:modelValue":t[0]||(t[0]=e=>h.ten_luong=e),placeholder:"Chọn loại lương",style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(R,{label:"Lương cơ bản",value:"Lương cơ bản"}),(0,a.bF)(R,{label:"Phụ cấp ăn trưa",value:"Phụ cấp ăn trưa"}),(0,a.bF)(R,{label:"Phụ cấp xăng xe",value:"Phụ cấp xăng xe"}),(0,a.bF)(R,{label:"Phụ cấp điện thoại",value:"Phụ cấp điện thoại"}),(0,a.bF)(R,{label:"Phụ cấp nhà ở",value:"Phụ cấp nhà ở"}),(0,a.bF)(R,{label:"Thưởng hiệu suất",value:"Thưởng hiệu suất"}),(0,a.bF)(R,{label:"Khác",value:"Khác"})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(K,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(L,{span:16},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"Số tiền",prop:"so_tien",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(C,{modelValue:h.so_tien,"onUpdate:modelValue":t[1]||(t[1]=e=>h.so_tien=e),min:0,step:1e5,precision:0,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(L,{span:8},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"Đơn vị",prop:"don_vi_tien_te",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{modelValue:h.don_vi_tien_te,"onUpdate:modelValue":t[2]||(t[2]=e=>h.don_vi_tien_te=e),style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(R,{label:"VND",value:"VND"}),(0,a.bF)(R,{label:"USD",value:"USD"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(V,{label:"Kỳ trả lương",prop:"ky_tra_luong",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{modelValue:h.ky_tra_luong,"onUpdate:modelValue":t[3]||(t[3]=e=>h.ky_tra_luong=e),placeholder:"Chọn kỳ trả lương",style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(R,{label:"Hàng tháng",value:"Hàng tháng"}),(0,a.bF)(R,{label:"Hàng quý",value:"Hàng quý"}),(0,a.bF)(R,{label:"Hàng năm",value:"Hàng năm"}),(0,a.bF)(R,{label:"Một lần",value:"Một lần"})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(V,{label:"Ghi chú",prop:"ghi_chu"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:h.ghi_chu,"onUpdate:modelValue":t[4]||(t[4]=e=>h.ghi_chu=e),type:"textarea",rows:3,placeholder:"Ghi chú về khoản lương này"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])),[[S,e.loading]])}}});const E=(0,y.A)(R,[["__scopeId","data-v-91329376"]]);var V=E,C=t(2783);t(8111),t(2489),t(1701);const L={class:"orangehrm-report-info"},K={class:"orangehrm-form-section"},W={class:"orangehrm-section-header"};var B=(0,a.pM)({__name:"EmployeeReportInfo",props:{employee:{},loading:{type:Boolean}},emits:["reload"],setup(e,{emit:n}){const t=e,l=n,u=(0,a.KR)(!0),c=(0,a.KR)(!1),d=(0,a.KR)([]),_=(0,a.KR)([]),g=(0,a.KR)(!1),s=(0,a.EW)(()=>t.employee?.thong_tin_cong_viec?.quan_ly_truc_tiep_ids?t.employee.thong_tin_cong_viec.quan_ly_truc_tiep_ids.filter(e=>"object"===typeof e):[]);(0,a.wB)(()=>t.employee,e=>{e?.thong_tin_cong_viec?.quan_ly_truc_tiep_ids&&(d.value=e.thong_tin_cong_viec.quan_ly_truc_tiep_ids.map(e=>"object"===typeof e?e._id:e))},{immediate:!0});const h=async()=>{try{g.value=!0;const e=await r.A.getAll({limit:1e3}),n=e?.data||e?.items||[];_.value=n.filter(e=>e?._id&&e._id!==t.employee?._id)}catch(e){console.error("Error loading managers:",e)}finally{g.value=!1}},p=async()=>{if(t.employee){c.value=!0;try{await r.A.update(t.employee._id,{thong_tin_cong_viec:{...t.employee.thong_tin_cong_viec,quan_ly_truc_tiep_ids:d.value}}),i.nk.success("Cập nhật thông tin báo cáo thành công"),u.value=!1,l("reload")}catch(e){console.error("Error updating report info:",e),i.nk.error(e.response?.data?.msg||"Không thể cập nhật thông tin")}finally{c.value=!1}}},v=()=>{u.value=!1,t.employee?.thong_tin_cong_viec?.quan_ly_truc_tiep_ids&&(d.value=t.employee.thong_tin_cong_viec.quan_ly_truc_tiep_ids.map(e=>"object"===typeof e?e._id:e))},m=e=>{d.value=d.value.filter(n=>n!==e)};return(0,a.sV)(()=>{h()}),(0,a.wB)(()=>u.value,e=>{e&&0===_.value.length&&h()}),(n,t)=>{const l=(0,a.g2)("el-button"),i=(0,a.g2)("el-option"),r=(0,a.g2)("el-select"),g=(0,a.g2)("el-form-item"),h=(0,a.g2)("el-tag"),y=(0,a.g2)("el-form"),b=(0,a.gN)("loading");return(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",L,[(0,a.bF)(y,{"label-width":"180px","label-position":"left"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",K,[(0,a.Lk)("div",W,[t[5]||(t[5]=(0,a.Lk)("h3",{class:"orangehrm-section-title"},"Báo cáo cho",-1)),u.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(l,{onClick:v},{default:(0,a.k6)(()=>[...t[3]||(t[3]=[(0,a.eW)("Hủy",-1)])]),_:1}),(0,a.bF)(l,{type:"primary",loading:c.value,onClick:p},{default:(0,a.k6)(()=>[...t[4]||(t[4]=[(0,a.eW)(" Lưu thay đổi ",-1)])]),_:1},8,["loading"])],64)):((0,a.uX)(),(0,a.Wv)(l,{key:0,type:"primary",icon:(0,a.R1)(o.Edit),onClick:t[0]||(t[0]=e=>u.value=!0)},{default:(0,a.k6)(()=>[...t[2]||(t[2]=[(0,a.eW)(" Chỉnh sửa ",-1)])]),_:1},8,["icon"]))]),(0,a.bF)(g,{label:"Người quản lý trực tiếp"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),multiple:"",filterable:"",placeholder:"Chọn người quản lý",disabled:!u.value,style:{width:"100%"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(_.value,e=>((0,a.uX)(),(0,a.Wv)(i,{key:e._id,label:`${e.ma_nhan_vien} - ${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s.value.length>0?((0,a.uX)(),(0,a.Wv)(g,{key:0,label:"Danh sách quản lý hiện tại"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.value,e=>((0,a.uX)(),(0,a.Wv)(h,{key:e._id,closable:"","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px"},onClose:n=>m(e._id)},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(e.ma_nhan_vien)+" - "+(0,a.v_)(e.ho_dem)+" "+(0,a.v_)(e.ten),1)]),_:2},1032,["onClose"]))),128))]),_:1})):(0,a.Q3)("",!0)])]),_:1})])),[[b,e.loading]])}}});const x=(0,y.A)(B,[["__scopeId","data-v-677dcf1e"]]);var S=x,U=t(7340),T=t(9646),X=t(1851),I=t(142),$=t(3405),P=t(1289);const q={class:"orangehrm-employee-detail"},N={class:"orangehrm-employee-header-content"},j={class:"orangehrm-employee-avatar-section"},D={class:"orangehrm-employee-info-section"},H={class:"orangehrm-employee-name"},O={class:"orangehrm-employee-id"},M={class:"orangehrm-employee-tags"},Y={class:"orangehrm-employee-actions"};var z=(0,a.pM)({__name:"EmployeeDetail",setup(e){const n=(0,l.lq)(),t=(0,l.rd)(),_=(0,a.KR)(null),g=(0,a.KR)(!1),s=(0,a.KR)("personal"),h=(0,a.EW)(()=>n.params.id),p=(0,a.EW)(()=>!0),v=async()=>{g.value=!0;try{_.value=await r.A.getById(h.value)}catch(e){console.error("Error loading employee:",e),i.nk.error(e.response?.data?.msg||"Không thể tải thông tin nhân viên"),t.push("/nhan-vien")}finally{g.value=!1}},m=e=>{console.log("Tab clicked:",e.paneName)},y=()=>{t.push("/nhan-vien")},b=async e=>{const n=["image/jpeg","image/png","image/jpg"];if(!n.includes(e.type))return i.nk.error("Chỉ chấp nhận file ảnh JPG, PNG"),!1;const t=5242880;if(e.size>t)return i.nk.error("Kích thước file không được vượt quá 5MB"),!1;try{await u.A.uploadEmployeePhoto(h.value,e);i.nk.success("Tải ảnh đại diện thành công"),await v()}catch(a){console.error("Error uploading avatar:",a),i.nk.error(a.response?.data?.msg||"Không thể tải ảnh đại diện")}return!1},k=e=>{const n={"Đang làm việc":"success","Toàn thời gian":"success","Bán thời gian":"primary","Thử việc":"warning","Nghỉ việc":"info","Tạm nghỉ":"danger","Thực tập":"primary"};return n[e]||"info"};return(0,a.sV)(()=>{v()}),(e,n)=>{const t=(0,a.g2)("el-icon"),l=(0,a.g2)("el-avatar"),i=(0,a.g2)("el-button"),r=(0,a.g2)("el-upload"),h=(0,a.g2)("el-tag"),F=(0,a.g2)("el-card"),w=(0,a.g2)("el-tab-pane"),A=(0,a.g2)("el-tabs");return(0,a.uX)(),(0,a.CE)("div",q,[(0,a.bF)(F,{class:"orangehrm-employee-header",shadow:"never"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",N,[(0,a.Lk)("div",j,[(0,a.bF)(l,{size:120,src:_.value?.avatar_url?(0,a.R1)(u.A).getFileUrl(_.value.avatar_url):void 0},{default:(0,a.k6)(()=>[(0,a.bF)(t,{size:60},{default:(0,a.k6)(()=>[(0,a.bF)((0,a.R1)(o.User))]),_:1})]),_:1},8,["src"]),p.value?((0,a.uX)(),(0,a.Wv)(r,{key:0,class:"orangehrm-avatar-upload",action:"#","show-file-list":!1,"before-upload":b},{default:(0,a.k6)(()=>[(0,a.bF)(i,{size:"small",icon:(0,a.R1)(o.Camera)},{default:(0,a.k6)(()=>[...n[2]||(n[2]=[(0,a.eW)("Đổi ảnh",-1)])]),_:1},8,["icon"])]),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("div",D,[(0,a.Lk)("h1",H,(0,a.v_)(_.value?.ho_dem)+" "+(0,a.v_)(_.value?.ten),1),(0,a.Lk)("p",O," Mã NV: "+(0,a.v_)(_.value?.ma_nhan_vien),1),(0,a.Lk)("div",M,[_.value?.thong_tin_cong_viec?.chuc_danh_id?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(_.value.thong_tin_cong_viec.chuc_danh_id.ten_chuc_danh),1)]),_:1})):(0,a.Q3)("",!0),_.value?.thong_tin_cong_viec?.phong_ban_id?((0,a.uX)(),(0,a.Wv)(h,{key:1,type:"success"},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(_.value.thong_tin_cong_viec.phong_ban_id.ten),1)]),_:1})):(0,a.Q3)("",!0),_.value?.thong_tin_cong_viec?.trang_thai_lao_dong_id?((0,a.uX)(),(0,a.Wv)(h,{key:2,type:k(_.value.thong_tin_cong_viec.trang_thai_lao_dong_id.ten)},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(_.value.thong_tin_cong_viec.trang_thai_lao_dong_id.ten),1)]),_:1},8,["type"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Y,[(0,a.bF)(i,{icon:(0,a.R1)(o.Back),onClick:y},{default:(0,a.k6)(()=>[...n[3]||(n[3]=[(0,a.eW)("Quay lại",-1)])]),_:1},8,["icon"]),p.value?((0,a.uX)(),(0,a.Wv)(i,{key:0,type:"primary",icon:(0,a.R1)(o.Edit),onClick:n[0]||(n[0]=e=>s.value="personal")},{default:(0,a.k6)(()=>[...n[4]||(n[4]=[(0,a.eW)(" Chỉnh sửa ",-1)])]),_:1},8,["icon"])):(0,a.Q3)("",!0)])])]),_:1}),(0,a.bF)(F,{class:"orangehrm-employee-tabs",shadow:"never"},{default:(0,a.k6)(()=>[(0,a.bF)(A,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),onTabClick:m},{default:(0,a.k6)(()=>[(0,a.bF)(w,{label:"Thông tin cá nhân",name:"personal"},{default:(0,a.k6)(()=>[(0,a.bF)(c.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Thông tin liên hệ",name:"contact"},{default:(0,a.k6)(()=>[(0,a.bF)(d.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Thông tin công việc",name:"job"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Lương",name:"salary"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Th�ng tin BHXH",name:"insurance"},{default:(0,a.k6)(()=>[(0,a.bF)(C.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Báo cáo cho",name:"report"},{default:(0,a.k6)(()=>[(0,a.bF)(S,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Trình độ",name:"qualifications"},{default:(0,a.k6)(()=>[(0,a.bF)(U.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Người phụ thuộc",name:"dependents"},{default:(0,a.k6)(()=>[(0,a.bF)(T.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Kinh nghiệm",name:"experience"},{default:(0,a.k6)(()=>[(0,a.bF)(X.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Liên hệ khẩn cấp",name:"emergency"},{default:(0,a.k6)(()=>[(0,a.bF)(I.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Xuất nhập cảnh",name:"immigration"},{default:(0,a.k6)(()=>[(0,a.bF)($.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1}),(0,a.bF)(w,{label:"Thành viên tổ chức",name:"memberships"},{default:(0,a.k6)(()=>[(0,a.bF)(P.A,{employee:_.value,loading:g.value,onReload:v},null,8,["employee","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const Q=(0,y.A)(z,[["__scopeId","data-v-3f604958"]]);var G=Q},3583:function(e,n,t){var a=t(1114),l=t(1526);class o{constructor(){(0,a.A)(this,"BASE_URL","/chucdanh")}async getAll(e){const n=await l.A.get(this.BASE_URL,{params:e});return n.data}async getById(e){const n=await l.A.get(`${this.BASE_URL}/${e}`);return n.data}async create(e){const n=await l.A.post(this.BASE_URL,e);return n.data}async update(e,n){const t=await l.A.put(`${this.BASE_URL}/${e}`,n);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}n.A=new o},3691:function(e,n,t){var a=t(1114),l=t(1526);class o{constructor(){(0,a.A)(this,"BASE_URL","/trangthailaodong")}async getAll(e){const n=await l.A.get(this.BASE_URL,{params:e});return n.data}async getById(e){const n=await l.A.get(`${this.BASE_URL}/${e}`);return n.data}async create(e){const n=await l.A.post(this.BASE_URL,e);return n.data}async update(e,n){const t=await l.A.put(`${this.BASE_URL}/${e}`,n);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}n.A=new o},4549:function(e,n,t){var a=t(4576);e.exports=function(e,n){var t=a.Iterator,l=t&&t.prototype,o=l&&l[e],i=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){i=!0}},-1)}catch(r){r instanceof n||(i=!1)}if(!i)return o}},4659:function(e,n,t){var a=t(3724),l=t(4913),o=t(6980);e.exports=function(e,n,t){a?l.f(e,n,o(0,t)):e[n]=t}},5916:function(e,n,t){var a=t(1114),l=t(1526);class o{constructor(){(0,a.A)(this,"BASE_URL","/phongban")}async getAll(e){const n=await l.A.get(this.BASE_URL,{params:e});return n.data}async getById(e){const n=await l.A.get(`${this.BASE_URL}/${e}`);return n.data}async create(e){const n=await l.A.post(this.BASE_URL,e);return n.data}async update(e,n){const t=await l.A.put(`${this.BASE_URL}/${e}`,n);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}n.A=new o},6801:function(e,n,t){var a=t(3724),l=t(8686),o=t(4913),i=t(8551),r=t(5397),u=t(1072);n.f=a&&!l?Object.defineProperties:function(e,n){i(e);var t,a=r(n),l=u(n),c=l.length,d=0;while(c>d)o.f(e,t=l[d++],a[t]);return e}},7657:function(e,n,t){var a,l,o,i=t(9039),r=t(4901),u=t(34),c=t(2360),d=t(2787),_=t(6840),g=t(8227),s=t(6395),h=g("iterator"),p=!1;[].keys&&(o=[].keys(),"next"in o?(l=d(d(o)),l!==Object.prototype&&(a=l)):p=!0);var v=!u(a)||i(function(){var e={};return a[h].call(e)!==e});v?a={}:s&&(a=c(a)),r(a[h])||_(a,h,function(){return this}),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:p}},8111:function(e,n,t){var a=t(6518),l=t(4576),o=t(679),i=t(8551),r=t(4901),u=t(2787),c=t(2106),d=t(4659),_=t(9039),g=t(9297),s=t(8227),h=t(7657).IteratorPrototype,p=t(3724),v=t(6395),m="constructor",y="Iterator",b=s("toStringTag"),f=TypeError,k=l[y],F=v||!r(k)||k.prototype!==h||!_(function(){k({})}),w=function(){if(o(this,h),u(this)===h)throw new f("Abstract class Iterator not directly constructable")},A=function(e,n){p?c(h,e,{configurable:!0,get:function(){return n},set:function(n){if(i(this),this===h)throw new f("You can't redefine this property");g(this,e)?this[e]=n:d(this,e,n)}}):h[e]=n};g(h,b)||A(b,y),!F&&g(h,m)&&h[m]!==Object||A(m,w),w.prototype=h,a({global:!0,constructor:!0,forced:F},{Iterator:w})},9539:function(e,n,t){var a=t(9565),l=t(8551),o=t(5966);e.exports=function(e,n,t){var i,r;l(e);try{if(i=o(e,"return"),!i){if("throw"===n)throw t;return t}i=a(i,e)}catch(u){r=!0,i=u}if("throw"===n)throw t;if(r)throw i;return l(i),t}}}]);
//# sourceMappingURL=9666.055ad7a1.js.map