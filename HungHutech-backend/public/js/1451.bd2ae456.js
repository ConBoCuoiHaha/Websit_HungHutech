"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[1451],{1451:function(e,a,t){t.r(a),t.d(a,{default:function(){return $}});var l=t(1431),n=(t(8111),t(7588),t(163)),i=t(7918),o=t(8548);const u={class:"config-table"},s={class:"table-toolbar"},c={class:"toolbar-left"},r={key:0},d={key:1},h={class:"pagination-container"};var p=(0,l.pM)({__name:"ConfigTable",props:{config:{}},emits:["refresh"],setup(e,{emit:a}){const t=e,p=a,g=(0,l.KR)(!1),k=(0,l.KR)(!1),y=(0,l.KR)([]),m=(0,l.KR)(0),b=(0,l.KR)(1),f=(0,l.KR)(20),v=(0,l.KR)(""),_=(0,l.KR)(void 0),F=(0,l.KR)(!1),w=(0,l.KR)(!1),x=(0,l.KR)(),C=(0,l.Kh)({}),V=(0,l.EW)(()=>{const e={};return t.config.fields.forEach(a=>{a.required&&(e[a.key]=[{required:!0,message:`Vui lòng nhập ${a.label.toLowerCase()}`,trigger:"blur"}])}),e}),T=async()=>{try{g.value=!0;const e=await t.config.service.getAll({page:b.value,limit:f.value,search:v.value,kich_hoat:_.value});y.value=e.items,m.value=e.total}catch(e){n.nk.error(e.response?.data?.message||"Lỗi khi tải dữ liệu")}finally{g.value=!1}};let K=null;const R=()=>{clearTimeout(K),K=setTimeout(()=>{b.value=1,T()},300)},X=()=>{w.value=!1,A(),F.value=!0},$=e=>{w.value=!0,Object.keys(C).forEach(a=>{C[a]=e[a]}),C._id=e._id,F.value=!0},L=async()=>{if(x.value)try{await x.value.validate(),k.value=!0,w.value?(await t.config.service.update(C._id,C),n.nk.success("Cập nhật thành công")):(await t.config.service.create(C),n.nk.success("Thêm mới thành công")),F.value=!1,T(),p("refresh")}catch(e){e.response&&n.nk.error(e.response.data?.message||"Lỗi khi lưu dữ liệu")}finally{k.value=!1}},E=async e=>{try{await i.s.confirm(`Bạn có chắc chắn muốn xóa "${e[t.config.displayField]}"?`,"Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await t.config.service.delete(e._id),n.nk.success("Xóa thành công"),T(),p("refresh")}catch(a){"cancel"!==a&&n.nk.error(a.response?.data?.message||"Lỗi khi xóa")}},W=async e=>{try{await t.config.service.toggleActive(e._id),n.nk.success(`Đã ${e.kich_hoat?"vô hiệu hóa":"kích hoạt"} thành công`),T(),p("refresh")}catch(a){n.nk.error(a.response?.data?.message||"Lỗi khi thay đổi trạng thái")}},U=()=>{x.value?.resetFields(),A()},A=()=>{Object.keys(C).forEach(e=>delete C[e]),t.config.fields.forEach(e=>{"number"===e.type?C[e.key]=0:"select"===e.type&&e.options&&e.options.length>0?C[e.key]=e.options[0]:C[e.key]=""}),C.kich_hoat=!0};return(0,l.sV)(()=>{A(),T()}),(a,t)=>{const n=(0,l.g2)("el-icon"),i=(0,l.g2)("el-input"),p=(0,l.g2)("el-option"),K=(0,l.g2)("el-select"),A=(0,l.g2)("el-button"),q=(0,l.g2)("el-table-column"),I=(0,l.g2)("el-tag"),z=(0,l.g2)("el-table"),S=(0,l.g2)("el-pagination"),M=(0,l.g2)("el-input-number"),j=(0,l.g2)("el-form-item"),H=(0,l.g2)("el-switch"),N=(0,l.g2)("el-form"),O=(0,l.g2)("el-dialog"),Q=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",s,[(0,l.Lk)("div",c,[(0,l.bF)(i,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),placeholder:"Tìm kiếm...",clearable:"",style:{width:"300px"},onInput:R},{prefix:(0,l.k6)(()=>[(0,l.bF)(n,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(o.Search))]),_:1})]),_:1},8,["modelValue"]),(0,l.bF)(K,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),placeholder:"Trạng thái",clearable:"",style:{width:"150px","margin-left":"12px"},onChange:T},{default:(0,l.k6)(()=>[(0,l.bF)(p,{label:"Đang kích hoạt",value:!0}),(0,l.bF)(p,{label:"Đã vô hiệu hóa",value:!1})]),_:1},8,["modelValue"])]),(0,l.bF)(A,{type:"primary",onClick:X},{default:(0,l.k6)(()=>[(0,l.bF)(n,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(o.Plus))]),_:1}),t[7]||(t[7]=(0,l.eW)(" Thêm mới ",-1))]),_:1})]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(z,{data:y.value,border:"",stripe:"",style:{width:"100%","margin-top":"16px"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.config.fields,e=>((0,l.uX)(),(0,l.Wv)(q,{key:e.key,prop:e.key,label:e.label,"min-width":e.width||150},{default:(0,l.k6)(({row:a})=>["select"===e.type?((0,l.uX)(),(0,l.CE)("span",r,(0,l.v_)(a[e.key]),1)):((0,l.uX)(),(0,l.CE)("span",d,(0,l.v_)(a[e.key]||"-"),1))]),_:2},1032,["prop","label","min-width"]))),128)),(0,l.bF)(q,{label:"Trạng thái",width:"120",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(I,{type:e.kich_hoat?"success":"info",size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.kich_hoat?"Kích hoạt":"Vô hiệu"),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(q,{label:"Thao tác",width:"200",align:"center",fixed:"right"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(A,{link:"",type:"primary",size:"small",onClick:a=>$(e)},{default:(0,l.k6)(()=>[...t[8]||(t[8]=[(0,l.eW)(" Sửa ",-1)])]),_:1},8,["onClick"]),(0,l.bF)(A,{link:"",type:e.kich_hoat?"warning":"success",size:"small",onClick:a=>W(e)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.kich_hoat?"Vô hiệu":"Kích hoạt"),1)]),_:2},1032,["type","onClick"]),(0,l.bF)(A,{link:"",type:"danger",size:"small",onClick:a=>E(e)},{default:(0,l.k6)(()=>[...t[9]||(t[9]=[(0,l.eW)(" Xóa ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,g.value]]),(0,l.Lk)("div",h,[(0,l.bF)(S,{"current-page":b.value,"onUpdate:currentPage":t[2]||(t[2]=e=>b.value=e),"page-size":f.value,"onUpdate:pageSize":t[3]||(t[3]=e=>f.value=e),"page-sizes":[10,20,50,100],total:m.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:T,onCurrentChange:T},null,8,["current-page","page-size","total"])]),(0,l.bF)(O,{modelValue:F.value,"onUpdate:modelValue":t[6]||(t[6]=e=>F.value=e),title:w.value?`Chỉnh sửa ${e.config.title}`:`Thêm ${e.config.title}`,width:"600px",onClose:U},{footer:(0,l.k6)(()=>[(0,l.bF)(A,{onClick:t[5]||(t[5]=e=>F.value=!1)},{default:(0,l.k6)(()=>[...t[10]||(t[10]=[(0,l.eW)("Hủy",-1)])]),_:1}),(0,l.bF)(A,{type:"primary",loading:k.value,onClick:L},{default:(0,l.k6)(()=>[...t[11]||(t[11]=[(0,l.eW)(" Lưu ",-1)])]),_:1},8,["loading"])]),default:(0,l.k6)(()=>[(0,l.bF)(N,{ref_key:"formRef",ref:x,model:C,rules:V.value,"label-width":"150px","label-position":"left"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.config.fields,e=>((0,l.uX)(),(0,l.Wv)(j,{key:e.key,label:e.label,prop:e.key},{default:(0,l.k6)(()=>["text"===e.type?((0,l.uX)(),(0,l.Wv)(i,{key:0,modelValue:C[e.key],"onUpdate:modelValue":a=>C[e.key]=a,maxlength:e.maxlength,placeholder:`Nhập ${e.label.toLowerCase()}`},null,8,["modelValue","onUpdate:modelValue","maxlength","placeholder"])):"textarea"===e.type?((0,l.uX)(),(0,l.Wv)(i,{key:1,modelValue:C[e.key],"onUpdate:modelValue":a=>C[e.key]=a,type:"textarea",rows:3,placeholder:`Nhập ${e.label.toLowerCase()}`},null,8,["modelValue","onUpdate:modelValue","placeholder"])):"number"===e.type?((0,l.uX)(),(0,l.Wv)(M,{key:2,modelValue:C[e.key],"onUpdate:modelValue":a=>C[e.key]=a,min:e.min||0,max:e.max,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","min","max"])):"select"===e.type?((0,l.uX)(),(0,l.Wv)(K,{key:3,modelValue:C[e.key],"onUpdate:modelValue":a=>C[e.key]=a,placeholder:`Chọn ${e.label.toLowerCase()}`,style:{width:"100%"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,e=>((0,l.uX)(),(0,l.Wv)(p,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(0,l.Q3)("",!0)]),_:2},1032,["label","prop"]))),128)),(0,l.bF)(j,{label:"Kích hoạt"},{default:(0,l.k6)(()=>[(0,l.bF)(H,{modelValue:C.kich_hoat,"onUpdate:modelValue":t[4]||(t[4]=e=>C.kich_hoat=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),g=t(6262);const k=(0,g.A)(p,[["__scopeId","data-v-612a5a44"]]);var y=k,m=t(1114),b=t(4335);const f="http://192.168.88.50:5000/api";class v{constructor(e){(0,m.A)(this,"endpoint",void 0),this.endpoint=`${f}/admin/${e}`}async getAll(e){const a=await b.A.get(this.endpoint,{params:e});return a.data}async getById(e){const a=await b.A.get(`${this.endpoint}/${e}`);return a.data}async create(e){const a=await b.A.post(this.endpoint,e);return a.data}async update(e,a){const t=await b.A.put(`${this.endpoint}/${e}`,a);return t.data}async delete(e){await b.A.delete(`${this.endpoint}/${e}`)}async toggleActive(e){const a=await b.A.patch(`${this.endpoint}/${e}/toggle-active`);return a.data}}const _=new v("employment-statuses"),F=new v("job-categories"),w=new v("nationalities"),x=new v("skills"),C=new v("education-levels"),V=new v("languages");var T={employmentStatus:_,jobCategory:F,nationality:w,skill:x,educationLevel:C,language:V};const K={class:"admin-configurations"};var R=(0,l.pM)({__name:"AdminConfigurations",setup(e){const a=(0,l.KR)("employment-statuses"),t={title:"Trạng thái làm việc",service:T.employmentStatus,fields:[{key:"ten_trang_thai",label:"Tên trạng thái",type:"text",required:!0},{key:"mo_ta",label:"Mô tả",type:"textarea"},{key:"thu_tu_sap_xep",label:"Thứ tự sắp xếp",type:"number"}],displayField:"ten_trang_thai"},n={title:"Danh mục công việc",service:T.jobCategory,fields:[{key:"ten_danh_muc",label:"Tên danh mục",type:"text",required:!0},{key:"mo_ta",label:"Mô tả",type:"textarea"}],displayField:"ten_danh_muc"},i={title:"Quốc tịch",service:T.nationality,fields:[{key:"ten_quoc_tich",label:"Tên quốc tịch",type:"text",required:!0},{key:"ma_quoc_gia",label:"Mã quốc gia (ISO)",type:"text",maxlength:3}],displayField:"ten_quoc_tich"},o={title:"Kỹ năng",service:T.skill,fields:[{key:"ten_ky_nang",label:"Tên kỹ năng",type:"text",required:!0},{key:"mo_ta",label:"Mô tả",type:"textarea"},{key:"loai_ky_nang",label:"Loại kỹ năng",type:"select",options:["Kỹ thuật","Quản lý","Giao tiếp","Ngoại ngữ","Khác"]}],displayField:"ten_ky_nang"},u={title:"Trình độ học vấn",service:T.educationLevel,fields:[{key:"ten_trinh_do",label:"Tên trình độ",type:"text",required:!0},{key:"mo_ta",label:"Mô tả",type:"textarea"},{key:"cap_do",label:"Cấp độ",type:"number",min:0}],displayField:"ten_trinh_do"},s={title:"Ngôn ngữ",service:T.language,fields:[{key:"ten_ngon_ngu",label:"Tên ngôn ngữ",type:"text",required:!0},{key:"ma_ngon_ngu",label:"Mã ngôn ngữ (ISO)",type:"text",maxlength:3}],displayField:"ten_ngon_ngu"},c=()=>{};return(e,r)=>{const d=(0,l.g2)("el-card"),h=(0,l.g2)("el-tab-pane"),p=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)("div",K,[(0,l.bF)(d,{class:"page-header"},{default:(0,l.k6)(()=>[...r[1]||(r[1]=[(0,l.Lk)("h1",null,"Cấu hình hệ thống",-1),(0,l.Lk)("p",null,"Quản lý các thiết lập cấu hình cho toàn hệ thống",-1)])]),_:1}),(0,l.bF)(d,{class:"config-tabs-card"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),type:"border-card"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{label:"Trạng thái làm việc",name:"employment-statuses"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:t,onRefresh:c})]),_:1}),(0,l.bF)(h,{label:"Danh mục công việc",name:"job-categories"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:n,onRefresh:c})]),_:1}),(0,l.bF)(h,{label:"Quốc tịch",name:"nationalities"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:i,onRefresh:c})]),_:1}),(0,l.bF)(h,{label:"Kỹ năng",name:"skills"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:o,onRefresh:c})]),_:1}),(0,l.bF)(h,{label:"Trình độ học vấn",name:"education-levels"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:u,onRefresh:c})]),_:1}),(0,l.bF)(h,{label:"Ngôn ngữ",name:"languages"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{config:s,onRefresh:c})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const X=(0,g.A)(R,[["__scopeId","data-v-2e8a307b"]]);var $=X},7588:function(e,a,t){var l=t(6518),n=t(9565),i=t(2652),o=t(9306),u=t(8551),s=t(1767),c=t(9539),r=t(4549),d=r("forEach",TypeError);l({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){u(this);try{o(e)}catch(l){c(this,"throw",l)}if(d)return n(d,this,e);var a=s(this),t=0;i(a,function(a){e(a,t++)},{IS_RECORD:!0})}})}}]);
//# sourceMappingURL=1451.bd2ae456.js.map