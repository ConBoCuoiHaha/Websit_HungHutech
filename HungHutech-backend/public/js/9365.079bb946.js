"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[9365],{116:function(e,t,a){var n=a(6518),i=a(9565),r=a(2652),l=a(9306),o=a(8551),u=a(1767),d=a(9539),h=a(4549),s=h("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:s},{find:function(e){o(this);try{l(e)}catch(n){d(this,"throw",n)}if(s)return i(s,this,e);var t=u(this),a=0;return r(t,function(t,n){if(e(t,a++))return n(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},684:function(e){e.exports=function(e,t){var a="function"==typeof Iterator&&Iterator.prototype[e];if(a)try{a.call({next:null},t).next()}catch(n){return!0}}},1385:function(e,t,a){var n=a(9539);e.exports=function(e,t,a){for(var i=e.length-1;i>=0;i--)if(void 0!==e[i])try{a=n(e[i].iterator,t,a)}catch(r){t="throw",a=r}if("throw"===t)throw a;return a}},1526:function(e,t,a){var n=a(1114),i=a(4335);const r=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,l=r||"http://192.168.88.50:5000/api";console.log("API Base URL:",l);class o{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=i.A.create({baseURL:l,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,t){return this.axiosInstance.get(e,t)}post(e,t,a){return this.axiosInstance.post(e,t,a)}put(e,t,a){return this.axiosInstance.put(e,t,a)}delete(e,t){return this.axiosInstance.delete(e,t)}patch(e,t,a){return this.axiosInstance.patch(e,t,a)}}t.A=new o},1701:function(e,t,a){var n=a(6518),i=a(9565),r=a(9306),l=a(8551),o=a(1767),u=a(9462),d=a(6319),h=a(9539),s=a(684),_=a(4549),g=a(6395),c=!g&&!s("map",function(){}),p=!g&&!c&&_("map",TypeError),v=g||c||p,f=u(function(){var e=this.iterator,t=l(i(this.next,e)),a=this.done=!!t.done;if(!a)return d(e,this.mapper,[t.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(e){l(this);try{r(e)}catch(t){h(this,"throw",t)}return p?i(p,this,e):new f(o(this),{mapper:e})}})},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},4114:function(e,t,a){var n=a(6518),i=a(8981),r=a(6198),l=a(4527),o=a(6837),u=a(9039),d=u(function(){return 4294967297!==[].push.call({length:4294967296},1)}),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},s=d||!h();n({target:"Array",proto:!0,arity:1,forced:s},{push:function(e){var t=i(this),a=r(t),n=arguments.length;o(a+n);for(var u=0;u<n;u++)t[a]=arguments[u],a++;return l(t,a),a}})},4376:function(e,t,a){var n=a(2195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},4527:function(e,t,a){var n=a(3724),i=a(4376),r=TypeError,l=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(i(e)&&!l(e,"length").writable)throw new r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},6279:function(e,t,a){var n=a(6840);e.exports=function(e,t,a){for(var i in t)n(e,i,t[i],a);return e}},6319:function(e,t,a){var n=a(8551),i=a(9539);e.exports=function(e,t,a,r){try{return r?t(n(a)[0],a[1]):t(a)}catch(l){i(e,"throw",l)}}},6604:function(e,t,a){var n=a(1114),i=a(1526);class r{constructor(){(0,n.A)(this,"BASE_URL","/nhanvien")}async getAll(e){const t=await i.A.get(this.BASE_URL,{params:e});return t.data}async getById(e){const t=await i.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await i.A.post(this.BASE_URL,e);return t.data}async update(e,t){const a=await i.A.put(`${this.BASE_URL}/${e}`,t);return a.data}async delete(e){await i.A.delete(`${this.BASE_URL}/${e}`)}}t.A=new r},6837:function(e){var t=TypeError,a=9007199254740991;e.exports=function(e){if(e>a)throw t("Maximum allowed index exceeded");return e}},7588:function(e,t,a){var n=a(6518),i=a(9565),r=a(2652),l=a(9306),o=a(8551),u=a(1767),d=a(9539),h=a(4549),s=h("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:s},{forEach:function(e){o(this);try{l(e)}catch(n){d(this,"throw",n)}if(s)return i(s,this,e);var t=u(this),a=0;r(t,function(t){e(t,a++)},{IS_RECORD:!0})}})},7945:function(e,t,a){var n=a(1114),i=a(1526);class r{constructor(){(0,n.A)(this,"BASE_URL","/performance/reviews")}async getAll(e){const t=await i.A.get(this.BASE_URL,{params:e});return t.data}async getMine(e){const t=await i.A.get(`${this.BASE_URL}/my`,{params:e});return t.data}async getById(e){const t=await i.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await i.A.post(this.BASE_URL,e);return t.data}async update(e,t){const a=await i.A.put(`${this.BASE_URL}/${e}`,t);return a.data}async updateStatus(e,t){const a=await i.A.put(`${this.BASE_URL}/${e}`,{trang_thai:t});return a.data}async delete(e){await i.A.delete(`${this.BASE_URL}/${e}`)}}t.A=new r},8733:function(e,t,a){var n=a(1114),i=a(1526);class r{constructor(){(0,n.A)(this,"BASE_URL","/performance/kpis")}async getAll(e){const t=await i.A.get(this.BASE_URL,{params:e});return t.data}async getById(e){const t=await i.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await i.A.post(this.BASE_URL,e);return t.data}async update(e,t){const a=await i.A.put(`${this.BASE_URL}/${e}`,t);return a.data}async delete(e){await i.A.delete(`${this.BASE_URL}/${e}`)}}t.A=new r},9365:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});a(4114),a(8111),a(116),a(7588),a(1701);var n=a(1431),i=a(8548),r=a(163),l=a(7918),o=a(7945),u=a(8733),d=a(6604);const h={class:"orangehrm-review-page"},s={class:"orangehrm-page-header"},_={class:"orangehrm-page-actions"},g={key:0},c={class:"orangehrm-text-muted"},p={key:0},v={class:"orangehrm-pagination"},f={key:0,class:"orangehrm-review-details"},m={key:0},b={key:0},y={key:0},k={class:"orangehrm-text-muted"};var w=(0,n.pM)({__name:"PerformanceReviewList",setup(e){const t=(0,n.KR)([]),a=(0,n.KR)([]),w=(0,n.KR)([]),F=(0,n.KR)(!1),A=(0,n.KR)(""),R=(0,n.KR)(!1),x=(0,n.KR)(!1),C=(0,n.KR)(!1),E=(0,n.KR)(""),V=(0,n.KR)(null),I=(0,n.KR)(),U=(0,n.Kh)({currentPage:1,limit:10,total:0}),$=(0,n.Kh)({nhan_vien_id:"",trang_thai:""}),L=(0,n.Kh)({nhan_vien_id:"",nguoi_danh_gia_id:"",tu_ngay:"",den_ngay:"",trang_thai:"Draft",ratings:[{kpi_id:"",diem:0,ghi_chu:""}]}),S={nhan_vien_id:[{required:!0,message:"Vui lòng chọn nhân viên",trigger:"change"}],nguoi_danh_gia_id:[{required:!0,message:"Vui lòng chọn người đánh giá",trigger:"change"}],tu_ngay:[{required:!0,message:"Vui lòng chọn ngày bắt đầu",trigger:"change"}],den_ngay:[{required:!0,message:"Vui lòng chọn ngày kết thúc",trigger:"change"}],trang_thai:[{required:!0,message:"Vui lòng chọn trạng thái",trigger:"change"}]},T=async()=>{F.value=!0,A.value="";try{const e={page:U.currentPage,limit:U.limit};$.nhan_vien_id&&(e.nhan_vien_id=$.nhan_vien_id),$.trang_thai&&(e.trang_thai=$.trang_thai);const a=await o.A.getAll(e);t.value=a.data||[],U.total=a.pagination?.total||0}catch(e){console.error("Error loading reviews:",e),A.value=e.response?.data?.msg||"Không thể tải danh sách đánh giá",r.nk.error(A.value)}finally{F.value=!1}},K=async()=>{try{const e=await u.A.getAll({limit:1e3,kich_hoat:!0});a.value=e.data||[]}catch(e){console.error("Error loading KPIs:",e)}},W=async()=>{try{const e=await d.A.getAll({limit:1e3});w.value=e.data||[]}catch(e){console.error("Error loading employees:",e)}},B=()=>{U.currentPage=1,T()},P=e=>{U.currentPage=e,T()},X=e=>{U.limit=e,U.currentPage=1,T()},D=()=>{L.ratings.push({kpi_id:"",diem:0,ghi_chu:""})},H=e=>{L.ratings.length>1&&L.ratings.splice(e,1)},Y=()=>{let e=0,t=0;return L.ratings.forEach(n=>{const i=a.value.find(e=>e._id===n.kpi_id);i&&n.diem>0&&(e+=n.diem*i.trong_so,t+=i.trong_so)}),0===t?"0.0":(e/t).toFixed(1)},j=e=>{V.value=e,C.value=!0},N=e=>{E.value=e._id,L.nhan_vien_id="object"===typeof e.nhan_vien_id?e.nhan_vien_id._id:e.nhan_vien_id,L.nguoi_danh_gia_id="object"===typeof e.nguoi_danh_gia_id?e.nguoi_danh_gia_id._id:e.nguoi_danh_gia_id,L.tu_ngay=e.tu_ngay,L.den_ngay=e.den_ngay,L.trang_thai=e.trang_thai,L.ratings=e.ratings.map(e=>({kpi_id:"object"===typeof e.kpi_id?e.kpi_id._id:e.kpi_id,diem:e.diem,ghi_chu:e.ghi_chu||""})),x.value=!0},z=async()=>{I.value&&await I.value.validate(async e=>{if(e){R.value=!0;try{const e={nhan_vien_id:L.nhan_vien_id,nguoi_danh_gia_id:L.nguoi_danh_gia_id,tu_ngay:L.tu_ngay,den_ngay:L.den_ngay,trang_thai:L.trang_thai,ratings:L.ratings,diem_tong:parseFloat(Y())};E.value?(await o.A.update(E.value,e),r.nk.success("Cập nhật đánh giá thành công")):(await o.A.create(e),r.nk.success("Tạo đánh giá thành công")),M(),await T()}catch(t){console.error("Error saving review:",t),r.nk.error(t.response?.data?.msg||"Không thể lưu đánh giá")}finally{R.value=!1}}})},q=async e=>{try{await l.s.confirm("Bạn có chắc chắn muốn xóa đánh giá này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await o.A.delete(e),r.nk.success("Xóa đánh giá thành công"),await T()}catch(t){"cancel"!==t&&(console.error("Error deleting review:",t),r.nk.error(t.response?.data?.msg||"Không thể xóa đánh giá"))}},M=()=>{x.value=!1,E.value="",I.value&&I.value.resetFields(),L.nhan_vien_id="",L.nguoi_danh_gia_id="",L.tu_ngay="",L.den_ngay="",L.trang_thai="Draft",L.ratings=[{kpi_id:"",diem:0,ghi_chu:""}]},Q=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("vi-VN")},O=e=>{const t={Draft:"info",InReview:"warning",Completed:"success"};return t[e]||"info"},G=e=>{const t={Draft:"Nháp",InReview:"Đang đánh giá",Completed:"Hoàn thành"};return t[e]||e},J=e=>e>=4?"success":e>=3?"warning":"danger";return(0,n.sV)(()=>{T(),K(),W()}),(e,r)=>{const l=(0,n.g2)("el-button"),o=(0,n.g2)("el-option"),u=(0,n.g2)("el-select"),d=(0,n.g2)("el-form-item"),K=(0,n.g2)("el-form"),W=(0,n.g2)("el-card"),Z=(0,n.g2)("el-table-column"),ee=(0,n.g2)("el-tag"),te=(0,n.g2)("el-space"),ae=(0,n.g2)("el-table"),ne=(0,n.g2)("el-pagination"),ie=(0,n.g2)("el-col"),re=(0,n.g2)("el-row"),le=(0,n.g2)("el-date-picker"),oe=(0,n.g2)("el-radio"),ue=(0,n.g2)("el-radio-group"),de=(0,n.g2)("el-divider"),he=(0,n.g2)("el-rate"),se=(0,n.g2)("el-input"),_e=(0,n.g2)("el-dialog"),ge=(0,n.g2)("el-descriptions-item"),ce=(0,n.g2)("el-descriptions"),pe=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",s,[r[14]||(r[14]=(0,n.Lk)("h1",{class:"orangehrm-page-title"},"Đánh giá hiệu suất",-1)),(0,n.Lk)("div",_,[(0,n.bF)(l,{icon:(0,n.R1)(i.Refresh),onClick:T},{default:(0,n.k6)(()=>[...r[12]||(r[12]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,n.bF)(l,{type:"primary",icon:(0,n.R1)(i.Plus),onClick:r[0]||(r[0]=e=>x.value=!0)},{default:(0,n.k6)(()=>[...r[13]||(r[13]=[(0,n.eW)(" Tạo đánh giá mới ",-1)])]),_:1},8,["icon"])])]),(0,n.bF)(W,{class:"orangehrm-filter-card",shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bF)(K,{inline:!0,onSubmit:(0,n.D$)(T,["prevent"])},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"Nhân viên"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:$.nhan_vien_id,"onUpdate:modelValue":r[1]||(r[1]=e=>$.nhan_vien_id=e),placeholder:"Tất cả",clearable:"",filterable:"",style:{width:"250px"},onChange:B},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.value,e=>((0,n.uX)(),(0,n.Wv)(o,{key:e._id,label:`${e.ma_nhan_vien} - ${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(d,{label:"Trạng thái"},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:$.trang_thai,"onUpdate:modelValue":r[2]||(r[2]=e=>$.trang_thai=e),placeholder:"Tất cả",clearable:"",style:{width:"150px"},onChange:B},{default:(0,n.k6)(()=>[(0,n.bF)(o,{label:"Nháp",value:"Draft"}),(0,n.bF)(o,{label:"Đang đánh giá",value:"InReview"}),(0,n.bF)(o,{label:"Hoàn thành",value:"Completed"})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.bF)(l,{type:"primary",icon:(0,n.R1)(i.Search),onClick:B},{default:(0,n.k6)(()=>[...r[15]||(r[15]=[(0,n.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(W,{class:"orangehrm-table-card",shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(ae,{data:t.value,style:{width:"100%"},stripe:"","empty-text":A.value||"Không có dữ liệu"},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{type:"index",label:"STT",width:"60"}),(0,n.bF)(Z,{prop:"nhan_vien_id",label:"Nhân viên","min-width":"200"},{default:(0,n.k6)(({row:e})=>["object"===typeof e.nhan_vien_id&&e.nhan_vien_id?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("strong",null,(0,n.v_)(e.nhan_vien_id.ma_nhan_vien),1),(0,n.Lk)("div",c,(0,n.v_)(e.nhan_vien_id.ho_dem)+" "+(0,n.v_)(e.nhan_vien_id.ten),1)])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(Z,{prop:"nguoi_danh_gia_id",label:"Người đánh giá","min-width":"180"},{default:(0,n.k6)(({row:e})=>["object"===typeof e.nguoi_danh_gia_id&&e.nguoi_danh_gia_id?((0,n.uX)(),(0,n.CE)("div",p,(0,n.v_)(e.nguoi_danh_gia_id.ho_dem)+" "+(0,n.v_)(e.nguoi_danh_gia_id.ten),1)):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(Z,{label:"Thời gian đánh giá",width:"200"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(Q(e.tu_ngay))+" - "+(0,n.v_)(Q(e.den_ngay)),1)]),_:1}),(0,n.bF)(Z,{prop:"diem_tong",label:"Điểm",width:"100",align:"center"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(ee,{type:J(e.diem_tong),size:"large"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.diem_tong.toFixed(1))+"/5 ",1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(Z,{label:"Trạng thái",width:"140"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(ee,{type:O(e.trang_thai),size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(G(e.trang_thai)),1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(Z,{label:"Ngày tạo",width:"150"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(Q(e.ngay_tao)),1)]),_:1}),(0,n.bF)(Z,{label:"Hành động",width:"260",fixed:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(te,null,{default:(0,n.k6)(()=>[(0,n.bF)(l,{size:"small",icon:(0,n.R1)(i.View),onClick:t=>j(e)},{default:(0,n.k6)(()=>[...r[16]||(r[16]=[(0,n.eW)("Xem",-1)])]),_:1},8,["icon","onClick"]),"Completed"!==e.trang_thai?((0,n.uX)(),(0,n.Wv)(l,{key:0,size:"small",icon:(0,n.R1)(i.Edit),onClick:t=>N(e)},{default:(0,n.k6)(()=>[...r[17]||(r[17]=[(0,n.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"])):(0,n.Q3)("",!0),"Draft"===e.trang_thai?((0,n.uX)(),(0,n.Wv)(l,{key:1,size:"small",type:"danger",icon:(0,n.R1)(i.Delete),onClick:t=>q(e._id)},{default:(0,n.k6)(()=>[...r[18]||(r[18]=[(0,n.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])):(0,n.Q3)("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","empty-text"])),[[pe,F.value]]),(0,n.Lk)("div",v,[(0,n.bF)(ne,{"current-page":U.currentPage,"onUpdate:currentPage":r[3]||(r[3]=e=>U.currentPage=e),"page-size":U.limit,"onUpdate:pageSize":r[4]||(r[4]=e=>U.limit=e),"page-sizes":[10,20,50,100],total:U.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),_:1}),(0,n.bF)(_e,{modelValue:x.value,"onUpdate:modelValue":r[10]||(r[10]=e=>x.value=e),title:E.value?"Chỉnh sửa đánh giá":"Tạo đánh giá mới",width:"900px","close-on-click-modal":!1},{footer:(0,n.k6)(()=>[(0,n.bF)(l,{onClick:M},{default:(0,n.k6)(()=>[...r[25]||(r[25]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(l,{type:"primary",loading:R.value,onClick:z},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(E.value?"Cập nhật":"Tạo mới"),1)]),_:1},8,["loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(K,{ref_key:"formRef",ref:I,model:L,rules:S,"label-width":"150px","label-position":"left"},{default:(0,n.k6)(()=>[(0,n.bF)(re,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(ie,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"Nhân viên",prop:"nhan_vien_id",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:L.nhan_vien_id,"onUpdate:modelValue":r[5]||(r[5]=e=>L.nhan_vien_id=e),placeholder:"Chọn nhân viên...",filterable:"",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.value,e=>((0,n.uX)(),(0,n.Wv)(o,{key:e._id,label:`${e.ma_nhan_vien} - ${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(ie,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"Người đánh giá",prop:"nguoi_danh_gia_id",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:L.nguoi_danh_gia_id,"onUpdate:modelValue":r[6]||(r[6]=e=>L.nguoi_danh_gia_id=e),placeholder:"Chọn người đánh giá...",filterable:"",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.value,e=>((0,n.uX)(),(0,n.Wv)(o,{key:e._id,label:`${e.ma_nhan_vien} - ${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(re,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(ie,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"Từ ngày",prop:"tu_ngay",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(le,{modelValue:L.tu_ngay,"onUpdate:modelValue":r[7]||(r[7]=e=>L.tu_ngay=e),type:"date",placeholder:"Chọn ngày bắt đầu...",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(ie,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(d,{label:"Đến ngày",prop:"den_ngay",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(le,{modelValue:L.den_ngay,"onUpdate:modelValue":r[8]||(r[8]=e=>L.den_ngay=e),type:"date",placeholder:"Chọn ngày kết thúc...",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(d,{label:"Trạng thái",prop:"trang_thai",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(ue,{modelValue:L.trang_thai,"onUpdate:modelValue":r[9]||(r[9]=e=>L.trang_thai=e)},{default:(0,n.k6)(()=>[(0,n.bF)(oe,{value:"Draft"},{default:(0,n.k6)(()=>[...r[19]||(r[19]=[(0,n.eW)("Nháp",-1)])]),_:1}),(0,n.bF)(oe,{value:"InReview"},{default:(0,n.k6)(()=>[...r[20]||(r[20]=[(0,n.eW)("Đang đánh giá",-1)])]),_:1}),(0,n.bF)(oe,{value:"Completed"},{default:(0,n.k6)(()=>[...r[21]||(r[21]=[(0,n.eW)("Hoàn thành",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(de,null,{default:(0,n.k6)(()=>[...r[22]||(r[22]=[(0,n.eW)("Đánh giá KPI",-1)])]),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(L.ratings,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"orangehrm-rating-item"},[(0,n.bF)(re,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(ie,{span:10},{default:(0,n.k6)(()=>[(0,n.bF)(d,{prop:`ratings.${t}.kpi_id`,label:"KPI",rules:[{required:!0,message:"Vui lòng chọn KPI"}]},{default:(0,n.k6)(()=>[(0,n.bF)(u,{modelValue:e.kpi_id,"onUpdate:modelValue":t=>e.kpi_id=t,placeholder:"Chọn KPI...",filterable:"",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,e=>((0,n.uX)(),(0,n.Wv)(o,{key:e._id,label:`${e.ten} (${e.trong_so}%)`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),(0,n.bF)(ie,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(d,{prop:`ratings.${t}.diem`,label:"Điểm",rules:[{required:!0,message:"Vui lòng nhập điểm"},{type:"number",min:0,max:5,message:"Điểm từ 0-5"}]},{default:(0,n.k6)(()=>[(0,n.bF)(he,{modelValue:e.diem,"onUpdate:modelValue":t=>e.diem=t,max:5,"allow-half":"","show-score":"","score-template":"{value}"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),(0,n.bF)(ie,{span:6},{default:(0,n.k6)(()=>[(0,n.bF)(d,{prop:`ratings.${t}.ghi_chu`,label:"Ghi chú"},{default:(0,n.k6)(()=>[(0,n.bF)(se,{modelValue:e.ghi_chu,"onUpdate:modelValue":t=>e.ghi_chu=t,placeholder:"Ghi chú...",maxlength:"200"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),(0,n.bF)(ie,{span:2},{default:(0,n.k6)(()=>[(0,n.bF)(l,{type:"danger",icon:(0,n.R1)(i.Delete),circle:"",disabled:L.ratings.length<=1,onClick:e=>H(t)},null,8,["icon","disabled","onClick"])]),_:2},1024)]),_:2},1024)]))),128)),(0,n.bF)(l,{type:"primary",icon:(0,n.R1)(i.Plus),style:{width:"100%"},onClick:D},{default:(0,n.k6)(()=>[...r[23]||(r[23]=[(0,n.eW)(" Thêm KPI đánh giá ",-1)])]),_:1},8,["icon"]),(0,n.bF)(de),(0,n.bF)(d,{label:"Điểm tổng"},{default:(0,n.k6)(()=>[(0,n.bF)(ee,{type:"success",size:"large"},{default:(0,n.k6)(()=>[(0,n.Lk)("strong",null,(0,n.v_)(Y())+"/5.0",1)]),_:1}),r[24]||(r[24]=(0,n.Lk)("span",{class:"orangehrm-score-hint"}," (Tính theo trọng số của các KPI) ",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),(0,n.bF)(_e,{modelValue:C.value,"onUpdate:modelValue":r[11]||(r[11]=e=>C.value=e),title:"Chi tiết đánh giá hiệu suất",width:"800px"},{default:(0,n.k6)(()=>[V.value?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(ce,{column:2,border:""},{default:(0,n.k6)(()=>[(0,n.bF)(ge,{label:"Nhân viên"},{default:(0,n.k6)(()=>["object"===typeof V.value.nhan_vien_id&&V.value.nhan_vien_id?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("strong",null,(0,n.v_)(V.value.nhan_vien_id.ma_nhan_vien),1),(0,n.Lk)("div",null,(0,n.v_)(V.value.nhan_vien_id.ho_dem)+" "+(0,n.v_)(V.value.nhan_vien_id.ten),1)])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(ge,{label:"Người đánh giá"},{default:(0,n.k6)(()=>["object"===typeof V.value.nguoi_danh_gia_id&&V.value.nguoi_danh_gia_id?((0,n.uX)(),(0,n.CE)("div",b,(0,n.v_)(V.value.nguoi_danh_gia_id.ho_dem)+" "+(0,n.v_)(V.value.nguoi_danh_gia_id.ten),1)):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(ge,{label:"Từ ngày"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(Q(V.value.tu_ngay)),1)]),_:1}),(0,n.bF)(ge,{label:"Đến ngày"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(Q(V.value.den_ngay)),1)]),_:1}),(0,n.bF)(ge,{label:"Trạng thái"},{default:(0,n.k6)(()=>[(0,n.bF)(ee,{type:O(V.value.trang_thai)},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(G(V.value.trang_thai)),1)]),_:1},8,["type"])]),_:1}),(0,n.bF)(ge,{label:"Điểm tổng"},{default:(0,n.k6)(()=>[(0,n.bF)(ee,{type:J(V.value.diem_tong),size:"large"},{default:(0,n.k6)(()=>[(0,n.Lk)("strong",null,(0,n.v_)(V.value.diem_tong.toFixed(1))+"/5.0",1)]),_:1},8,["type"])]),_:1}),(0,n.bF)(ge,{label:"Ngày tạo"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(Q(V.value.ngay_tao)),1)]),_:1}),(0,n.bF)(ge,{label:"Cập nhật cuối"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(Q(V.value.ngay_cap_nhat)),1)]),_:1})]),_:1}),(0,n.bF)(de,null,{default:(0,n.k6)(()=>[...r[26]||(r[26]=[(0,n.eW)("Chi tiết đánh giá KPI",-1)])]),_:1}),(0,n.bF)(ae,{data:V.value.ratings,border:"",stripe:""},{default:(0,n.k6)(()=>[(0,n.bF)(Z,{type:"index",label:"STT",width:"60"}),(0,n.bF)(Z,{prop:"kpi_id",label:"KPI","min-width":"200"},{default:(0,n.k6)(({row:e})=>["object"===typeof e.kpi_id&&e.kpi_id?((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("strong",null,(0,n.v_)(e.kpi_id.ten),1),(0,n.Lk)("div",k," Trọng số: "+(0,n.v_)(e.kpi_id.trong_so)+"% ",1)])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(Z,{prop:"diem",label:"Điểm",width:"180",align:"center"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(he,{"model-value":e.diem,disabled:"","show-score":"","score-template":"{value}"},null,8,["model-value"])]),_:1}),(0,n.bF)(Z,{prop:"ghi_chu",label:"Ghi chú","min-width":"200"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.ghi_chu||"-"),1)]),_:1})]),_:1},8,["data"])])):(0,n.Q3)("",!0)]),_:1},8,["modelValue"])])}}}),F=a(6262);const A=(0,F.A)(w,[["__scopeId","data-v-0454bab2"]]);var R=A},9462:function(e,t,a){var n=a(9565),i=a(2360),r=a(6699),l=a(6279),o=a(8227),u=a(1181),d=a(5966),h=a(7657).IteratorPrototype,s=a(2529),_=a(9539),g=a(1385),c=o("toStringTag"),p="IteratorHelper",v="WrapForValidIterator",f="normal",m="throw",b=u.set,y=function(e){var t=u.getterFor(e?v:p);return l(i(h),{next:function(){var a=t(this);if(e)return a.nextHandler();if(a.done)return s(void 0,!0);try{var n=a.nextHandler();return a.returnHandlerResult?n:s(n,a.done)}catch(i){throw a.done=!0,i}},return:function(){var a=t(this),i=a.iterator;if(a.done=!0,e){var r=d(i,"return");return r?n(r,i):s(void 0,!0)}if(a.inner)try{_(a.inner.iterator,f)}catch(l){return _(i,m,l)}if(a.openIters)try{g(a.openIters,f)}catch(l){return _(i,m,l)}return i&&_(i,f),s(void 0,!0)}})},k=y(!0),w=y(!1);r(w,c,"Iterator Helper"),e.exports=function(e,t,a){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=t?v:p,i.returnHandlerResult=!!a,i.nextHandler=e,i.counter=0,i.done=!1,b(this,i)};return n.prototype=t?k:w,n}}}]);
//# sourceMappingURL=9365.079bb946.js.map