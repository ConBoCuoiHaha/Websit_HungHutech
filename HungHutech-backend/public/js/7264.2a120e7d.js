"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[7264],{684:function(e){e.exports=function(e,t){var a="function"==typeof Iterator&&Iterator.prototype[e];if(a)try{a.call({next:null},t).next()}catch(n){return!0}}},1385:function(e,t,a){var n=a(9539);e.exports=function(e,t,a){for(var l=e.length-1;l>=0;l--)if(void 0!==e[l])try{a=n(e[l].iterator,t,a)}catch(i){t="throw",a=i}if("throw"===t)throw a;return a}},1526:function(e,t,a){var n=a(1114),l=a(4335);const i=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,o=i||"http://192.168.88.50:5000/api";console.log("API Base URL:",o);class r{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=l.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,t){return this.axiosInstance.get(e,t)}post(e,t,a){return this.axiosInstance.post(e,t,a)}put(e,t,a){return this.axiosInstance.put(e,t,a)}delete(e,t){return this.axiosInstance.delete(e,t)}patch(e,t,a){return this.axiosInstance.patch(e,t,a)}}t.A=new r},2489:function(e,t,a){var n=a(6518),l=a(9565),i=a(9306),o=a(8551),r=a(1767),u=a(9462),s=a(6319),d=a(6395),c=a(9539),h=a(684),v=a(4549),_=!d&&!h("filter",function(){}),g=!d&&!_&&v("filter",TypeError),p=d||_||g,m=u(function(){var e,t,a,n=this.iterator,i=this.predicate,r=this.next;while(1){if(e=o(l(r,n)),t=this.done=!!e.done,t)return;if(a=e.value,s(n,i,[a,this.counter++],!0))return a}});n({target:"Iterator",proto:!0,real:!0,forced:p},{filter:function(e){o(this);try{i(e)}catch(t){c(this,"throw",t)}return g?l(g,this,e):new m(r(this),{predicate:e})}})},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,a){var n=a(6840);e.exports=function(e,t,a){for(var l in t)n(e,l,t[l],a);return e}},6319:function(e,t,a){var n=a(8551),l=a(9539);e.exports=function(e,t,a,i){try{return i?t(n(a)[0],a[1]):t(a)}catch(o){l(e,"throw",o)}}},7264:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});a(8111),a(2489),a(7588);var n=a(1431),l=a(163),i=a(8548),o=a(1114),r=a(1526);class u{constructor(){(0,o.A)(this,"BASE_URL","/maintenance")}async getEmployeesForPurge(){const e=await r.A.get(`${this.BASE_URL}/employees/purgeable`);return e.data}async purgeEmployee(e,t){const a=await r.A.post(`${this.BASE_URL}/employees/${e}/purge`,{ly_do:t});return a.data}async getCandidatesForPurge(){const e=await r.A.get(`${this.BASE_URL}/candidates/purgeable`);return e.data}async purgeCandidate(e,t){const a=await r.A.post(`${this.BASE_URL}/candidates/${e}/purge`,{ly_do:t});return a.data}async getPurgeLogs(e){const t=await r.A.get(`${this.BASE_URL}/logs`,{params:e});return t.data}}var s=new u;const d={class:"orangehrm-maintenance-page"},c={class:"orangehrm-page-header"},h={class:"orangehrm-page-actions"},v={key:0,class:"orangehrm-text-muted"},_={class:"data-breakdown"},g={key:0},p={key:1},m={key:2},k={key:3},b={key:4},f={key:5},y={key:6},w={key:0,class:"maintenance-stats"},F={class:"orangehrm-text-muted"},L={class:"data-breakdown"},C={key:0},x={key:1},R={key:0,class:"maintenance-stats"},E={class:"logs-timeline-container"},W={class:"log-header"},T={class:"log-name"},V={class:"log-details"},X={class:"log-item"},I={class:"log-item"},q={key:0,class:"log-item"},H={key:1,class:"log-item"},j={key:2,class:"log-item"},z={key:0,class:"orangehrm-pagination"},N={class:"purge-info"},U={class:"info-row"},B={key:0,class:"info-row"},P={key:1,class:"info-row"},S={class:"info-row"},K={class:"data-details"};var A=(0,n.pM)({__name:"MaintenancePage",setup(e){const t=(0,n.KR)("employees"),a=(0,n.KR)(!1),o=(0,n.KR)([]),r=(0,n.KR)(730),u=(0,n.KR)({q:""}),A=(0,n.KR)(!1),D=(0,n.KR)([]),Q=(0,n.KR)(365),Y=(0,n.KR)({q:""}),M=(0,n.KR)(!1),$=(0,n.KR)([]),G=(0,n.KR)({currentPage:1,limit:20,total:0}),O=(0,n.KR)({}),J=(0,n.KR)({visible:!1,title:"",type:"",objectId:"",objectName:"",objectCode:"",objectEmail:"",totalRecords:0,dataBreakdown:{},confirmed:!1,reason:"",loading:!1}),Z=async()=>{a.value=!0;try{const e=await s.getEmployeesForPurge();let t=e.data;if(u.value.q&&""!==u.value.q.trim()){const e=u.value.q.toLowerCase();t=t.filter(t=>t.ma_nhan_vien.toLowerCase().includes(e)||`${t.ho_dem} ${t.ten}`.toLowerCase().includes(e)||t.lien_he?.email_cong_viec?.toLowerCase().includes(e))}o.value=t,r.value=e.retention_policy_days}catch(e){l.nk.error(e.response?.data?.msg||"Lỗi khi tải danh sách nhân viên")}finally{a.value=!1}},ee=async()=>{A.value=!0;try{const e=await s.getCandidatesForPurge();let t=e.data;if(Y.value.q&&""!==Y.value.q.trim()){const e=Y.value.q.toLowerCase();t=t.filter(t=>t.ho_ten.toLowerCase().includes(e)||t.email.toLowerCase().includes(e))}D.value=t,Q.value=e.retention_policy_days}catch(e){l.nk.error(e.response?.data?.msg||"Lỗi khi tải danh sách ứng viên")}finally{A.value=!1}},te=async()=>{M.value=!0;try{const e=await s.getPurgeLogs({page:G.value.currentPage,limit:G.value.limit,...O.value});$.value=e.data,G.value.total=e.total}catch(e){l.nk.error(e.response?.data?.msg||"Lỗi khi tải lịch sử purge")}finally{M.value=!1}},ae=()=>{"employees"===t.value?Z():"candidates"===t.value?ee():"logs"===t.value&&te()},ne=e=>{t.value=e,ae()},le=e=>{const t={leave_requests:"yeu_cau_nghi_phep",attendance:"cham_cong",timesheets:"timesheets",performance_trackers:"performance_trackers",performance_reviews:"performance_reviews",claims:"claims",posts:"buzz_posts"},a={};Object.entries(e.related_data_count).forEach(([e,n])=>{if("total"!==e&&n&&n>0){const l=t[e]||e;a[l]=n}}),J.value={visible:!0,title:"Xóa vĩnh viễn nhân viên",type:"employee",objectId:e._id,objectName:`${e.ho_dem} ${e.ten}`,objectCode:e.ma_nhan_vien,objectEmail:e.lien_he?.email_cong_viec||"",totalRecords:e.related_data_count.total,dataBreakdown:a,confirmed:!1,reason:"",loading:!1}},ie=e=>{const t={};e.related_data_count.applications&&(t.applications=e.related_data_count.applications),e.related_data_count.interviews&&(t.interviews=e.related_data_count.interviews),J.value={visible:!0,title:"Xóa vĩnh viễn ứng viên",type:"candidate",objectId:e._id,objectName:e.ho_ten,objectCode:"",objectEmail:e.email,totalRecords:e.related_data_count.total,dataBreakdown:t,confirmed:!1,reason:"",loading:!1}},oe=async()=>{J.value.loading=!0;try{"employee"===J.value.type?(await s.purgeEmployee(J.value.objectId,J.value.reason),l.nk.success("Đã xóa vĩnh viễn nhân viên thành công"),await Z()):(await s.purgeCandidate(J.value.objectId,J.value.reason),l.nk.success("Đã xóa vĩnh viễn ứng viên thành công"),await ee()),J.value.visible=!1}catch(e){l.nk.error(e.response?.data?.msg||"Lỗi khi xóa dữ liệu")}finally{J.value.loading=!1}},re=e=>{G.value.limit=e,G.value.currentPage=1,te()},ue=e=>{G.value.currentPage=e,te()},se=e=>{const t={"Ung tuyen":"Ứng tuyển","So tuyen":"Sơ tuyển","Phong van":"Phỏng vấn","Tuyen dung":"Tuyển dụng","Tu choi":"Từ chối"};return t[e]||e},de=e=>{const t={yeu_cau_nghi_phep:"Yêu cầu nghỉ phép",cham_cong:"Chấm công",timesheets:"Timesheets",performance_trackers:"Theo dõi hiệu suất",performance_reviews:"Đánh giá hiệu suất",claims:"Bồi hoàn",buzz_posts:"Bài viết Buzz",applications:"Hồ sơ ứng tuyển",interviews:"Lịch phỏng vấn"};return t[e]||e},ce=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return(0,n.sV)(()=>{Z()}),(e,l)=>{const s=(0,n.g2)("el-button"),he=(0,n.g2)("el-alert"),ve=(0,n.g2)("el-icon"),_e=(0,n.g2)("el-input"),ge=(0,n.g2)("el-form-item"),pe=(0,n.g2)("el-form"),me=(0,n.g2)("el-table-column"),ke=(0,n.g2)("el-tag"),be=(0,n.g2)("el-popover"),fe=(0,n.g2)("el-text"),ye=(0,n.g2)("el-table"),we=(0,n.g2)("el-tab-pane"),Fe=(0,n.g2)("el-option"),Le=(0,n.g2)("el-select"),Ce=(0,n.g2)("el-date-picker"),xe=(0,n.g2)("el-card"),Re=(0,n.g2)("el-timeline-item"),Ee=(0,n.g2)("el-timeline"),We=(0,n.g2)("el-empty"),Te=(0,n.g2)("el-pagination"),Ve=(0,n.g2)("el-tabs"),Xe=(0,n.g2)("el-descriptions-item"),Ie=(0,n.g2)("el-descriptions"),qe=(0,n.g2)("el-checkbox"),He=(0,n.g2)("el-dialog"),je=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",c,[l[13]||(l[13]=(0,n.Lk)("h1",{class:"orangehrm-page-title"},"Bảo trì dữ liệu & GDPR Compliance",-1)),(0,n.Lk)("div",h,[(0,n.bF)(s,{icon:(0,n.R1)(i.Refresh),onClick:ae},{default:(0,n.k6)(()=>[...l[12]||(l[12]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"])])]),(0,n.bF)(xe,{class:"orangehrm-tabs-card",shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bF)(Ve,{modelValue:t.value,"onUpdate:modelValue":l[7]||(l[7]=e=>t.value=e),onTabChange:ne},{default:(0,n.k6)(()=>[(0,n.bF)(we,{label:"Nhân viên",name:"employees"},{default:(0,n.k6)(()=>[(0,n.bF)(he,{type:"error",closable:!1,"show-icon":"",class:"maintenance-warning"},{title:(0,n.k6)(()=>[...l[14]||(l[14]=[(0,n.Lk)("strong",null,"Cảnh báo: Hành động không thể hoàn tác",-1)])]),default:(0,n.k6)(()=>[l[15]||(l[15]=(0,n.Lk)("div",null," Xóa vĩnh viễn nhân viên sẽ xóa TOÀN BỘ dữ liệu liên quan bao gồm: yêu cầu nghỉ phép, chấm công, timesheet, đánh giá hiệu suất, bồi hoàn và bài viết. Hành động này không thể khôi phục. ",-1))]),_:1}),(0,n.bF)(pe,{inline:!0,class:"maintenance-filters"},{default:(0,n.k6)(()=>[(0,n.bF)(ge,{label:"Tìm kiếm"},{default:(0,n.k6)(()=>[(0,n.bF)(_e,{modelValue:u.value.q,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value.q=e),placeholder:"Tìm theo mã NV, tên...",clearable:"",style:{width:"300px"},onKeyup:(0,n.jR)(Z,["enter"]),onClear:Z},{prefix:(0,n.k6)(()=>[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Search))]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(ge,null,{default:(0,n.k6)(()=>[(0,n.bF)(s,{type:"primary",icon:(0,n.R1)(i.Search),onClick:Z},{default:(0,n.k6)(()=>[...l[16]||(l[16]=[(0,n.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(ye,{data:o.value,style:{width:"100%"},stripe:"","empty-text":"Không có nhân viên nào đủ điều kiện xóa"},{default:(0,n.k6)(()=>[(0,n.bF)(me,{type:"index",label:"STT",width:"60"}),(0,n.bF)(me,{prop:"ma_nhan_vien",label:"Mã NV",width:"120"}),(0,n.bF)(me,{label:"Họ tên","min-width":"200"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,n.v_)(e.ho_dem)+" "+(0,n.v_)(e.ten),1),e.lien_he?.email_cong_viec?((0,n.uX)(),(0,n.CE)("div",v,(0,n.v_)(e.lien_he.email_cong_viec),1)):(0,n.Q3)("",!0)])]),_:1}),(0,n.bF)(me,{label:"Thời gian lưu trữ",width:"150"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.retention_period),1)]),_:1}),(0,n.bF)(me,{label:"Dữ liệu liên quan",width:"180"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(ke,{type:"info",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.related_data_count.total)+" bản ghi ",1)]),_:2},1024),(0,n.bF)(be,{placement:"top",width:300,trigger:"hover"},{reference:(0,n.k6)(()=>[(0,n.bF)(ve,{class:"info-icon"},{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.InfoFilled))]),_:1})]),default:(0,n.k6)(()=>[(0,n.Lk)("div",_,[e.related_data_count.leave_requests?((0,n.uX)(),(0,n.CE)("div",g,[l[17]||(l[17]=(0,n.eW)(" Yêu cầu nghỉ phép: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.leave_requests),1)])):(0,n.Q3)("",!0),e.related_data_count.attendance?((0,n.uX)(),(0,n.CE)("div",p,[l[18]||(l[18]=(0,n.eW)(" Chấm công: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.attendance),1)])):(0,n.Q3)("",!0),e.related_data_count.timesheets?((0,n.uX)(),(0,n.CE)("div",m,[l[19]||(l[19]=(0,n.eW)(" Timesheets: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.timesheets),1)])):(0,n.Q3)("",!0),e.related_data_count.performance_trackers?((0,n.uX)(),(0,n.CE)("div",k,[l[20]||(l[20]=(0,n.eW)(" Performance Trackers: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.performance_trackers),1)])):(0,n.Q3)("",!0),e.related_data_count.performance_reviews?((0,n.uX)(),(0,n.CE)("div",b,[l[21]||(l[21]=(0,n.eW)(" Đánh giá hiệu suất: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.performance_reviews),1)])):(0,n.Q3)("",!0),e.related_data_count.claims?((0,n.uX)(),(0,n.CE)("div",f,[l[22]||(l[22]=(0,n.eW)(" Bồi hoàn: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.claims),1)])):(0,n.Q3)("",!0),e.related_data_count.posts?((0,n.uX)(),(0,n.CE)("div",y,[l[23]||(l[23]=(0,n.eW)(" Bài viết Buzz: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.posts),1)])):(0,n.Q3)("",!0)])]),_:2},1024)]),_:1}),(0,n.bF)(me,{label:"Lý do","min-width":"250"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(fe,{type:"warning",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.reason),1)]),_:2},1024)]),_:1}),(0,n.bF)(me,{label:"Hành động",width:"180",fixed:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(s,{type:"danger",size:"small",icon:(0,n.R1)(i.Delete),onClick:t=>le(e)},{default:(0,n.k6)(()=>[...l[24]||(l[24]=[(0,n.eW)(" Xóa vĩnh viễn ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[je,a.value]]),o.value.length>0?((0,n.uX)(),(0,n.CE)("div",w,[(0,n.bF)(fe,{type:"info"},{default:(0,n.k6)(()=>[(0,n.eW)(" Tìm thấy "+(0,n.v_)(o.value.length)+" nhân viên đủ điều kiện xóa (Chính sách lưu trữ: "+(0,n.v_)(r.value)+" ngày) ",1)]),_:1})])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(we,{label:"Ứng viên",name:"candidates"},{default:(0,n.k6)(()=>[(0,n.bF)(he,{type:"error",closable:!1,"show-icon":"",class:"maintenance-warning"},{title:(0,n.k6)(()=>[...l[25]||(l[25]=[(0,n.Lk)("strong",null,"Cảnh báo: Hành động không thể hoàn tác",-1)])]),default:(0,n.k6)(()=>[l[26]||(l[26]=(0,n.Lk)("div",null," Xóa vĩnh viễn ứng viên sẽ xóa TOÀN BỘ dữ liệu liên quan bao gồm: hồ sơ ứng tuyển và lịch phỏng vấn. Hành động này không thể khôi phục. ",-1))]),_:1}),(0,n.bF)(pe,{inline:!0,class:"maintenance-filters"},{default:(0,n.k6)(()=>[(0,n.bF)(ge,{label:"Tìm kiếm"},{default:(0,n.k6)(()=>[(0,n.bF)(_e,{modelValue:Y.value.q,"onUpdate:modelValue":l[1]||(l[1]=e=>Y.value.q=e),placeholder:"Tìm theo tên, email...",clearable:"",style:{width:"300px"},onKeyup:(0,n.jR)(ee,["enter"]),onClear:ee},{prefix:(0,n.k6)(()=>[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Search))]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(ge,null,{default:(0,n.k6)(()=>[(0,n.bF)(s,{type:"primary",icon:(0,n.R1)(i.Search),onClick:ee},{default:(0,n.k6)(()=>[...l[27]||(l[27]=[(0,n.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(ye,{data:D.value,style:{width:"100%"},stripe:"","empty-text":"Không có ứng viên nào đủ điều kiện xóa"},{default:(0,n.k6)(()=>[(0,n.bF)(me,{type:"index",label:"STT",width:"60"}),(0,n.bF)(me,{label:"Họ tên","min-width":"200"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,n.v_)(e.ho_ten),1),(0,n.Lk)("div",F,(0,n.v_)(e.email),1)])]),_:1}),(0,n.bF)(me,{prop:"dien_thoai",label:"Điện thoại",width:"130"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.dien_thoai||"-"),1)]),_:1}),(0,n.bF)(me,{label:"Trạng thái cuối",width:"140"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(ke,{type:"info",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(se(e.last_status)),1)]),_:2},1024)]),_:1}),(0,n.bF)(me,{label:"Thời gian lưu trữ",width:"150"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.retention_period),1)]),_:1}),(0,n.bF)(me,{label:"Dữ liệu liên quan",width:"180"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(ke,{type:"info",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.related_data_count.total)+" bản ghi ",1)]),_:2},1024),(0,n.bF)(be,{placement:"top",width:250,trigger:"hover"},{reference:(0,n.k6)(()=>[(0,n.bF)(ve,{class:"info-icon"},{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.InfoFilled))]),_:1})]),default:(0,n.k6)(()=>[(0,n.Lk)("div",L,[e.related_data_count.applications?((0,n.uX)(),(0,n.CE)("div",C,[l[28]||(l[28]=(0,n.eW)(" Hồ sơ ứng tuyển: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.applications),1)])):(0,n.Q3)("",!0),e.related_data_count.interviews?((0,n.uX)(),(0,n.CE)("div",x,[l[29]||(l[29]=(0,n.eW)(" Lịch phỏng vấn: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.related_data_count.interviews),1)])):(0,n.Q3)("",!0)])]),_:2},1024)]),_:1}),(0,n.bF)(me,{label:"Lý do","min-width":"250"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(fe,{type:"warning",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.reason),1)]),_:2},1024)]),_:1}),(0,n.bF)(me,{label:"Hành động",width:"180",fixed:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(s,{type:"danger",size:"small",icon:(0,n.R1)(i.Delete),onClick:t=>ie(e)},{default:(0,n.k6)(()=>[...l[30]||(l[30]=[(0,n.eW)(" Xóa vĩnh viễn ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[je,A.value]]),D.value.length>0?((0,n.uX)(),(0,n.CE)("div",R,[(0,n.bF)(fe,{type:"info"},{default:(0,n.k6)(()=>[(0,n.eW)(" Tìm thấy "+(0,n.v_)(D.value.length)+" ứng viên đủ điều kiện xóa (Chính sách lưu trữ: "+(0,n.v_)(Q.value)+" ngày) ",1)]),_:1})])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(we,{label:"Lịch sử Purge",name:"logs"},{default:(0,n.k6)(()=>[(0,n.bF)(pe,{inline:!0,class:"maintenance-filters"},{default:(0,n.k6)(()=>[(0,n.bF)(ge,{label:"Loại"},{default:(0,n.k6)(()=>[(0,n.bF)(Le,{modelValue:O.value.loai,"onUpdate:modelValue":l[2]||(l[2]=e=>O.value.loai=e),placeholder:"Tất cả",clearable:"",style:{width:"150px"},onChange:te},{default:(0,n.k6)(()=>[(0,n.bF)(Fe,{label:"Nhân viên",value:"NhanVien"}),(0,n.bF)(Fe,{label:"Ứng viên",value:"UngVien"})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(ge,{label:"Từ ngày"},{default:(0,n.k6)(()=>[(0,n.bF)(Ce,{modelValue:O.value.tu_ngay,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value.tu_ngay=e),type:"date",placeholder:"Chọn ngày",style:{width:"180px"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",onChange:te},null,8,["modelValue"])]),_:1}),(0,n.bF)(ge,{label:"Đến ngày"},{default:(0,n.k6)(()=>[(0,n.bF)(Ce,{modelValue:O.value.den_ngay,"onUpdate:modelValue":l[4]||(l[4]=e=>O.value.den_ngay=e),type:"date",placeholder:"Chọn ngày",style:{width:"180px"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",onChange:te},null,8,["modelValue"])]),_:1}),(0,n.bF)(ge,null,{default:(0,n.k6)(()=>[(0,n.bF)(s,{type:"primary",icon:(0,n.R1)(i.Search),onClick:te},{default:(0,n.k6)(()=>[...l[31]||(l[31]=[(0,n.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1}),(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",E,[$.value.length>0?((0,n.uX)(),(0,n.Wv)(Ee,{key:0},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)($.value,e=>((0,n.uX)(),(0,n.Wv)(Re,{key:e._id,timestamp:ce(e.ngay_thuc_hien),placement:"top"},{default:(0,n.k6)(()=>[(0,n.bF)(xe,{shadow:"hover",class:"log-card"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",W,[(0,n.bF)(ke,{type:"NhanVien"===e.loai?"danger":"warning",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)("NhanVien"===e.loai?"Nhân viên":"Ứng viên"),1)]),_:2},1032,["type"]),(0,n.Lk)("strong",T,(0,n.v_)(e.ten_doi_tuong),1)]),(0,n.Lk)("div",V,[(0,n.Lk)("div",X,[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.User))]),_:1}),(0,n.Lk)("span",null,[l[32]||(l[32]=(0,n.eW)(" Người thực hiện: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)("object"===typeof e.nguoi_thuc_hien_id?e.nguoi_thuc_hien_id.email:"N/A"),1)])]),(0,n.Lk)("div",I,[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.DocumentCopy))]),_:1}),(0,n.Lk)("span",null,[l[33]||(l[33]=(0,n.eW)("Lý do: ",-1)),(0,n.Lk)("em",null,(0,n.v_)(e.ly_do),1)])]),e.du_lieu_lien_quan?.deleted_records?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Delete))]),_:1}),(0,n.Lk)("span",null,[l[34]||(l[34]=(0,n.eW)(" Dữ liệu đã xóa: ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.du_lieu_lien_quan.deleted_records,(e,t)=>((0,n.uX)(),(0,n.Wv)(ke,{key:t,size:"small",type:"info",class:"data-tag"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(de(t))+": "+(0,n.v_)(e),1)]),_:2},1024))),128))])])):(0,n.Q3)("",!0),e.du_lieu_lien_quan?.ma_nhan_vien?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Tickets))]),_:1}),(0,n.Lk)("span",null,[l[35]||(l[35]=(0,n.eW)("Mã NV: ",-1)),(0,n.Lk)("strong",null,(0,n.v_)(e.du_lieu_lien_quan.ma_nhan_vien),1)])])):(0,n.Q3)("",!0),e.du_lieu_lien_quan?.email?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.bF)(ve,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Message))]),_:1}),(0,n.Lk)("span",null,"Email: "+(0,n.v_)(e.du_lieu_lien_quan.email),1)])):(0,n.Q3)("",!0)])]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):((0,n.uX)(),(0,n.Wv)(We,{key:1,description:"Chưa có lịch sử purge nào"}))])),[[je,M.value]]),G.value.total>0?((0,n.uX)(),(0,n.CE)("div",z,[(0,n.bF)(Te,{"current-page":G.value.currentPage,"onUpdate:currentPage":l[5]||(l[5]=e=>G.value.currentPage=e),"page-size":G.value.limit,"onUpdate:pageSize":l[6]||(l[6]=e=>G.value.limit=e),"page-sizes":[10,20,50],total:G.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:re,onCurrentChange:ue},null,8,["current-page","page-size","total"])])):(0,n.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(He,{modelValue:J.value.visible,"onUpdate:modelValue":l[11]||(l[11]=e=>J.value.visible=e),title:J.value.title,width:"600px","close-on-click-modal":!1},{footer:(0,n.k6)(()=>[(0,n.bF)(s,{onClick:l[10]||(l[10]=e=>J.value.visible=!1)},{default:(0,n.k6)(()=>[...l[45]||(l[45]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(s,{type:"danger",disabled:!J.value.confirmed||!J.value.reason||""===J.value.reason.trim(),loading:J.value.loading,onClick:oe},{default:(0,n.k6)(()=>[...l[46]||(l[46]=[(0,n.eW)(" Xác nhận xóa vĩnh viễn ",-1)])]),_:1},8,["disabled","loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(he,{type:"error",closable:!1,"show-icon":"",class:"dialog-warning"},{title:(0,n.k6)(()=>[...l[36]||(l[36]=[(0,n.Lk)("strong",null,"CẢNH BÁO NGHIÊM TRỌNG",-1)])]),default:(0,n.k6)(()=>[l[37]||(l[37]=(0,n.Lk)("div",null," Bạn sắp xóa vĩnh viễn dữ liệu. Hành động này KHÔNG THỂ HOÀN TÁC! ",-1))]),_:1}),(0,n.Lk)("div",N,[l[42]||(l[42]=(0,n.Lk)("h3",null,"Thông tin đối tượng:",-1)),(0,n.Lk)("div",U,[l[38]||(l[38]=(0,n.Lk)("strong",null,"Tên:",-1)),(0,n.eW)(" "+(0,n.v_)(J.value.objectName),1)]),J.value.objectCode?((0,n.uX)(),(0,n.CE)("div",B,[l[39]||(l[39]=(0,n.Lk)("strong",null,"Mã NV:",-1)),(0,n.eW)(" "+(0,n.v_)(J.value.objectCode),1)])):(0,n.Q3)("",!0),J.value.objectEmail?((0,n.uX)(),(0,n.CE)("div",P,[l[40]||(l[40]=(0,n.Lk)("strong",null,"Email:",-1)),(0,n.eW)(" "+(0,n.v_)(J.value.objectEmail),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",S,[l[41]||(l[41]=(0,n.Lk)("strong",null,"Tổng dữ liệu liên quan:",-1)),(0,n.bF)(ke,{type:"danger",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(J.value.totalRecords)+" bản ghi ",1)]),_:1})])]),(0,n.Lk)("div",K,[l[43]||(l[43]=(0,n.Lk)("h3",null,"Chi tiết dữ liệu sẽ bị xóa:",-1)),(0,n.bF)(Ie,{column:2,border:"",size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(J.value.dataBreakdown,(e,t)=>((0,n.uX)(),(0,n.Wv)(Xe,{key:t,label:de(t)},{default:(0,n.k6)(()=>[(0,n.bF)(ke,{type:"info",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e)+" bản ghi",1)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),(0,n.bF)(pe,{model:J.value,class:"purge-form"},{default:(0,n.k6)(()=>[(0,n.bF)(ge,null,{default:(0,n.k6)(()=>[(0,n.bF)(qe,{modelValue:J.value.confirmed,"onUpdate:modelValue":l[8]||(l[8]=e=>J.value.confirmed=e)},{default:(0,n.k6)(()=>[...l[44]||(l[44]=[(0,n.Lk)("strong",null,"Tôi hiểu rằng hành động này không thể hoàn tác",-1)])]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(ge,{label:"Lý do xóa",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(_e,{modelValue:J.value.reason,"onUpdate:modelValue":l[9]||(l[9]=e=>J.value.reason=e),type:"textarea",rows:3,placeholder:"Vui lòng nhập lý do xóa vĩnh viễn dữ liệu này (bắt buộc)",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),D=a(6262);const Q=(0,D.A)(A,[["__scopeId","data-v-79f1b98e"]]);var Y=Q},7588:function(e,t,a){var n=a(6518),l=a(9565),i=a(2652),o=a(9306),r=a(8551),u=a(1767),s=a(9539),d=a(4549),c=d("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{forEach:function(e){r(this);try{o(e)}catch(n){s(this,"throw",n)}if(c)return l(c,this,e);var t=u(this),a=0;i(t,function(t){e(t,a++)},{IS_RECORD:!0})}})},9462:function(e,t,a){var n=a(9565),l=a(2360),i=a(6699),o=a(6279),r=a(8227),u=a(1181),s=a(5966),d=a(7657).IteratorPrototype,c=a(2529),h=a(9539),v=a(1385),_=r("toStringTag"),g="IteratorHelper",p="WrapForValidIterator",m="normal",k="throw",b=u.set,f=function(e){var t=u.getterFor(e?p:g);return o(l(d),{next:function(){var a=t(this);if(e)return a.nextHandler();if(a.done)return c(void 0,!0);try{var n=a.nextHandler();return a.returnHandlerResult?n:c(n,a.done)}catch(l){throw a.done=!0,l}},return:function(){var a=t(this),l=a.iterator;if(a.done=!0,e){var i=s(l,"return");return i?n(i,l):c(void 0,!0)}if(a.inner)try{h(a.inner.iterator,m)}catch(o){return h(l,k,o)}if(a.openIters)try{v(a.openIters,m)}catch(o){return h(l,k,o)}return l&&h(l,m),c(void 0,!0)}})},y=f(!0),w=f(!1);i(w,_,"Iterator Helper"),e.exports=function(e,t,a){var n=function(n,l){l?(l.iterator=n.iterator,l.next=n.next):l=n,l.type=t?p:g,l.returnHandlerResult=!!a,l.nextHandler=e,l.counter=0,l.done=!1,b(this,l)};return n.prototype=t?y:w,n}}}]);
//# sourceMappingURL=7264.2a120e7d.js.map