{"version":3,"file":"js/5009.dd4adb23.js","mappings":"oHAAA,SAASA,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqBC,QAAUD,EAAEG,cAAgBF,QAAUD,IAAMC,OAAOG,UAAY,gBAAkBJ,CACpH,EAAGD,EAAQC,EACb,CCPA,SAASK,EAAYC,EAAGC,GACtB,GAAI,UAAYR,EAAQO,KAAOA,EAAG,OAAOA,EACzC,IAAIE,EAAIF,EAAEL,OAAOI,aACjB,QAAI,IAAWG,EAAG,CAChB,IAAIC,EAAID,EAAEE,KAAKJ,EAAGC,GAAK,WACvB,GAAI,UAAYR,EAAQU,GAAI,OAAOA,EACnC,MAAM,IAAIE,UAAU,+CACtB,CACA,OAAQ,WAAaJ,EAAIK,OAASC,QAAQP,EAC5C,CCRA,SAASQ,EAAcR,GACrB,IAAIG,EAAIJ,EAAYC,EAAG,UACvB,MAAO,UAAYP,EAAQU,GAAKA,EAAIA,EAAI,EAC1C,CCJA,SAASM,EAAgBP,EAAGD,EAAGD,GAC7B,OAAQC,EAAIO,EAAcP,MAAOC,EAAIQ,OAAOC,eAAeT,EAAGD,EAAG,CAC/DW,MAAOZ,EACPa,YAAY,EACZC,cAAc,EACdC,UAAU,IACPb,EAAED,GAAKD,EAAGE,CACjB,C,8ECLA,MAAMc,EACHC,QAAgBC,WAAWC,SAC5B,GAAIF,OAAeC,UAAUC,cACzBC,EACJJ,GAAeK,gCAEjBC,QAAQC,IAAI,gBAAiBH,GAE7B,MAAMI,EAGJ3B,WAAAA,IAAAY,EAAAA,EAAAA,GAAA,6BACEgB,KAAKC,cAAgBC,EAAAA,EAAMC,OAAO,CAChCC,QAAST,EACTU,QAAS,CACP,eAAgB,sBAKpBL,KAAKC,cAAcK,aAAaC,QAAQC,IACrCC,IACC,MAAMC,EAAQC,aAAaC,QAAQ,SAInC,OAHIF,IACFD,EAAOJ,QAAQQ,cAAgB,UAAUH,KAEpCD,GAERK,GACQC,QAAQC,OAAOF,IAK1Bd,KAAKC,cAAcK,aAAaW,SAAST,IACtCS,GAAaA,EACbH,IACgC,MAA3BA,EAAMG,UAAUC,SAElBP,aAAaQ,WAAW,SACxBR,aAAaQ,WAAW,QACxB3B,OAAO4B,SAASC,KAAO,UAElBN,QAAQC,OAAOF,IAG5B,CAEOQ,GAAAA,CACLC,EACAd,GAEA,OAAOT,KAAKC,cAAcqB,IAAOC,EAAKd,EACxC,CAEOe,IAAAA,CACLD,EACAE,EACAhB,GAEA,OAAOT,KAAKC,cAAcuB,KAAQD,EAAKE,EAAMhB,EAC/C,CAEOiB,GAAAA,CACLH,EACAE,EACAhB,GAEA,OAAOT,KAAKC,cAAcyB,IAAOH,EAAKE,EAAMhB,EAC9C,CAEOkB,OACLJ,EACAd,GAEA,OAAOT,KAAKC,cAAc0B,OAAUJ,EAAKd,EAC3C,CAEOmB,KAAAA,CACLL,EACAE,EACAhB,GAEA,OAAOT,KAAKC,cAAc2B,MAASL,EAAKE,EAAMhB,EAChD,EAGF,QAAmBV,C,gKCvFnB,MAAM8B,EAAa,CAAEC,MAAO,kBACtBC,EAAa,CAAED,MAAO,eACtBE,EAAa,CAAEF,MAAO,gBACtBG,EAAa,CAAEH,MAAO,0BACtBI,EAAa,CAAEJ,MAAO,gBACtBK,EAAa,CAAEL,MAAO,iBACtBM,EAAa,CAAEN,MAAO,cACtBO,EAAa,CAAEP,MAAO,aACtBQ,EAAa,CAAER,MAAO,oBAmB5B,OAA4BS,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,iBACRC,KAAAA,CAAMC,GCmNR,MAAMC,GAAYC,EAAAA,EAAAA,IAAwB,IACpCC,GAAkBD,EAAAA,EAAAA,IAAgB,IAClCE,GAAcF,EAAAA,EAAAA,IAAgB,IAC9BG,GAAaH,EAAAA,EAAAA,IAA6B,IAC1CI,GAAUJ,EAAAA,EAAAA,KAAI,GACdK,GAAgBL,EAAAA,EAAAA,KAAI,GAEpBM,GAAaC,EAAAA,EAAAA,IAAS,CAC1BC,KAAM,EACNC,MAAO,GACPC,MAAO,IAGHC,GAAUJ,EAAAA,EAAAA,IAKb,CACDK,MAAO,CACLC,MAAQC,QAAQ,SAASC,OAAO,cAChCF,MAAQE,OAAO,eAEjBC,WAAY,GACZC,aAAc,GACdC,aAAc,KAGVC,EAAgB,CACpB,CAACC,MAAO,SAAU7E,MAAO,IACzB,CAAC6E,MAAO,WAAY7E,MAAO,UAC3B,CAAC6E,MAAO,SAAU7E,MAAO,QACzB,CAAC6E,MAAO,SAAU7E,MAAO,YACzB,CAAC6E,MAAO,kBAAmB7E,MAAO,aAClC,CAAC6E,MAAO,YAAa7E,MAAO,SAC5B,CAAC6E,MAAO,WAAY7E,MAAO,UAC3B,CAAC6E,MAAO,iBAAkB7E,MAAO,kBACjC,CAAC6E,MAAO,kBAAmB7E,MAAO,oBAG9B8E,EAAe/C,IACnB,MAAMgD,EAASH,EAAcI,KAAMC,GAASA,EAAKjF,QAAU+B,GAC3D,OAAOgD,GAAQF,OAAS9C,GAAU,OAG9BmD,EAAanD,IACjB,OAAQA,GACN,IAAK,SACH,MAAO,UACT,IAAK,QACH,MAAO,OACT,IAAK,OACL,IAAK,YACH,MAAO,UACT,IAAK,WACH,MAAO,UACT,IAAK,iBACL,IAAK,kBACL,IAAK,SACH,MAAO,SACT,QACE,MAAO,SAIPoD,GAAmBC,EAAAA,EAAAA,IAAS,IAAMxB,EAAW5D,MAAMqF,MAAM,EAAG,IAE5DC,GAAmBF,EAAAA,EAAAA,IAAS,KAChC,IAAK5B,EAAUxD,MAAMuF,OAAQ,MAAO,MACpC,MAAMC,EAAShC,EAAUxD,MAAM,GAAGyF,eAAiBjC,EAAUxD,MAAM,GAAG0F,KACtE,OAAOF,EAASlB,IAAMkB,GAAQhB,OAAO,oBAAsB,QAGvDmB,EAAc3F,GACbA,EACEsE,IAAMtE,GAAOwE,OAAO,cADR,KAIfoB,EAAc5F,GACbA,EACEsE,IAAMtE,GAAOwE,OAAO,SADR,QAIfqB,EAAiB7F,GAChBA,EACDA,GAAS,GACJ,IAAIA,EAAQ,IAAI8F,QAAQ,SAE1B,GAAG9F,SAJS,SAOf+F,EAAe/F,GACdA,EACE,GAAGA,EAAM8F,QAAQ,MADL,KAIfE,EAAcA,KAClB,MAAOC,EAAMC,GAAM9B,EAAQC,OAAS,GACpC,MAAO,CACLJ,KAAMF,EAAWE,KACjBC,MAAOH,EAAWG,MAClB+B,OACAC,KACAzB,WAAYL,EAAQK,iBAAc0B,EAClCzB,aAAcN,EAAQM,mBAAgByB,EACtCxB,aAAcP,EAAQO,mBAAgBwB,IAIpCC,EAAgBC,UACpBxC,EAAQ7D,OAAQ,EAChB,IACE,MAAM8B,QAAiBwE,EAAAA,EAAgBC,kBAAkBP,KACzDxC,EAAUxD,MAAQ8B,EAASQ,MAAQ,GACnCyB,EAAWI,MAAQrC,EAASiC,WAAWI,K,CACvC,MAAOqC,GACP9F,QAAQiB,MAAM,sBAAuB6E,GACrCC,EAAAA,GAAU9E,MAAM6E,EAAI1E,UAAUQ,MAAMoE,KAAO,oC,CAC3C,QACA7C,EAAQ7D,OAAQ,C,GAId2G,EAAiBN,UACrB,IACE,MAAOJ,EAAMC,GAAM9B,EAAQC,OAAS,GACpCT,EAAW5D,YAAcsG,EAAAA,EAAgBM,cAAc,CAACX,OAAMC,M,CAC9D,MAAOM,GACP9F,QAAQiB,MAAM,uBAAwB6E,E,GAIpCK,EAAgBR,UACpB,IACE,MAAMvE,QAAiBgF,EAAAA,EAAgBC,OAAO,CAAC7C,MAAO,IAAKD,KAAM,IACjEP,EAAgB1D,MAAQ8B,EAASQ,MAAQ,E,CACzC,MAAOkE,GACP9C,EAAgB1D,MAAQ,E,GAItBgH,EAAkBX,UACtB,IACE,MAAMvE,QAAiBmF,EAAAA,EAAgBF,OAAO,CAAC7C,MAAO,MACtDP,EAAY3D,MAAQ8B,EAASoF,OAASpF,EAASQ,MAAQ,E,CACvD,MACAqB,EAAY3D,MAAQ,E,GAIlBmH,EAAeA,KACnBpD,EAAWE,KAAO,EAClBmC,IACAO,KAGIS,EAAcA,KAClBhD,EAAQC,MAAQ,CACdC,MAAQC,QAAQ,SAASC,OAAO,cAChCF,MAAQE,OAAO,eAEjBJ,EAAQK,WAAa,GACrBL,EAAQM,aAAe,GACvBN,EAAQO,aAAe,GACvBwC,KAGIE,EAAoBpD,IACxBF,EAAWE,KAAOA,EAClBmC,KAGIkB,EAAgBA,KACpBlB,IACAO,KAGIY,EAAoBlB,UACxB,MAAOJ,EAAMC,GAAM9B,EAAQC,OAAS,GACpC,GAAK4B,EAAL,CAIA,UACQuB,EAAAA,EAAaC,QACjB,gFACA,WACA,CAACC,KAAM,W,CAET,MACA,M,CAEF5D,EAAc9D,OAAQ,EACtB,UACQsG,EAAAA,EAAgBqB,YAAY,CAChCC,UAAW3B,EACX4B,QAAS3B,EACT4B,cAAe1D,EAAQM,aAAe,CAACN,EAAQM,mBAAgByB,EAC/DxB,aAAcP,EAAQO,mBAAgBwB,IAExCM,EAAAA,GAAUsB,QAAQ,2BAClBT,G,CACA,MAAOd,GACP9F,QAAQiB,MAAM,0BAA2B6E,GACzCC,EAAAA,GAAU9E,MAAM6E,EAAI1E,UAAUQ,MAAMoE,KAAO,iC,CAC3C,QACA5C,EAAc9D,OAAQ,C,OA1BtByG,EAAAA,GAAUuB,QAAQ,sDD7KtB,OC2MAC,EAAAA,EAAAA,IAAU,KACRpB,IACAG,IACAM,MD9MK,CAACY,EAAUC,KAChB,MAAMC,GAAuBC,EAAAA,EAAAA,IAAkB,aACzCC,GAA4BD,EAAAA,EAAAA,IAAkB,kBAC9CE,GAA0BF,EAAAA,EAAAA,IAAkB,gBAC5CG,GAAoBH,EAAAA,EAAAA,IAAkB,UACtCI,GAAuBJ,EAAAA,EAAAA,IAAkB,aACzCK,GAAuBL,EAAAA,EAAAA,IAAkB,aACzCM,GAAoBN,EAAAA,EAAAA,IAAkB,UACtCO,GAAsBP,EAAAA,EAAAA,IAAkB,YACxCQ,GAAqBR,EAAAA,EAAAA,IAAkB,WACvCS,GAAqBT,EAAAA,EAAAA,IAAkB,WACvCU,GAAoBV,EAAAA,EAAAA,IAAkB,UACtCW,GAA6BX,EAAAA,EAAAA,IAAkB,mBAC/CY,GAAsBZ,EAAAA,EAAAA,IAAkB,YACxCa,GAA2Bb,EAAAA,EAAAA,IAAkB,iBAC7Cc,GAAqBC,EAAAA,EAAAA,IAAkB,WAE7C,OAAQC,EAAAA,EAAAA,OC1QRC,EAAAA,EAAAA,IA8NM,MA9NN5G,EA8NM,EA7NJ6G,EAAAA,EAAAA,IAmBM,MAnBN3G,EAmBM,CDwPJuF,EAAO,KAAOA,EAAO,IC1QrBoB,EAAAA,EAAAA,IAMM,aALJA,EAAAA,EAAAA,IAAkC,UAA9B,8BACJA,EAAAA,EAAAA,IAGI,SAHD,4GD2QD,KCtQJA,EAAAA,EAAAA,IAUM,MAVN1G,EAUM,EATJ2G,EAAAA,EAAAA,IAAqEpB,EAAA,CAAzDqB,MAAMC,EAAAA,EAAAA,IAAAC,EAAAA,SAAUC,QAAOtC,GD0QhC,CACDuC,SAASC,EAAAA,EAAAA,IC3QuC,IAAO,IAAA3B,EAAA,KAAAA,EAAA,KD4QrD4B,EAAAA,EAAAA,IC5Q8C,WAAO,OD8QvDC,EAAG,GACF,EAAG,CAAC,UC9QPR,EAAAA,EAAAA,IAOYpB,EAAA,CANVV,KAAK,UACJ7D,QAASC,EAAA9D,MACTyJ,MAAMC,EAAAA,EAAAA,IAAAO,EAAAA,cACNL,QAAOrC,GDgRP,CACDsC,SAASC,EAAAA,EAAAA,IChRV,IAED,IAAA3B,EAAA,KAAAA,EAAA,KD+QI4B,EAAAA,EAAAA,ICjRH,cAED,ODiREC,EAAG,GACF,EAAG,CAAC,UAAW,cC9QtBR,EAAAA,EAAAA,IAqFUV,EAAA,CArFDoB,OAAO,SAAO,CDkRrBL,SAASC,EAAAA,EAAAA,ICjRT,IAmFU,EAnFVN,EAAAA,EAAAA,IAmFUX,EAAA,CAlFPsB,MAAO/F,EACR,cAAY,QACZ,iBAAe,OACfzB,MAAM,eDmRH,CACDkH,SAASC,EAAAA,EAAAA,IClRX,IAgDS,EAhDTN,EAAAA,EAAAA,IAgDSb,EAAA,CAhDAyB,OAAQ,IAAE,CDoRbP,SAASC,EAAAA,EAAAA,ICnRb,IAaS,EAbTN,EAAAA,EAAAA,IAaShB,EAAA,CAbA6B,GAAI,GAAKC,GAAI,IDuRb,CACDT,SAASC,EAAAA,EAAAA,ICvRf,IAWe,EAXfN,EAAAA,EAAAA,IAWejB,EAAA,CAXD1D,MAAM,oBAAkB,CDyR5BgF,SAASC,EAAAA,EAAAA,ICxRjB,IASE,EATFN,EAAAA,EAAAA,IASElB,EAAA,CDiRUiC,WCzRDnG,EAAQC,MD0RP,sBAAuB8D,EAAO,KAAOA,EAAO,GAAMqC,GC1RnDpG,EAAQC,MAAKmG,GACtB9C,KAAK,YACL,mBACA,oBAAkB,UAClB,kBAAgB,WAChB,eAAa,aACblD,OAAO,aACPiG,MAAA,gBD2RW,KAAM,EAAG,CAAC,iBAEfT,EAAG,MAGPA,EAAG,KC5RXR,EAAAA,EAAAA,IAgBShB,EAAA,CAhBA6B,GAAI,EAAIC,GAAI,IDiSZ,CACDT,SAASC,EAAAA,EAAAA,ICjSf,IAce,EAdfN,EAAAA,EAAAA,IAcejB,EAAA,CAdD1D,MAAM,aAAW,CDmSrBgF,SAASC,EAAAA,EAAAA,IClSjB,IAYY,EAZZN,EAAAA,EAAAA,IAYYd,EAAA,CDwRA6B,WCnSDnG,EAAQM,aDoSP,sBAAuByD,EAAO,KAAOA,EAAO,GAAMqC,GCpSnDpG,EAAQM,aAAY8F,GAC7BE,WAAA,GACAC,UAAA,GACAC,YAAY,kBDqSD,CACDf,SAASC,EAAAA,EAAAA,ICnSjB,IAA6B,GDoSlBT,EAAAA,EAAAA,KAAW,ICrSxBC,EAAAA,EAAAA,IAKEuB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJapH,EAAA1D,MAAN+K,KDqSa1B,EAAAA,EAAAA,OCtStB2B,EAAAA,EAAAA,IAKEvC,EAAA,CAHCwC,IAAKF,EAAGG,IACRrG,MAAK,GAAKkG,EAAGI,kBAAkBJ,EAAGK,QAAU,MAAML,EAAGM,KAAO,KAC5DrL,MAAO+K,EAAGG,KDsSI,KAAM,EAAG,CAAC,QAAS,YACpB,QAENlB,EAAG,GACF,EAAG,CAAC,iBAETA,EAAG,MAGPA,EAAG,KC1SXR,EAAAA,EAAAA,IAeShB,EAAA,CAfA6B,GAAI,EAAIC,GAAI,ID+SZ,CACDT,SAASC,EAAAA,EAAAA,IC/Sf,IAae,EAbfN,EAAAA,EAAAA,IAaejB,EAAA,CAbD1D,MAAM,aAAW,CDiTrBgF,SAASC,EAAAA,EAAAA,IChTjB,IAWY,EAXZN,EAAAA,EAAAA,IAWYd,EAAA,CDuSA6B,WCjTDnG,EAAQO,aDkTP,sBAAuBwD,EAAO,KAAOA,EAAO,GAAMqC,GClTnDpG,EAAQO,aAAY6F,GAC7BG,UAAA,GACAC,YAAY,UDmTD,CACDf,SAASC,EAAAA,EAAAA,ICjTjB,IAA2B,GDkThBT,EAAAA,EAAAA,KAAW,ICnTxBC,EAAAA,EAAAA,IAKEuB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJenH,EAAA3D,MAARsL,KDmTajC,EAAAA,EAAAA,OCpTtB2B,EAAAA,EAAAA,IAKEvC,EAAA,CAHCwC,IAAKK,EAAKJ,IACVrG,MAAOyG,EAAKD,IACZrL,MAAOsL,EAAKJ,KDoTE,KAAM,EAAG,CAAC,QAAS,YACpB,QAENlB,EAAG,GACF,EAAG,CAAC,iBAETA,EAAG,MAGPA,EAAG,MAGPA,EAAG,KC1TTR,EAAAA,EAAAA,IA2BSb,EAAA,CA3BAyB,OAAQ,IAAE,CD6TbP,SAASC,EAAAA,EAAAA,IC5Tb,IAeS,EAfTN,EAAAA,EAAAA,IAeShB,EAAA,CAfA6B,GAAI,EAAIC,GAAI,IDgUZ,CACDT,SAASC,EAAAA,EAAAA,IChUf,IAae,EAbfN,EAAAA,EAAAA,IAaejB,EAAA,CAbD1D,MAAM,cAAY,CDkUtBgF,SAASC,EAAAA,EAAAA,ICjUjB,IAWY,EAXZN,EAAAA,EAAAA,IAWYd,EAAA,CDwTA6B,WClUDnG,EAAQK,WDmUP,sBAAuB0D,EAAO,KAAOA,EAAO,GAAMqC,GCnUnDpG,EAAQK,WAAU+F,GAC3BI,YAAY,SACZD,UAAA,IDoUW,CACDd,SAASC,EAAAA,EAAAA,IClUjB,IAA6B,GDmUlBT,EAAAA,EAAAA,OCpUbC,EAAAA,EAAAA,IAKEuB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJelG,EAARK,IADTuE,EAAAA,EAAAA,IAKEf,EAAA,CAHCwC,IAAKhG,EAAKjF,MACV6E,MAAOI,EAAKJ,MACZ7E,MAAOiF,EAAKjF,ODqUE,KAAM,EAAG,CAAC,QAAS,WACpB,OAENgK,EAAG,GACF,EAAG,CAAC,iBAETA,EAAG,MAGPA,EAAG,KCzUXR,EAAAA,EAAAA,IASShB,EAAA,CATA6B,GAAI,EAAIC,GAAI,ID8UZ,CACDT,SAASC,EAAAA,EAAAA,IC9Uf,IAOe,EAPfN,EAAAA,EAAAA,IAOejB,EAAA,CAPD1D,MAAM,KAAG,CDgVbgF,SAASC,EAAAA,EAAAA,IC/UjB,IAKW,EALXN,EAAAA,EAAAA,IAKWZ,EAAA,MD4UCiB,SAASC,EAAAA,EAAAA,IChVnB,IAEY,EAFZN,EAAAA,EAAAA,IAEYpB,EAAA,CAFDV,KAAK,UAAW+B,MAAMC,EAAAA,EAAAA,IAAA6B,EAAAA,QAAS3B,QAAOzC,GDqVlC,CACD0C,SAASC,EAAAA,EAAAA,ICtVwC,IAE/D,IAAA3B,EAAA,KAAAA,EAAA,KDqVgB4B,EAAAA,EAAAA,ICvV+C,SAE/D,ODuVcC,EAAG,GACF,EAAG,CAAC,UCvVnBR,EAAAA,EAAAA,IAAmDpB,EAAA,CAAvCwB,QAAOxC,GAAW,CDyVhByC,SAASC,EAAAA,EAAAA,ICzVS,IAAO,IAAA3B,EAAA,KAAAA,EAAA,KD0VvB4B,EAAAA,EAAAA,IC1VgB,WAAO,OD4VzBC,EAAG,MAGPA,EAAG,MAGPA,EAAG,MAGPA,EAAG,MAGPA,EAAG,MAGPA,EAAG,GACF,EAAG,CAAC,YAETA,EAAG,KCtWLR,EAAAA,EAAAA,IAkBSb,EAAA,CAlBAyB,OAAQ,GAAIzH,MAAM,mBD2WxB,CACDkH,SAASC,EAAAA,EAAAA,IC1WP,IAAgC,GD2W/BT,EAAAA,EAAAA,KAAW,IC5WdC,EAAAA,EAAAA,IAgBSuB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAfQ3F,EAAAnF,MAARiF,KD4WGoE,EAAAA,EAAAA,OC7WZ2B,EAAAA,EAAAA,IAgBSxC,EAAA,CAdNyC,IAAKhG,EAAKlD,OACVuI,GAAI,GACJkB,GAAI,GACJnB,GAAI,GD6WA,CACDR,SAASC,EAAAA,EAAAA,IC5Wb,IAQU,EARVN,EAAAA,EAAAA,IAQUV,EAAA,CARDnG,MAAM,iBAAiBuH,OAAO,SDgX9B,CACDL,SAASC,EAAAA,EAAAA,IChXf,IAKM,EALNP,EAAAA,EAAAA,IAKM,MALNzG,EAKM,EAJJyG,EAAAA,EAAAA,IAA2C,aAAAkC,EAAAA,EAAAA,IAAlC3G,EAAYG,EAAKlD,SAAM,IAChCyH,EAAAA,EAAAA,IAEST,EAAA,CAFArB,KAAMxC,EAAUD,EAAKlD,QAAS2J,OAAO,QDoXnC,CACD7B,SAASC,EAAAA,EAAAA,ICpXjB,IAA+D,EDqXrDC,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,KCrXtBxG,EAAK0G,OAAS5H,EAAWI,OAAS,GAAJ,KAAe2B,QAAQ,IAAK,KACjE,KDsXUkE,EAAG,GACF,KAAM,CAAC,YCrXpBT,EAAAA,EAAAA,IAA+B,UAAAkC,EAAAA,EAAAA,IAAzBxG,EAAK0G,OAAQ,WAAQ,KDyXrB3B,EAAG,GACF,QAELA,EAAG,GACF,QACD,QAENA,EAAG,KC3XLR,EAAAA,EAAAA,IA4FUV,EAAA,CA5FDoB,OAAO,SAAO,CD8XrBL,SAASC,EAAAA,EAAAA,IC7XT,IAQM,EARNP,EAAAA,EAAAA,IAQM,MARNxG,EAQM,EAPJwG,EAAAA,EAAAA,IAMM,YDyXFpB,EAAO,KAAOA,EAAO,IC9XvBoB,EAAAA,EAAAA,IAA4B,UAAxB,uBAAmB,KACvBA,EAAAA,EAAAA,IAGI,UAAAkC,EAAAA,EAAAA,IAFC1H,EAAWI,OAAQ,+BACtBsH,EAAAA,EAAAA,IAAGnG,EAAAtF,OAAgB,QD+XvB4L,EAAAA,EAAAA,MAAiBvC,EAAAA,EAAAA,OC1XnB2B,EAAAA,EAAAA,IAqEW/B,EAAA,CApER3G,KAAMkB,EAAAxD,MAEN,aAAY6D,EAAA7D,MAAU,cAAgB,oBD0XpC,CACD6J,SAASC,EAAAA,EAAAA,ICzXX,IAIkB,EAJlBN,EAAAA,EAAAA,IAIkBR,EAAA,CAJDnE,MAAM,OAAOgH,MAAM,OD6X7B,CC5XMhC,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,ED8XlB/B,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,IC7XlB9F,EAAWmG,EAAIpG,OAAI,KD+XpBsE,EAAG,KC5XTR,EAAAA,EAAAA,IAqBkBR,EAAA,CArBDnE,MAAM,YAAY,YAAU,ODiYtC,CChYMgF,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EACtBvC,EAAAA,EAAAA,IAiBM,MAjBNvG,EAiBM,EAhBJuG,EAAAA,EAAAA,IAQS,eAAAkC,EAAAA,EAAAA,IANuB,kBAArBK,EAAIpH,aDgYP,GChY0DoH,EAAIpH,cAAc0G,QAAM,MAAmCU,EAAIpH,cAAc2G,KAAG,KAAsDS,EAAIpH,cAAY,IAOxN6E,EAAAA,EAAAA,IAMO,aAAAkC,EAAAA,EAAAA,IAJyB,kBAArBK,EAAIpH,aAAgDoH,EAAIpH,cAAcyG,aD6XzE,IAAK,OAGbnB,EAAG,KCxXTR,EAAAA,EAAAA,IAUkBR,EAAA,CAVDnE,MAAM,KAAK,YAAU,OD6X/B,CC5XMgF,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EACtBvC,EAAAA,EAAAA,IAMM,MANNtG,EAMM,EDwXA8G,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,IC7XlBK,EAAIC,gBAAgBC,QAAU,OAAQ,IACzC,IAAAzC,EAAAA,EAAAA,IAGQ,cAAAkC,EAAAA,EAAAA,IAFHK,EAAIC,gBAAgBE,aAAe,SAAU,OAChDR,EAAAA,EAAAA,IAAGK,EAAIC,gBAAgBG,cAAgB,SAAJ,OD8XrClC,EAAG,KCzXTR,EAAAA,EAAAA,IAOkBR,EAAA,CAPDnE,MAAM,eAAe,YAAU,OD8XzC,CC7XMgF,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EACtBvC,EAAAA,EAAAA,IAGM,MAHNrG,EAGM,EAFJqG,EAAAA,EAAAA,IAA2C,aAAAkC,EAAAA,EAAAA,IAAlC7F,EAAWkG,EAAIK,WAAQ,IAChC5C,EAAAA,EAAAA,IAA4C,aAAAkC,EAAAA,EAAAA,IAAnC7F,EAAWkG,EAAIM,YAAS,ODiYjCpC,EAAG,KC7XTR,EAAAA,EAAAA,IAIkBR,EAAA,CAJDnE,MAAM,WAAWgH,MAAM,MAAMQ,KAAK,gBDmY5C,CClYMxC,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EDoYlB/B,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,ICnYlB5F,EAAciG,EAAIQ,eAAY,KDqY/BtC,EAAG,KClYTR,EAAAA,EAAAA,IAIkBR,EAAA,CAJDnE,MAAM,KAAKgH,MAAM,KAAKQ,KAAK,YDwYrC,CCvYMxC,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EDyYlB/B,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,ICxYlB1F,EAAY+F,EAAIS,WAAQ,KD0YzBvC,EAAG,KCvYTR,EAAAA,EAAAA,IAMkBR,EAAA,CANDnE,MAAM,aAAagH,MAAM,OD4YnC,CC3YMhC,SAAOC,EAAAA,EAAAA,IAChB,EADmBgC,SAAG,EACtBtC,EAAAA,EAAAA,IAEST,EAAA,CAFArB,KAAMxC,EAAU4G,EAAI/J,SD8YtB,CACD8H,SAASC,EAAAA,EAAAA,IC9Yb,IAA6B,ED+YvBC,EAAAA,EAAAA,KAAiB0B,EAAAA,EAAAA,IC/YpB3G,EAAYgH,EAAI/J,SAAM,KDiZrBiI,EAAG,GACF,KAAM,CAAC,WAEZA,EAAG,KChZTR,EAAAA,EAAAA,IAAgER,EAAA,CAA/CqD,KAAK,QAAQxH,MAAM,UAAU,YAAU,UDwZtDmF,EAAG,GACF,EAAG,CAAC,OAAQ,gBAAiB,CAC9B,CAACb,EC5dQtF,EAAA7D,UAqEbuJ,EAAAA,EAAAA,IASM,MATNpG,EASM,EARJqG,EAAAA,EAAAA,IAOEN,EAAA,CANAsD,WAAA,GACAC,OAAO,2BACNtI,MAAOJ,EAAWI,MAClB,eAAcJ,EAAWE,KACzB,YAAWF,EAAWG,MACtBwI,gBAAgBrF,GD0Zd,KAAM,EAAG,CAAC,QAAS,eAAgB,kBAG1C2C,EAAG,MAIT,I,UEtnBA,MAAM2C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,+CCLA,MAAMC,EAAe3N,WAAAA,IAAAY,EAAAA,EAAAA,GAAA,gBACS,YAAW,CAEvC,YAAMkH,CACJ8F,GAEA,MAAM/K,QAAiBgL,EAAAA,EAAI3K,IAAiCtB,KAAKkM,SAAU,CACzEF,WAEF,OAAO/K,EAASQ,IAClB,CAEA,aAAM0K,CAAQC,GACZ,MAAMnL,QAAiBgL,EAAAA,EAAI3K,IAAc,GAAGtB,KAAKkM,YAAYE,KAC7D,OAAOnL,EAASQ,IAClB,CAEA,YAAMtB,CAAOsB,GACX,MAAMR,QAAiBgL,EAAAA,EAAIzK,KAAexB,KAAKkM,SAAUzK,GACzD,OAAOR,EAASQ,IAClB,CAEA,YAAM4K,CAAOD,EAAY3K,GACvB,MAAMR,QAAiBgL,EAAAA,EAAIvK,IAAc,GAAG1B,KAAKkM,YAAYE,IAAM3K,GACnE,OAAOR,EAASQ,IAClB,CAEA,YAAME,CAAOyK,SACLH,EAAAA,EAAItK,OAAO,GAAG3B,KAAKkM,YAAYE,IACvC,EAGF,QAAmBL,C,qBC/BnBO,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOnC,EAAKuC,KAAQH,EACrBC,EAAOrC,GAAOuC,EAElB,OAAOF,E,+CCNX,MAAMG,EAAexO,WAAAA,IAAAY,EAAAA,EAAAA,GAAA,gBACS,YAAW,CAEvC,YAAMkH,CACJ8F,GAEA,MAAM/K,QAAiBgL,EAAAA,EAAI3K,IAAiCtB,KAAKkM,SAAU,CACzEF,WAEF,OAAO/K,EAASQ,IAClB,CAEA,aAAM0K,CAAQC,GACZ,MAAMnL,QAAiBgL,EAAAA,EAAI3K,IAAc,GAAGtB,KAAKkM,YAAYE,KAC7D,OAAOnL,EAASQ,IAClB,CAEA,YAAMtB,CAAOsB,GACX,MAAMR,QAAiBgL,EAAAA,EAAIzK,KAAexB,KAAKkM,SAAUzK,GACzD,OAAOR,EAASQ,IAClB,CAEA,YAAM4K,CAAOD,EAAY3K,GACvB,MAAMR,QAAiBgL,EAAAA,EAAIvK,IAAc,GAAG1B,KAAKkM,YAAYE,IAAM3K,GACnE,OAAOR,EAASQ,IAClB,CAEA,YAAME,CAAOyK,SACLH,EAAAA,EAAItK,OAAO,GAAG3B,KAAKkM,YAAYE,IACvC,EAGF,QAAmBQ,C,+CCXnB,MAAMC,EAAezO,WAAAA,IAAAY,EAAAA,EAAAA,GAAA,gBACS,cAAa,CAEzC,uBAAM0G,CACJsG,GAEA,MAAM/K,QAAiBgL,EAAAA,EAAI3K,IACzB,GAAGtB,KAAKkM,iBACR,CAACF,WAEH,OAAO/K,EAASQ,IAClB,CAEA,oBAAMqL,CACJd,GAEA,MAAM/K,QAAiBgL,EAAAA,EAAI3K,IACzB,GAAGtB,KAAKkM,cACR,CAACF,WAEH,OAAO/K,EAASQ,IAClB,CAEA,iBAAMqF,CAAYiG,SACVd,EAAAA,EAAIzK,KAAK,GAAGxB,KAAKkM,uBAAwBa,EACjD,CAEA,mBAAMhH,CAAciG,GAIlB,MAAM/K,QAAiBgL,EAAAA,EAAI3K,IACzB,GAAGtB,KAAKkM,sBACR,CAACF,WAEH,OAAO/K,EAASQ,KAAKA,MAAQ,EAC/B,EAGF,QAAmBoL,C","sources":["webpack://HungHutech/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://HungHutech/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://HungHutech/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://HungHutech/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://HungHutech/./src/services/api.ts","webpack://HungHutech/./src/pages/TimeRuleEngine.vue?2645","webpack://HungHutech/./src/pages/TimeRuleEngine.vue","webpack://HungHutech/./src/pages/TimeRuleEngine.vue?d925","webpack://HungHutech/./src/services/phongBanService.ts","webpack://HungHutech/./node_modules/vue-loader/dist/exportHelper.js","webpack://HungHutech/./src/services/nhanVienService.ts","webpack://HungHutech/./src/services/timeRuleService.ts"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import axios, {AxiosInstance, AxiosRequestConfig, AxiosResponse} from 'axios';\n\n// Base URL config via server-injected window.appGlobal or env\nconst runtimeBase =\n  (window as any)?.appGlobal?.baseUrl &&\n  `${(window as any).appGlobal.baseUrl}/api`;\nconst API_BASE_URL =\n  runtimeBase || process.env.VUE_APP_API_BASE_URL || 'http://localhost:5000/api';\n\nconsole.log('API Base URL:', API_BASE_URL);\n\nclass ApiService {\n  private axiosInstance: AxiosInstance;\n\n  constructor() {\n    this.axiosInstance = axios.create({\n      baseURL: API_BASE_URL,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor - Add token to requests\n    this.axiosInstance.interceptors.request.use(\n      (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      },\n    );\n\n    // Response interceptor - Handle errors\n    this.axiosInstance.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (error.response?.status === 401) {\n          // Token expired or invalid\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          window.location.href = '/login';\n        }\n        return Promise.reject(error);\n      },\n    );\n  }\n\n  public get<T = any>(\n    url: string,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.get<T>(url, config);\n  }\n\n  public post<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.post<T>(url, data, config);\n  }\n\n  public put<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.put<T>(url, data, config);\n  }\n\n  public delete<T = any>(\n    url: string,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.delete<T>(url, config);\n  }\n\n  public patch<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.patch<T>(url, data, config);\n  }\n}\n\nexport default new ApiService();\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"time-rule-page\" }\nconst _hoisted_2 = { class: \"page-header\" }\nconst _hoisted_3 = { class: \"page-actions\" }\nconst _hoisted_4 = { class: \"violation-card__header\" }\nconst _hoisted_5 = { class: \"table-header\" }\nconst _hoisted_6 = { class: \"employee-cell\" }\nconst _hoisted_7 = { class: \"shift-cell\" }\nconst _hoisted_8 = { class: \"time-pair\" }\nconst _hoisted_9 = { class: \"table-pagination\" }\n\nimport {ref, reactive, computed, onMounted} from 'vue';\nimport dayjs from 'dayjs';\nimport {\n  ElMessage,\n  ElMessageBox,\n} from 'element-plus';\nimport {\n  Refresh,\n  DataAnalysis,\n  Search,\n} from '@element-plus/icons-vue';\nimport timeRuleService from '@/services/timeRuleService';\nimport nhanVienService from '@/services/nhanVienService';\nimport phongBanService from '@/services/phongBanService';\nimport {DailyTimeSummary, NhanVien, PhongBan, TimeRuleViolationStat} from '@/types';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeRuleEngine',\n  setup(__props) {\n\nconst summaries = ref<DailyTimeSummary[]>([]);\nconst employeeOptions = ref<NhanVien[]>([]);\nconst deptOptions = ref<PhongBan[]>([]);\nconst violations = ref<TimeRuleViolationStat[]>([]);\nconst loading = ref(false);\nconst recalculating = ref(false);\n\nconst pagination = reactive({\n  page: 1,\n  limit: 20,\n  total: 0,\n});\n\nconst filters = reactive<{\n  dates: [string, string];\n  trang_thai: string;\n  nhan_vien_id: string;\n  phong_ban_id: string;\n}>({\n  dates: [\n    dayjs().startOf('month').format('YYYY-MM-DD'),\n    dayjs().format('YYYY-MM-DD'),\n  ],\n  trang_thai: '',\n  nhan_vien_id: '',\n  phong_ban_id: '',\n});\n\nconst statusOptions = [\n  {label: 'Tất cả', value: ''},\n  {label: 'Đúng giờ', value: 'OnTime'},\n  {label: 'Đi trễ', value: 'Late'},\n  {label: 'Về sớm', value: 'EarlyOut'},\n  {label: 'Đi trễ & Về sớm', value: 'LateEarly'},\n  {label: 'Nghỉ phép', value: 'Leave'},\n  {label: 'Vắng mặt', value: 'Absent'},\n  {label: 'Thiếu check-in', value: 'MissingCheckin'},\n  {label: 'Thiếu check-out', value: 'MissingCheckout'},\n];\n\nconst statusLabel = (status?: DailyTimeSummary['status']) => {\n  const option = statusOptions.find((item) => item.value === status);\n  return option?.label || status || '---';\n};\n\nconst statusTag = (status?: DailyTimeSummary['status']) => {\n  switch (status) {\n    case 'OnTime':\n      return 'success';\n    case 'Leave':\n      return 'info';\n    case 'Late':\n    case 'LateEarly':\n      return 'warning';\n    case 'EarlyOut':\n      return 'warning';\n    case 'MissingCheckin':\n    case 'MissingCheckout':\n    case 'Absent':\n      return 'danger';\n    default:\n      return 'info';\n  }\n};\n\nconst violationDisplay = computed(() => violations.value.slice(0, 4));\n\nconst lastUpdatedLabel = computed(() => {\n  if (!summaries.value.length) return '---';\n  const latest = summaries.value[0].ngay_cap_nhat || summaries.value[0].ngay;\n  return latest ? dayjs(latest).format('DD/MM/YYYY HH:mm') : '---';\n});\n\nconst formatDate = (value?: string) => {\n  if (!value) return '--';\n  return dayjs(value).format('DD/MM/YYYY');\n};\n\nconst formatTime = (value?: string) => {\n  if (!value) return '--:--';\n  return dayjs(value).format('HH:mm');\n};\n\nconst formatMinutes = (value?: number) => {\n  if (!value) return '0 phút';\n  if (value >= 60) {\n    return `${(value / 60).toFixed(1)} giờ`;\n  }\n  return `${value} phút`;\n};\n\nconst formatHours = (value?: number) => {\n  if (!value) return '0h';\n  return `${value.toFixed(2)}h`;\n};\n\nconst buildParams = () => {\n  const [from, to] = filters.dates || [];\n  return {\n    page: pagination.page,\n    limit: pagination.limit,\n    from,\n    to,\n    trang_thai: filters.trang_thai || undefined,\n    nhan_vien_id: filters.nhan_vien_id || undefined,\n    phong_ban_id: filters.phong_ban_id || undefined,\n  };\n};\n\nconst loadSummaries = async () => {\n  loading.value = true;\n  try {\n    const response = await timeRuleService.getDailySummaries(buildParams());\n    summaries.value = response.data || [];\n    pagination.total = response.pagination.total;\n  } catch (err: any) {\n    console.error('loadSummaries error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải dữ liệu rule engine');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst loadViolations = async () => {\n  try {\n    const [from, to] = filters.dates || [];\n    violations.value = await timeRuleService.getViolations({from, to});\n  } catch (err) {\n    console.error('loadViolations error', err);\n  }\n};\n\nconst loadEmployees = async () => {\n  try {\n    const response = await nhanVienService.getAll({limit: 200, page: 1});\n    employeeOptions.value = response.data || [];\n  } catch (err) {\n    employeeOptions.value = [];\n  }\n};\n\nconst loadDepartments = async () => {\n  try {\n    const response = await phongBanService.getAll({limit: 200});\n    deptOptions.value = response.items || response.data || [];\n  } catch {\n    deptOptions.value = [];\n  }\n};\n\nconst handleSearch = () => {\n  pagination.page = 1;\n  loadSummaries();\n  loadViolations();\n};\n\nconst handleReset = () => {\n  filters.dates = [\n    dayjs().startOf('month').format('YYYY-MM-DD'),\n    dayjs().format('YYYY-MM-DD'),\n  ];\n  filters.trang_thai = '';\n  filters.nhan_vien_id = '';\n  filters.phong_ban_id = '';\n  handleSearch();\n};\n\nconst handlePageChange = (page: number) => {\n  pagination.page = page;\n  loadSummaries();\n};\n\nconst handleRefresh = () => {\n  loadSummaries();\n  loadViolations();\n};\n\nconst handleRecalculate = async () => {\n  const [from, to] = filters.dates || [];\n  if (!from) {\n    ElMessage.warning('Vui lòng chọn khoảng thời gian trước khi tính lại');\n    return;\n  }\n  try {\n    await ElMessageBox.confirm(\n      'Rule engine sẽ tái tính dữ liệu trong khoảng đã chọn. Bạn chắc chắn tiếp tục?',\n      'Xác nhận',\n      {type: 'warning'},\n    );\n  } catch {\n    return;\n  }\n  recalculating.value = true;\n  try {\n    await timeRuleService.recalculate({\n      from_date: from,\n      to_date: to,\n      nhan_vien_ids: filters.nhan_vien_id ? [filters.nhan_vien_id] : undefined,\n      phong_ban_id: filters.phong_ban_id || undefined,\n    });\n    ElMessage.success('Đã gửi yêu cầu tính lại');\n    handleRefresh();\n  } catch (err: any) {\n    console.error('handleRecalculate error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tính lại rule engine');\n  } finally {\n    recalculating.value = false;\n  }\n};\n\nonMounted(() => {\n  loadEmployees();\n  loadDepartments();\n  handleRefresh();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_pagination = _resolveComponent(\"el-pagination\")!\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[6] || (_cache[6] = _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h2\", null, \"Rule Engine Time/Leave/OT\"),\n        _createElementVNode(\"p\", null, \" Theo dõi trạng thái chấm công - nghỉ phép - tăng ca theo ca làm việc, tự động cảnh báo khi sai phạm. \")\n      ], -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_el_button, {\n          icon: _unref(Refresh),\n          onClick: handleRefresh\n        }, {\n          default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n            _createTextVNode(\"Tải lại\", -1)\n          ]))]),\n          _: 1\n        }, 8, [\"icon\"]),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          loading: recalculating.value,\n          icon: _unref(DataAnalysis),\n          onClick: handleRecalculate\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n            _createTextVNode(\" Tính lại \", -1)\n          ]))]),\n          _: 1\n        }, 8, [\"loading\", \"icon\"])\n      ])\n    ]),\n    _createVNode(_component_el_card, { shadow: \"never\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          model: filters,\n          \"label-width\": \"140px\",\n          \"label-position\": \"left\",\n          class: \"filter-form\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_row, { gutter: 20 }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_col, {\n                  md: 12,\n                  xs: 24\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \"Khoảng thời gian\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_date_picker, {\n                          modelValue: filters.dates,\n                          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((filters.dates) = $event)),\n                          type: \"daterange\",\n                          \"unlink-panels\": \"\",\n                          \"start-placeholder\": \"Từ ngày\",\n                          \"end-placeholder\": \"Đến ngày\",\n                          \"value-format\": \"YYYY-MM-DD\",\n                          format: \"DD/MM/YYYY\",\n                          style: {\"width\":\"100%\"}\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_el_col, {\n                  md: 6,\n                  xs: 24\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \"Nhân viên\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_select, {\n                          modelValue: filters.nhan_vien_id,\n                          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((filters.nhan_vien_id) = $event)),\n                          filterable: \"\",\n                          clearable: \"\",\n                          placeholder: \"Chọn nhân viên\"\n                        }, {\n                          default: _withCtx(() => [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(employeeOptions.value, (nv) => {\n                              return (_openBlock(), _createBlock(_component_el_option, {\n                                key: nv._id,\n                                label: `${nv.ma_nhan_vien} - ${nv.ho_dem || ''} ${nv.ten || ''}`,\n                                value: nv._id\n                              }, null, 8, [\"label\", \"value\"]))\n                            }), 128))\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_el_col, {\n                  md: 6,\n                  xs: 24\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \"Phòng ban\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_select, {\n                          modelValue: filters.phong_ban_id,\n                          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((filters.phong_ban_id) = $event)),\n                          clearable: \"\",\n                          placeholder: \"Tất cả\"\n                        }, {\n                          default: _withCtx(() => [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(deptOptions.value, (dept) => {\n                              return (_openBlock(), _createBlock(_component_el_option, {\n                                key: dept._id,\n                                label: dept.ten,\n                                value: dept._id\n                              }, null, 8, [\"label\", \"value\"]))\n                            }), 128))\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_row, { gutter: 20 }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_col, {\n                  md: 6,\n                  xs: 24\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \"Trạng thái\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_select, {\n                          modelValue: filters.trang_thai,\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((filters.trang_thai) = $event)),\n                          placeholder: \"Tất cả\",\n                          clearable: \"\"\n                        }, {\n                          default: _withCtx(() => [\n                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(statusOptions, (item) => {\n                              return _createVNode(_component_el_option, {\n                                key: item.value,\n                                label: item.label,\n                                value: item.value\n                              }, null, 8, [\"label\", \"value\"])\n                            }), 64))\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_el_col, {\n                  md: 6,\n                  xs: 24\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \" \" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_space, null, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_button, {\n                              type: \"primary\",\n                              icon: _unref(Search),\n                              onClick: handleSearch\n                            }, {\n                              default: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n                                _createTextVNode(\" Lọc \", -1)\n                              ]))]),\n                              _: 1\n                            }, 8, [\"icon\"]),\n                            _createVNode(_component_el_button, { onClick: handleReset }, {\n                              default: _withCtx(() => [...(_cache[8] || (_cache[8] = [\n                                _createTextVNode(\"Xóa lọc\", -1)\n                              ]))]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_row, {\n      gutter: 20,\n      class: \"violation-cards\"\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(violationDisplay.value, (item) => {\n          return (_openBlock(), _createBlock(_component_el_col, {\n            key: item.status,\n            xs: 24,\n            sm: 12,\n            md: 6\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_card, {\n                class: \"violation-card\",\n                shadow: \"hover\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"span\", null, _toDisplayString(statusLabel(item.status)), 1),\n                    _createVNode(_component_el_tag, {\n                      type: statusTag(item.status),\n                      effect: \"dark\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(((item.count / (pagination.total || 1)) * 100).toFixed(1)) + \"% \", 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"type\"])\n                  ]),\n                  _createElementVNode(\"p\", null, _toDisplayString(item.count) + \" bản ghi\", 1)\n                ]),\n                _: 2\n              }, 1024)\n            ]),\n            _: 2\n          }, 1024))\n        }), 128))\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_card, { shadow: \"never\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"div\", null, [\n            _cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"Kết quả rule engine\", -1)),\n            _createElementVNode(\"p\", null, _toDisplayString(pagination.total) + \" dòng - cập nhật lần cuối: \" + _toDisplayString(lastUpdatedLabel.value), 1)\n          ])\n        ]),\n        _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n          data: summaries.value,\n          \"empty-text\": loading.value ? 'Đang tải...' : 'Không có dữ liệu'\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_table_column, {\n              label: \"Ngày\",\n              width: \"130\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createTextVNode(_toDisplayString(formatDate(row.ngay)), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Nhân viên\",\n              \"min-width\": \"200\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createElementVNode(\"div\", _hoisted_6, [\n                  _createElementVNode(\"strong\", null, _toDisplayString(typeof row.nhan_vien_id === 'object'\n                    ? `${row.nhan_vien_id?.ho_dem || ''} ${\n                        row.nhan_vien_id?.ten || ''\n                      }`\n                    : row.nhan_vien_id), 1),\n                  _createElementVNode(\"span\", null, _toDisplayString(typeof row.nhan_vien_id === 'object'\n                    ? row.nhan_vien_id?.ma_nhan_vien\n                    : ''), 1)\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Ca\",\n              \"min-width\": \"160\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createTextVNode(_toDisplayString(row.shift_snapshot?.ten_ca || '---') + \" \", 1),\n                  _createElementVNode(\"small\", null, _toDisplayString(row.shift_snapshot?.gio_bat_dau || '--:--') + \" - \" + _toDisplayString(row.shift_snapshot?.gio_ket_thuc || '--:--'), 1)\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Check-in/out\",\n              \"min-width\": \"180\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createElementVNode(\"div\", _hoisted_8, [\n                  _createElementVNode(\"span\", null, _toDisplayString(formatTime(row.check_in)), 1),\n                  _createElementVNode(\"span\", null, _toDisplayString(formatTime(row.check_out)), 1)\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Làm việc\",\n              width: \"110\",\n              prop: \"work_minutes\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createTextVNode(_toDisplayString(formatMinutes(row.work_minutes)), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"OT\",\n              width: \"90\",\n              prop: \"ot_hours\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createTextVNode(_toDisplayString(formatHours(row.ot_hours)), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Trạng thái\",\n              width: \"150\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createVNode(_component_el_tag, {\n                  type: statusTag(row.status)\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(statusLabel(row.status)), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"type\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"notes\",\n              label: \"Ghi chú\",\n              \"min-width\": \"250\"\n            })\n          ]),\n          _: 1\n        }, 8, [\"data\", \"empty-text\"])), [\n          [_directive_loading, loading.value]\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createVNode(_component_el_pagination, {\n            background: \"\",\n            layout: \"total, prev, pager, next\",\n            total: pagination.total,\n            \"current-page\": pagination.page,\n            \"page-size\": pagination.limit,\n            onCurrentChange: handlePageChange\n          }, null, 8, [\"total\", \"current-page\", \"page-size\"])\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"time-rule-page\">\n    <div class=\"page-header\">\n      <div>\n        <h2>Rule Engine Time/Leave/OT</h2>\n        <p>\n          Theo dõi trạng thái chấm công - nghỉ phép - tăng ca theo ca làm việc,\n          tự động cảnh báo khi sai phạm.\n        </p>\n      </div>\n      <div class=\"page-actions\">\n        <el-button :icon=\"Refresh\" @click=\"handleRefresh\">Tải lại</el-button>\n        <el-button\n          type=\"primary\"\n          :loading=\"recalculating\"\n          :icon=\"DataAnalysis\"\n          @click=\"handleRecalculate\"\n        >\n          Tính lại\n        </el-button>\n      </div>\n    </div>\n\n    <el-card shadow=\"never\">\n      <el-form\n        :model=\"filters\"\n        label-width=\"140px\"\n        label-position=\"left\"\n        class=\"filter-form\"\n      >\n        <el-row :gutter=\"20\">\n          <el-col :md=\"12\" :xs=\"24\">\n            <el-form-item label=\"Khoảng thời gian\">\n              <el-date-picker\n                v-model=\"filters.dates\"\n                type=\"daterange\"\n                unlink-panels\n                start-placeholder=\"Từ ngày\"\n                end-placeholder=\"Đến ngày\"\n                value-format=\"YYYY-MM-DD\"\n                format=\"DD/MM/YYYY\"\n                style=\"width: 100%\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :md=\"6\" :xs=\"24\">\n            <el-form-item label=\"Nhân viên\">\n              <el-select\n                v-model=\"filters.nhan_vien_id\"\n                filterable\n                clearable\n                placeholder=\"Chọn nhân viên\"\n              >\n                <el-option\n                  v-for=\"nv in employeeOptions\"\n                  :key=\"nv._id\"\n                  :label=\"`${nv.ma_nhan_vien} - ${nv.ho_dem || ''} ${nv.ten || ''}`\"\n                  :value=\"nv._id\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :md=\"6\" :xs=\"24\">\n            <el-form-item label=\"Phòng ban\">\n              <el-select\n                v-model=\"filters.phong_ban_id\"\n                clearable\n                placeholder=\"Tất cả\"\n              >\n                <el-option\n                  v-for=\"dept in deptOptions\"\n                  :key=\"dept._id\"\n                  :label=\"dept.ten\"\n                  :value=\"dept._id\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row :gutter=\"20\">\n          <el-col :md=\"6\" :xs=\"24\">\n            <el-form-item label=\"Trạng thái\">\n              <el-select\n                v-model=\"filters.trang_thai\"\n                placeholder=\"Tất cả\"\n                clearable\n              >\n                <el-option\n                  v-for=\"item in statusOptions\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :md=\"6\" :xs=\"24\">\n            <el-form-item label=\" \">\n              <el-space>\n                <el-button type=\"primary\" :icon=\"Search\" @click=\"handleSearch\">\n                  Lọc\n                </el-button>\n                <el-button @click=\"handleReset\">Xóa lọc</el-button>\n              </el-space>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n\n    <el-row :gutter=\"20\" class=\"violation-cards\">\n      <el-col\n        v-for=\"item in violationDisplay\"\n        :key=\"item.status\"\n        :xs=\"24\"\n        :sm=\"12\"\n        :md=\"6\"\n      >\n        <el-card class=\"violation-card\" shadow=\"hover\">\n          <div class=\"violation-card__header\">\n            <span>{{ statusLabel(item.status) }}</span>\n            <el-tag :type=\"statusTag(item.status)\" effect=\"dark\">\n              {{ ((item.count / (pagination.total || 1)) * 100).toFixed(1) }}%\n            </el-tag>\n          </div>\n          <p>{{ item.count }} bản ghi</p>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <el-card shadow=\"never\">\n      <div class=\"table-header\">\n        <div>\n          <h3>Kết quả rule engine</h3>\n          <p>\n            {{ pagination.total }} dòng - cập nhật lần cuối:\n            {{ lastUpdatedLabel }}\n          </p>\n        </div>\n      </div>\n\n      <el-table\n        :data=\"summaries\"\n        v-loading=\"loading\"\n        :empty-text=\"loading ? 'Đang tải...' : 'Không có dữ liệu'\"\n      >\n        <el-table-column label=\"Ngày\" width=\"130\">\n          <template #default=\"{row}\">\n            {{ formatDate(row.ngay) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Nhân viên\" min-width=\"200\">\n          <template #default=\"{row}\">\n            <div class=\"employee-cell\">\n              <strong>\n                {{\n                  typeof row.nhan_vien_id === 'object'\n                    ? `${row.nhan_vien_id?.ho_dem || ''} ${\n                        row.nhan_vien_id?.ten || ''\n                      }`\n                    : row.nhan_vien_id\n                }}\n              </strong>\n              <span>\n                {{\n                  typeof row.nhan_vien_id === 'object'\n                    ? row.nhan_vien_id?.ma_nhan_vien\n                    : ''\n                }}\n              </span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Ca\" min-width=\"160\">\n          <template #default=\"{row}\">\n            <div class=\"shift-cell\">\n              {{ row.shift_snapshot?.ten_ca || '---' }}\n              <small>\n                {{ row.shift_snapshot?.gio_bat_dau || '--:--' }} -\n                {{ row.shift_snapshot?.gio_ket_thuc || '--:--' }}\n              </small>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Check-in/out\" min-width=\"180\">\n          <template #default=\"{row}\">\n            <div class=\"time-pair\">\n              <span>{{ formatTime(row.check_in) }}</span>\n              <span>{{ formatTime(row.check_out) }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Làm việc\" width=\"110\" prop=\"work_minutes\">\n          <template #default=\"{row}\">\n            {{ formatMinutes(row.work_minutes) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"OT\" width=\"90\" prop=\"ot_hours\">\n          <template #default=\"{row}\">\n            {{ formatHours(row.ot_hours) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Trạng thái\" width=\"150\">\n          <template #default=\"{row}\">\n            <el-tag :type=\"statusTag(row.status)\">\n              {{ statusLabel(row.status) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"notes\" label=\"Ghi chú\" min-width=\"250\" />\n      </el-table>\n\n      <div class=\"table-pagination\">\n        <el-pagination\n          background\n          layout=\"total, prev, pager, next\"\n          :total=\"pagination.total\"\n          :current-page=\"pagination.page\"\n          :page-size=\"pagination.limit\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, reactive, computed, onMounted} from 'vue';\nimport dayjs from 'dayjs';\nimport {\n  ElMessage,\n  ElMessageBox,\n} from 'element-plus';\nimport {\n  Refresh,\n  DataAnalysis,\n  Search,\n} from '@element-plus/icons-vue';\nimport timeRuleService from '@/services/timeRuleService';\nimport nhanVienService from '@/services/nhanVienService';\nimport phongBanService from '@/services/phongBanService';\nimport {DailyTimeSummary, NhanVien, PhongBan, TimeRuleViolationStat} from '@/types';\n\nconst summaries = ref<DailyTimeSummary[]>([]);\nconst employeeOptions = ref<NhanVien[]>([]);\nconst deptOptions = ref<PhongBan[]>([]);\nconst violations = ref<TimeRuleViolationStat[]>([]);\nconst loading = ref(false);\nconst recalculating = ref(false);\n\nconst pagination = reactive({\n  page: 1,\n  limit: 20,\n  total: 0,\n});\n\nconst filters = reactive<{\n  dates: [string, string];\n  trang_thai: string;\n  nhan_vien_id: string;\n  phong_ban_id: string;\n}>({\n  dates: [\n    dayjs().startOf('month').format('YYYY-MM-DD'),\n    dayjs().format('YYYY-MM-DD'),\n  ],\n  trang_thai: '',\n  nhan_vien_id: '',\n  phong_ban_id: '',\n});\n\nconst statusOptions = [\n  {label: 'Tất cả', value: ''},\n  {label: 'Đúng giờ', value: 'OnTime'},\n  {label: 'Đi trễ', value: 'Late'},\n  {label: 'Về sớm', value: 'EarlyOut'},\n  {label: 'Đi trễ & Về sớm', value: 'LateEarly'},\n  {label: 'Nghỉ phép', value: 'Leave'},\n  {label: 'Vắng mặt', value: 'Absent'},\n  {label: 'Thiếu check-in', value: 'MissingCheckin'},\n  {label: 'Thiếu check-out', value: 'MissingCheckout'},\n];\n\nconst statusLabel = (status?: DailyTimeSummary['status']) => {\n  const option = statusOptions.find((item) => item.value === status);\n  return option?.label || status || '---';\n};\n\nconst statusTag = (status?: DailyTimeSummary['status']) => {\n  switch (status) {\n    case 'OnTime':\n      return 'success';\n    case 'Leave':\n      return 'info';\n    case 'Late':\n    case 'LateEarly':\n      return 'warning';\n    case 'EarlyOut':\n      return 'warning';\n    case 'MissingCheckin':\n    case 'MissingCheckout':\n    case 'Absent':\n      return 'danger';\n    default:\n      return 'info';\n  }\n};\n\nconst violationDisplay = computed(() => violations.value.slice(0, 4));\n\nconst lastUpdatedLabel = computed(() => {\n  if (!summaries.value.length) return '---';\n  const latest = summaries.value[0].ngay_cap_nhat || summaries.value[0].ngay;\n  return latest ? dayjs(latest).format('DD/MM/YYYY HH:mm') : '---';\n});\n\nconst formatDate = (value?: string) => {\n  if (!value) return '--';\n  return dayjs(value).format('DD/MM/YYYY');\n};\n\nconst formatTime = (value?: string) => {\n  if (!value) return '--:--';\n  return dayjs(value).format('HH:mm');\n};\n\nconst formatMinutes = (value?: number) => {\n  if (!value) return '0 phút';\n  if (value >= 60) {\n    return `${(value / 60).toFixed(1)} giờ`;\n  }\n  return `${value} phút`;\n};\n\nconst formatHours = (value?: number) => {\n  if (!value) return '0h';\n  return `${value.toFixed(2)}h`;\n};\n\nconst buildParams = () => {\n  const [from, to] = filters.dates || [];\n  return {\n    page: pagination.page,\n    limit: pagination.limit,\n    from,\n    to,\n    trang_thai: filters.trang_thai || undefined,\n    nhan_vien_id: filters.nhan_vien_id || undefined,\n    phong_ban_id: filters.phong_ban_id || undefined,\n  };\n};\n\nconst loadSummaries = async () => {\n  loading.value = true;\n  try {\n    const response = await timeRuleService.getDailySummaries(buildParams());\n    summaries.value = response.data || [];\n    pagination.total = response.pagination.total;\n  } catch (err: any) {\n    console.error('loadSummaries error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải dữ liệu rule engine');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst loadViolations = async () => {\n  try {\n    const [from, to] = filters.dates || [];\n    violations.value = await timeRuleService.getViolations({from, to});\n  } catch (err) {\n    console.error('loadViolations error', err);\n  }\n};\n\nconst loadEmployees = async () => {\n  try {\n    const response = await nhanVienService.getAll({limit: 200, page: 1});\n    employeeOptions.value = response.data || [];\n  } catch (err) {\n    employeeOptions.value = [];\n  }\n};\n\nconst loadDepartments = async () => {\n  try {\n    const response = await phongBanService.getAll({limit: 200});\n    deptOptions.value = response.items || response.data || [];\n  } catch {\n    deptOptions.value = [];\n  }\n};\n\nconst handleSearch = () => {\n  pagination.page = 1;\n  loadSummaries();\n  loadViolations();\n};\n\nconst handleReset = () => {\n  filters.dates = [\n    dayjs().startOf('month').format('YYYY-MM-DD'),\n    dayjs().format('YYYY-MM-DD'),\n  ];\n  filters.trang_thai = '';\n  filters.nhan_vien_id = '';\n  filters.phong_ban_id = '';\n  handleSearch();\n};\n\nconst handlePageChange = (page: number) => {\n  pagination.page = page;\n  loadSummaries();\n};\n\nconst handleRefresh = () => {\n  loadSummaries();\n  loadViolations();\n};\n\nconst handleRecalculate = async () => {\n  const [from, to] = filters.dates || [];\n  if (!from) {\n    ElMessage.warning('Vui lòng chọn khoảng thời gian trước khi tính lại');\n    return;\n  }\n  try {\n    await ElMessageBox.confirm(\n      'Rule engine sẽ tái tính dữ liệu trong khoảng đã chọn. Bạn chắc chắn tiếp tục?',\n      'Xác nhận',\n      {type: 'warning'},\n    );\n  } catch {\n    return;\n  }\n  recalculating.value = true;\n  try {\n    await timeRuleService.recalculate({\n      from_date: from,\n      to_date: to,\n      nhan_vien_ids: filters.nhan_vien_id ? [filters.nhan_vien_id] : undefined,\n      phong_ban_id: filters.phong_ban_id || undefined,\n    });\n    ElMessage.success('Đã gửi yêu cầu tính lại');\n    handleRefresh();\n  } catch (err: any) {\n    console.error('handleRecalculate error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tính lại rule engine');\n  } finally {\n    recalculating.value = false;\n  }\n};\n\nonMounted(() => {\n  loadEmployees();\n  loadDepartments();\n  handleRefresh();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.time-rule-page {\n  display: flex;\n  flex-direction: column;\n  gap: $spacing-lg;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: $spacing-md;\n\n  h2 {\n    margin: 0;\n    font-size: $font-size-xl;\n  }\n\n  p {\n    margin: $spacing-xxs 0 0 0;\n    color: $text-secondary;\n  }\n}\n\n.page-actions {\n  display: flex;\n  gap: $spacing-sm;\n}\n\n.filter-form {\n  :deep(.el-form-item) {\n    margin-bottom: $spacing-sm;\n  }\n}\n\n.violation-cards {\n  .violation-card {\n    min-height: 120px;\n\n    &__header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: $spacing-xs;\n\n      span {\n        font-size: $font-size-base;\n        font-weight: $font-weight-medium;\n      }\n    }\n\n    p {\n      margin: 0;\n      font-size: $font-size-lg;\n      font-weight: $font-weight-bold;\n    }\n  }\n}\n\n.table-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: $spacing-md;\n\n  h3 {\n    margin: 0;\n  }\n\n  p {\n    margin: $spacing-xxs 0 0 0;\n    color: $text-secondary;\n  }\n}\n\n.employee-cell {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n\n  span {\n    color: $text-secondary;\n    font-size: $font-size-sm;\n  }\n}\n\n.shift-cell {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n\n  small {\n    color: $text-secondary;\n  }\n}\n\n.time-pair {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.table-pagination {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: $spacing-sm;\n}\n</style>\n","import script from \"./TimeRuleEngine.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeRuleEngine.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeRuleEngine.vue?vue&type=style&index=0&id=5442ff73&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5442ff73\"]])\n\nexport default __exports__","import api from './api';\nimport {PhongBan, PaginatedResponse, PaginationParams} from '@/types';\n\nclass PhongBanService {\n  private readonly BASE_URL = '/phongban';\n\n  async getAll(\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<PhongBan>> {\n    const response = await api.get<PaginatedResponse<PhongBan>>(this.BASE_URL, {\n      params,\n    });\n    return response.data;\n  }\n\n  async getById(id: string): Promise<PhongBan> {\n    const response = await api.get<PhongBan>(`${this.BASE_URL}/${id}`);\n    return response.data;\n  }\n\n  async create(data: Partial<PhongBan>): Promise<PhongBan> {\n    const response = await api.post<PhongBan>(this.BASE_URL, data);\n    return response.data;\n  }\n\n  async update(id: string, data: Partial<PhongBan>): Promise<PhongBan> {\n    const response = await api.put<PhongBan>(`${this.BASE_URL}/${id}`, data);\n    return response.data;\n  }\n\n  async delete(id: string): Promise<void> {\n    await api.delete(`${this.BASE_URL}/${id}`);\n  }\n}\n\nexport default new PhongBanService();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import api from './api';\nimport {NhanVien, PaginatedResponse, PaginationParams} from '@/types';\n\nclass NhanVienService {\n  private readonly BASE_URL = '/nhanvien';\n\n  async getAll(\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<NhanVien>> {\n    const response = await api.get<PaginatedResponse<NhanVien>>(this.BASE_URL, {\n      params,\n    });\n    return response.data;\n  }\n\n  async getById(id: string): Promise<NhanVien> {\n    const response = await api.get<NhanVien>(`${this.BASE_URL}/${id}`);\n    return response.data;\n  }\n\n  async create(data: Partial<NhanVien>): Promise<NhanVien> {\n    const response = await api.post<NhanVien>(this.BASE_URL, data);\n    return response.data;\n  }\n\n  async update(id: string, data: Partial<NhanVien>): Promise<NhanVien> {\n    const response = await api.put<NhanVien>(`${this.BASE_URL}/${id}`, data);\n    return response.data;\n  }\n\n  async delete(id: string): Promise<void> {\n    await api.delete(`${this.BASE_URL}/${id}`);\n  }\n}\n\nexport default new NhanVienService();\n","import api from './api';\nimport {\n  DailyTimeSummary,\n  PaginatedResponse,\n  TimeRuleViolationStat,\n} from '@/types';\n\nexport interface DailySummaryParams {\n  page?: number;\n  limit?: number;\n  from?: string;\n  to?: string;\n  nhan_vien_id?: string;\n  phong_ban_id?: string;\n  trang_thai?: string;\n}\n\nexport interface RecalculatePayload {\n  from_date: string;\n  to_date?: string;\n  nhan_vien_ids?: string[];\n  phong_ban_id?: string;\n}\n\nclass TimeRuleService {\n  private readonly BASE_URL = '/time-rules';\n\n  async getDailySummaries(\n    params: DailySummaryParams,\n  ): Promise<PaginatedResponse<DailyTimeSummary>> {\n    const response = await api.get<PaginatedResponse<DailyTimeSummary>>(\n      `${this.BASE_URL}/daily`,\n      {params},\n    );\n    return response.data;\n  }\n\n  async getMySummaries(\n    params: DailySummaryParams,\n  ): Promise<PaginatedResponse<DailyTimeSummary>> {\n    const response = await api.get<PaginatedResponse<DailyTimeSummary>>(\n      `${this.BASE_URL}/my`,\n      {params},\n    );\n    return response.data;\n  }\n\n  async recalculate(payload: RecalculatePayload): Promise<void> {\n    await api.post(`${this.BASE_URL}/recalculate`, payload);\n  }\n\n  async getViolations(params: {\n    from?: string;\n    to?: string;\n  }): Promise<TimeRuleViolationStat[]> {\n    const response = await api.get<{data: TimeRuleViolationStat[]}>(\n      `${this.BASE_URL}/violations`,\n      {params},\n    );\n    return response.data.data || [];\n  }\n}\n\nexport default new TimeRuleService();\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPrimitive","t","r","e","i","call","TypeError","String","Number","toPropertyKey","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","runtimeBase","window","appGlobal","baseUrl","API_BASE_URL","process","console","log","ApiService","this","axiosInstance","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","status","removeItem","location","href","get","url","post","data","put","delete","patch","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_defineComponent","__name","setup","__props","summaries","ref","employeeOptions","deptOptions","violations","loading","recalculating","pagination","reactive","page","limit","total","filters","dates","dayjs","startOf","format","trang_thai","nhan_vien_id","phong_ban_id","statusOptions","label","statusLabel","option","find","item","statusTag","violationDisplay","computed","slice","lastUpdatedLabel","length","latest","ngay_cap_nhat","ngay","formatDate","formatTime","formatMinutes","toFixed","formatHours","buildParams","from","to","undefined","loadSummaries","async","timeRuleService","getDailySummaries","err","ElMessage","msg","loadViolations","getViolations","loadEmployees","nhanVienService","getAll","loadDepartments","phongBanService","items","handleSearch","handleReset","handlePageChange","handleRefresh","handleRecalculate","ElMessageBox","confirm","type","recalculate","from_date","to_date","nhan_vien_ids","success","warning","onMounted","_ctx","_cache","_component_el_button","_resolveComponent","_component_el_date_picker","_component_el_form_item","_component_el_col","_component_el_option","_component_el_select","_component_el_row","_component_el_space","_component_el_form","_component_el_card","_component_el_tag","_component_el_table_column","_component_el_table","_component_el_pagination","_directive_loading","_resolveDirective","_openBlock","_createElementBlock","_createElementVNode","_createVNode","icon","_unref","Refresh","onClick","default","_withCtx","_createTextVNode","_","DataAnalysis","shadow","model","gutter","md","xs","modelValue","$event","style","filterable","clearable","placeholder","_Fragment","_renderList","nv","_createBlock","key","_id","ma_nhan_vien","ho_dem","ten","dept","Search","sm","_toDisplayString","effect","count","_withDirectives","width","row","shift_snapshot","ten_ca","gio_bat_dau","gio_ket_thuc","check_in","check_out","prop","work_minutes","ot_hours","background","layout","onCurrentChange","__exports__","PhongBanService","params","api","BASE_URL","getById","id","update","exports","sfc","props","target","__vccOpts","val","NhanVienService","TimeRuleService","getMySummaries","payload"],"sourceRoot":""}