"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[6860],{397:function(t,e,n){var r=n(7751);t.exports=r("document","documentElement")},679:function(t,e,n){var r=n(1625),a=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new a("Incorrect invocation")}},684:function(t){t.exports=function(t,e){var n="function"==typeof Iterator&&Iterator.prototype[t];if(n)try{n.call({next:null},e).next()}catch(r){return!0}}},1072:function(t,e,n){var r=n(1828),a=n(8727);t.exports=Object.keys||function(t){return r(t,a)}},1114:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function o(t){var e=a(t,"string");return"symbol"==r(e)?e:e+""}function i(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{A:function(){return i}})},1385:function(t,e,n){var r=n(9539);t.exports=function(t,e,n){for(var a=t.length-1;a>=0;a--)if(void 0!==t[a])try{n=r(t[a].iterator,e,n)}catch(o){e="throw",n=o}if("throw"===e)throw n;return n}},1526:function(t,e,n){var r=n(1114),a=n(4335);const o=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,i=o||"http://192.168.88.50:5000/api";console.log("API Base URL:",i);class c{constructor(){(0,r.A)(this,"axiosInstance",void 0),this.axiosInstance=a.A.create({baseURL:i,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t)),this.axiosInstance.interceptors.response.use(t=>t,t=>(401===t.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)))}get(t,e){return this.axiosInstance.get(t,e)}post(t,e,n){return this.axiosInstance.post(t,e,n)}put(t,e,n){return this.axiosInstance.put(t,e,n)}delete(t,e){return this.axiosInstance.delete(t,e)}patch(t,e,n){return this.axiosInstance.patch(t,e,n)}}e.A=new c},1701:function(t,e,n){var r=n(6518),a=n(9565),o=n(9306),i=n(8551),c=n(1767),u=n(9462),l=n(6319),s=n(9539),h=n(684),d=n(4549),f=n(6395),p=!f&&!h("map",function(){}),g=!f&&!p&&d("map",TypeError),v=f||p||g,y=u(function(){var t=this.iterator,e=i(a(this.next,t)),n=this.done=!!e.done;if(!n)return l(t,this.mapper,[e.value,this.counter++],!0)});r({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(t){i(this);try{o(t)}catch(e){s(this,"throw",e)}return g?a(g,this,t):new y(c(this),{mapper:t})}})},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},2106:function(t,e,n){var r=n(283),a=n(4913);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),a.f(t,e,n)}},2211:function(t,e,n){var r=n(9039);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2360:function(t,e,n){var r,a=n(8551),o=n(6801),i=n(8727),c=n(421),u=n(397),l=n(4055),s=n(6119),h=">",d="<",f="prototype",p="script",g=s("IE_PROTO"),v=function(){},y=function(t){return d+p+h+t+d+"/"+p+h},_=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){var t,e=l("iframe"),n="java"+p+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},b=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}b="undefined"!=typeof document?document.domain&&r?_(r):m():_(r);var t=i.length;while(t--)delete b[f][i[t]];return b()};c[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(v[f]=a(t),n=new v,v[f]=null,n[g]=t):n=b(),void 0===e?n:o.f(n,e)}},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},2787:function(t,e,n){var r=n(9297),a=n(4901),o=n(8981),i=n(6119),c=n(2211),u=i("IE_PROTO"),l=Object,s=l.prototype;t.exports=c?l.getPrototypeOf:function(t){var e=o(t);if(r(e,u))return e[u];var n=e.constructor;return a(n)&&e instanceof n?n.prototype:e instanceof l?s:null}},4114:function(t,e,n){var r=n(6518),a=n(8981),o=n(6198),i=n(4527),c=n(6837),u=n(9039),l=u(function(){return 4294967297!==[].push.call({length:4294967296},1)}),s=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!s();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=a(this),n=o(e),r=arguments.length;c(n+r);for(var u=0;u<r;u++)e[n]=arguments[u],n++;return i(e,n),n}})},4376:function(t,e,n){var r=n(2195);t.exports=Array.isArray||function(t){return"Array"===r(t)}},4527:function(t,e,n){var r=n(3724),a=n(4376),o=TypeError,i=Object.getOwnPropertyDescriptor,c=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=c?function(t,e){if(a(t)&&!i(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:function(t,e,n){var r=n(4576);t.exports=function(t,e){var n=r.Iterator,a=n&&n.prototype,o=a&&a[t],i=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){i=!0}},-1)}catch(c){c instanceof e||(i=!1)}if(!i)return o}},4659:function(t,e,n){var r=n(3724),a=n(4913),o=n(6980);t.exports=function(t,e,n){r?a.f(t,e,o(0,n)):t[e]=n}},6279:function(t,e,n){var r=n(6840);t.exports=function(t,e,n){for(var a in e)r(t,a,e[a],n);return t}},6319:function(t,e,n){var r=n(8551),a=n(9539);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(i){a(t,"throw",i)}}},6604:function(t,e,n){var r=n(1114),a=n(1526);class o{constructor(){(0,r.A)(this,"BASE_URL","/nhanvien")}async getAll(t){const e=await a.A.get(this.BASE_URL,{params:t});return e.data}async getById(t){const e=await a.A.get(`${this.BASE_URL}/${t}`);return e.data}async create(t){const e=await a.A.post(this.BASE_URL,t);return e.data}async update(t,e){const n=await a.A.put(`${this.BASE_URL}/${t}`,e);return n.data}async delete(t){await a.A.delete(`${this.BASE_URL}/${t}`)}}e.A=new o},6801:function(t,e,n){var r=n(3724),a=n(8686),o=n(4913),i=n(8551),c=n(5397),u=n(1072);e.f=r&&!a?Object.defineProperties:function(t,e){i(t);var n,r=c(e),a=u(e),l=a.length,s=0;while(l>s)o.f(t,n=a[s++],r[n]);return t}},6834:function(t,e,n){var r=n(1114),a=(n(8111),n(1701),n(1526));class o{constructor(){(0,r.A)(this,"BASE_URL","/quyennghiphep")}async getAll(t){const e=await a.A.get(this.BASE_URL,{params:t});return e.data}async getById(t){const e=await a.A.get(`${this.BASE_URL}/${t}`);return e.data}async getByNhanVienId(t,e){const n=await a.A.get(this.BASE_URL,{params:{nhan_vien_id:t,nam:e,limit:1e3}}),r=n.data.data||[];return r.map(t=>({loai_ngay_nghi:t.loai_ngay_nghi_id||{ten:"",mo_ta:""},so_ngay_duoc_huong:t.so_ngay_duoc_huong||0,so_ngay_da_su_dung:t.so_ngay_da_su_dung||0,so_ngay_con_lai:(t.so_ngay_duoc_huong||0)-(t.so_ngay_da_su_dung||0)}))}async create(t){const e=await a.A.post(this.BASE_URL,t);return e.data}async update(t,e){const n=await a.A.put(`${this.BASE_URL}/${t}`,e);return n.data}async delete(t){await a.A.delete(`${this.BASE_URL}/${t}`)}}e.A=new o},6837:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},6860:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});n(4114);var r=n(1431),a=n(8548),o=n(163),i=n(6834),c=n(6604);const u={class:"orangehrm-leave-balance-page"},l={class:"orangehrm-page-header"},s={class:"orangehrm-page-actions"},h={key:0,class:"orangehrm-balance-container"},d={class:"orangehrm-balance-header"},f={class:"orangehrm-balance-title"},p={class:"orangehrm-balance-content"},g={class:"orangehrm-balance-item"},v={class:"orangehrm-balance-value orangehrm-total"},y={class:"orangehrm-balance-item"},_={class:"orangehrm-balance-value orangehrm-used"},m={class:"orangehrm-balance-item orangehrm-balance-remaining"},b={class:"orangehrm-balance-value orangehrm-available"},w={class:"orangehrm-balance-progress"},k={key:0,class:"orangehrm-balance-footer"};var A=(0,r.pM)({__name:"LeaveBalance",setup(t){const e=(0,r.KR)([]),n=(0,r.KR)([]),A=(0,r.KR)(!1),x=(0,r.KR)(""),I=(0,r.KR)((new Date).getFullYear()),E=(0,r.KR)([]);for(let r=-2;r<=2;r++)E.value.push((new Date).getFullYear()+r);const L=async()=>{try{const t=await c.A.getAll({limit:1e3});e.value=t.data||[],e.value.length>0&&!x.value&&(x.value=e.value[0]._id,await R())}catch(t){console.error("Error loading employees:",t),o.nk.error("Không thể tải danh sách nhân viên")}},R=async()=>{if(x.value){A.value=!0;try{const t=await i.A.getByNhanVienId(x.value,I.value);n.value=t||[]}catch(t){console.error("Error loading leave balance:",t),o.nk.error(t.response?.data?.msg||"Không thể tải thông tin số dư phép"),n.value=[]}finally{A.value=!1}}},S=async()=>{await L()},F=t=>{if(0===t.so_ngay_duoc_huong)return 0;const e=t.so_ngay_da_su_dung/t.so_ngay_duoc_huong*100;return Math.min(Math.round(e),100)},C=t=>{const e=F(t);return e>=90?"#F56C6C":e>=70?"#E6A23C":"#67C23A"};return(0,r.sV)(()=>{S()}),(t,o)=>{const i=(0,r.g2)("el-button"),c=(0,r.g2)("el-option"),L=(0,r.g2)("el-select"),O=(0,r.g2)("el-col"),B=(0,r.g2)("el-row"),j=(0,r.g2)("el-card"),U=(0,r.g2)("el-icon"),$=(0,r.g2)("el-progress"),P=(0,r.g2)("el-text"),T=(0,r.g2)("el-empty"),X=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",u,[(0,r.Lk)("div",l,[o[3]||(o[3]=(0,r.Lk)("h1",{class:"orangehrm-page-title"},"Số dư phép",-1)),(0,r.Lk)("div",s,[(0,r.bF)(i,{icon:(0,r.R1)(a.Refresh),onClick:S},{default:(0,r.k6)(()=>[...o[2]||(o[2]=[(0,r.eW)("Tải lại",-1)])]),_:1},8,["icon"])])]),(0,r.bF)(j,{class:"orangehrm-search-card",shadow:"never"},{default:(0,r.k6)(()=>[(0,r.bF)(B,{gutter:16},{default:(0,r.k6)(()=>[(0,r.bF)(O,{xs:24,sm:12,md:8},{default:(0,r.k6)(()=>[(0,r.bF)(L,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t),placeholder:"Chọn nhân viên",filterable:"",style:{width:"100%"},onChange:R},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.value,t=>((0,r.uX)(),(0,r.Wv)(c,{key:t._id,label:`${t.ho_dem} ${t.ten} (${t.ma_nhan_vien})`,value:t._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,r.bF)(O,{xs:24,sm:12,md:6},{default:(0,r.k6)(()=>[(0,r.bF)(L,{modelValue:I.value,"onUpdate:modelValue":o[1]||(o[1]=t=>I.value=t),placeholder:"Chọn năm",style:{width:"100%"},onChange:R},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(E.value,t=>((0,r.uX)(),(0,r.Wv)(c,{key:t,label:`Năm ${t}`,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),x.value?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(B,{gutter:16},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,t=>((0,r.uX)(),(0,r.Wv)(O,{key:t.loai_ngay_nghi._id,xs:24,sm:12,md:8,lg:6},{default:(0,r.k6)(()=>[(0,r.bF)(j,{class:"orangehrm-balance-card",shadow:"hover"},{default:(0,r.k6)(()=>[(0,r.Lk)("div",d,[(0,r.Lk)("h3",f,(0,r.v_)(t.loai_ngay_nghi.ten),1),(0,r.bF)(U,{size:24,color:"#4A90E2"},{default:(0,r.k6)(()=>[(0,r.bF)((0,r.R1)(a.Calendar))]),_:1})]),(0,r.Lk)("div",p,[(0,r.Lk)("div",g,[o[4]||(o[4]=(0,r.Lk)("span",{class:"orangehrm-balance-label"},"Được hưởng:",-1)),(0,r.Lk)("span",v,(0,r.v_)(t.so_ngay_duoc_huong)+" ngày ",1)]),(0,r.Lk)("div",y,[o[5]||(o[5]=(0,r.Lk)("span",{class:"orangehrm-balance-label"},"Đã sử dụng:",-1)),(0,r.Lk)("span",_,(0,r.v_)(t.so_ngay_da_su_dung)+" ngày ",1)]),o[7]||(o[7]=(0,r.Lk)("div",{class:"orangehrm-balance-divider"},null,-1)),(0,r.Lk)("div",m,[o[6]||(o[6]=(0,r.Lk)("span",{class:"orangehrm-balance-label"},"Còn lại:",-1)),(0,r.Lk)("span",b,(0,r.v_)(t.so_ngay_con_lai)+" ngày ",1)]),(0,r.Lk)("div",w,[(0,r.bF)($,{percentage:F(t),color:C(t),"stroke-width":8},null,8,["percentage","color"])])]),t.loai_ngay_nghi.mo_ta?((0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(P,{size:"small",type:"info"},{default:(0,r.k6)(()=>[(0,r.eW)((0,r.v_)(t.loai_ngay_nghi.mo_ta),1)]),_:2},1024)])):(0,r.Q3)("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})),[[X,A.value]]),A.value||0!==n.value.length?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(T,{key:0,description:"Không có dữ liệu số dư phép"},{default:(0,r.k6)(()=>[(0,r.bF)(i,{type:"primary",onClick:S},{default:(0,r.k6)(()=>[...o[8]||(o[8]=[(0,r.eW)("Tải lại",-1)])]),_:1})]),_:1}))])):((0,r.uX)(),(0,r.Wv)(T,{key:1,description:"Vui lòng chọn nhân viên để xem số dư phép","image-size":200}))])}}}),x=n(6262);const I=(0,x.A)(A,[["__scopeId","data-v-6e8bd21c"]]);var E=I},7657:function(t,e,n){var r,a,o,i=n(9039),c=n(4901),u=n(34),l=n(2360),s=n(2787),h=n(6840),d=n(8227),f=n(6395),p=d("iterator"),g=!1;[].keys&&(o=[].keys(),"next"in o?(a=s(s(o)),a!==Object.prototype&&(r=a)):g=!0);var v=!u(r)||i(function(){var t={};return r[p].call(t)!==t});v?r={}:f&&(r=l(r)),c(r[p])||h(r,p,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},8111:function(t,e,n){var r=n(6518),a=n(4576),o=n(679),i=n(8551),c=n(4901),u=n(2787),l=n(2106),s=n(4659),h=n(9039),d=n(9297),f=n(8227),p=n(7657).IteratorPrototype,g=n(3724),v=n(6395),y="constructor",_="Iterator",m=f("toStringTag"),b=TypeError,w=a[_],k=v||!c(w)||w.prototype!==p||!h(function(){w({})}),A=function(){if(o(this,p),u(this)===p)throw new b("Abstract class Iterator not directly constructable")},x=function(t,e){g?l(p,t,{configurable:!0,get:function(){return e},set:function(e){if(i(this),this===p)throw new b("You can't redefine this property");d(this,t)?this[t]=e:s(this,t,e)}}):p[t]=e};d(p,m)||x(m,_),!k&&d(p,y)&&p[y]!==Object||x(y,A),A.prototype=p,r({global:!0,constructor:!0,forced:k},{Iterator:A})},9462:function(t,e,n){var r=n(9565),a=n(2360),o=n(6699),i=n(6279),c=n(8227),u=n(1181),l=n(5966),s=n(7657).IteratorPrototype,h=n(2529),d=n(9539),f=n(1385),p=c("toStringTag"),g="IteratorHelper",v="WrapForValidIterator",y="normal",_="throw",m=u.set,b=function(t){var e=u.getterFor(t?v:g);return i(a(s),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return h(void 0,!0);try{var r=n.nextHandler();return n.returnHandlerResult?r:h(r,n.done)}catch(a){throw n.done=!0,a}},return:function(){var n=e(this),a=n.iterator;if(n.done=!0,t){var o=l(a,"return");return o?r(o,a):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,y)}catch(i){return d(a,_,i)}if(n.openIters)try{f(n.openIters,y)}catch(i){return d(a,_,i)}return a&&d(a,y),h(void 0,!0)}})},w=b(!0),k=b(!1);o(k,p,"Iterator Helper"),t.exports=function(t,e,n){var r=function(r,a){a?(a.iterator=r.iterator,a.next=r.next):a=r,a.type=e?v:g,a.returnHandlerResult=!!n,a.nextHandler=t,a.counter=0,a.done=!1,m(this,a)};return r.prototype=e?w:k,r}},9539:function(t,e,n){var r=n(9565),a=n(8551),o=n(5966);t.exports=function(t,e,n){var i,c;a(t);try{if(i=o(t,"return"),!i){if("throw"===e)throw n;return n}i=r(i,t)}catch(u){c=!0,i=u}if("throw"===e)throw n;if(c)throw i;return a(i),n}}}]);
//# sourceMappingURL=6860.23db6392.js.map