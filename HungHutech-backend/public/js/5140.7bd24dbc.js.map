{"version":3,"file":"js/5140.7bd24dbc.js","mappings":"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","sources":["webpack://HungHutech/./node_modules/core-js/modules/es.iterator.find.js","webpack://HungHutech/./src/services/api.ts","webpack://HungHutech/./src/services/consentService.ts","webpack://HungHutech/./src/pages/ConsentHub.vue?02bc","webpack://HungHutech/./src/pages/ConsentHub.vue","webpack://HungHutech/./src/pages/ConsentHub.vue?c57c","webpack://HungHutech/./src/services/phongBanService.ts","webpack://HungHutech/./node_modules/core-js/modules/es.iterator.reduce.js","webpack://HungHutech/./node_modules/core-js/internals/function-apply.js"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","import axios, {AxiosInstance, AxiosRequestConfig, AxiosResponse} from 'axios';\n\n// Base URL config via server-injected window.appGlobal or env\nconst runtimeBase =\n  (window as any)?.appGlobal?.baseUrl &&\n  `${(window as any).appGlobal.baseUrl}/api`;\nconst API_BASE_URL =\n  runtimeBase || process.env.VUE_APP_API_BASE_URL || 'http://localhost:5000/api';\n\nconsole.log('API Base URL:', API_BASE_URL);\n\nclass ApiService {\n  private axiosInstance: AxiosInstance;\n\n  constructor() {\n    this.axiosInstance = axios.create({\n      baseURL: API_BASE_URL,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor - Add token to requests\n    this.axiosInstance.interceptors.request.use(\n      (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      },\n    );\n\n    // Response interceptor - Handle errors\n    this.axiosInstance.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (error.response?.status === 401) {\n          // Token expired or invalid\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          window.location.href = '/login';\n        }\n        return Promise.reject(error);\n      },\n    );\n  }\n\n  public get<T = any>(\n    url: string,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.get<T>(url, config);\n  }\n\n  public post<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.post<T>(url, data, config);\n  }\n\n  public put<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.put<T>(url, data, config);\n  }\n\n  public delete<T = any>(\n    url: string,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.delete<T>(url, config);\n  }\n\n  public patch<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig,\n  ): Promise<AxiosResponse<T>> {\n    return this.axiosInstance.patch<T>(url, data, config);\n  }\n}\n\nexport default new ApiService();\r\n","import api from './api';\nimport {\n  ConsentView,\n  ConsentOverviewItem,\n  ConsentAdminRow,\n  PaginatedResponse,\n} from '@/types';\n\nexport interface ConsentResponse {\n  items: ConsentView[];\n  pendingRequired: boolean;\n}\n\nclass ConsentService {\n  private readonly BASE_URL = '/consents';\n\n  async getMyConsents(): Promise<ConsentResponse> {\n    const response = await api.get<{\n      data: ConsentView[];\n      pending_required: boolean;\n    }>(`${this.BASE_URL}/my`);\n    return {\n      items: response.data.data || [],\n      pendingRequired: Boolean(response.data.pending_required),\n    };\n  }\n\n  async getPurposes(): Promise<ConsentView[]> {\n    const response = await api.get<{data: ConsentView[]}>(\n      `${this.BASE_URL}/purposes`,\n    );\n    return response.data.data || [];\n  }\n\n  async saveConsents(\n    consents: Array<{purpose: string; accepted: boolean; note?: string}>,\n  ): Promise<ConsentResponse> {\n    const response = await api.post<{\n      data: ConsentView[];\n      pending_required: boolean;\n    }>(this.BASE_URL, {\n      consents,\n    });\n    return {\n      items: response.data.data || [],\n      pendingRequired: Boolean(response.data.pending_required),\n    };\n  }\n\n  async getOverview(): Promise<ConsentOverviewItem[]> {\n    const response = await api.get<{data: ConsentOverviewItem[]; total_employees: number}>(\n      `${this.BASE_URL}/overview`,\n    );\n    return response.data.data || [];\n  }\n\n  async getTracking(params?: {\n    page?: number;\n    limit?: number;\n    phong_ban_id?: string;\n    q?: string;\n  }): Promise<PaginatedResponse<ConsentAdminRow>> {\n    const response = await api.get<PaginatedResponse<ConsentAdminRow>>(\n      `${this.BASE_URL}/tracking`,\n      {params},\n    );\n    return response.data;\n  }\n}\n\nexport default new ConsentService();\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"consent-hub-page\" }\nconst _hoisted_2 = { class: \"page-header\" }\nconst _hoisted_3 = { class: \"card-header\" }\nconst _hoisted_4 = { class: \"overview-card__title\" }\nconst _hoisted_5 = { class: \"overview-card__stats\" }\nconst _hoisted_6 = { class: \"card-header\" }\nconst _hoisted_7 = { class: \"card-filters\" }\nconst _hoisted_8 = { class: \"employee-cell\" }\nconst _hoisted_9 = { class: \"table-pagination\" }\n\nimport {ref, reactive, onMounted, computed} from 'vue';\nimport {ElMessage} from 'element-plus';\nimport {Refresh, Search} from '@element-plus/icons-vue';\nimport consentService from '@/services/consentService';\nimport phongBanService from '@/services/phongBanService';\nimport {\n  ConsentOverviewItem,\n  ConsentAdminRow,\n  PhongBan,\n  ConsentStatus,\n} from '@/types';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ConsentHub',\n  setup(__props) {\n\nconst overview = ref<ConsentOverviewItem[]>([]);\nconst rows = ref<ConsentAdminRow[]>([]);\nconst deptOptions = ref<PhongBan[]>([]);\nconst loading = ref(false);\nconst filters = reactive({\n  phong_ban_id: '',\n  q: '',\n});\n\nconst pagination = reactive({\n  page: 1,\n  limit: 10,\n  total: 0,\n});\n\nconst overviewTotal = computed(() => {\n  if (!overview.value.length) return 0;\n  return (\n    overview.value.reduce((sum, item) => sum + item.accepted + item.pending + item.withdrawn, 0) /\n    overview.value.length\n  );\n});\n\nconst statusLabel = (status?: ConsentStatus | 'Pending') => {\n  switch (status) {\n    case 'Accepted':\n      return 'Đồng ý';\n    case 'Withdrawn':\n      return 'Đã rút';\n    case 'Pending':\n    default:\n      return 'Chưa phản hồi';\n  }\n};\n\nconst statusTag = (status?: string) => {\n  switch (status) {\n    case 'Accepted':\n      return 'success';\n    case 'Withdrawn':\n      return 'danger';\n    default:\n      return 'info';\n  }\n};\n\nconst fullName = (nv: ConsentAdminRow['nhan_vien']) =>\n  `${nv.ho_dem || ''} ${nv.ten || ''}`.trim();\n\nconst getStatus = (row: ConsentAdminRow, purposeKey: string) => {\n  const record = row.purposes.find((item) => item.key === purposeKey);\n  return record?.status || 'Pending';\n};\n\nconst loadOverview = async () => {\n  try {\n    overview.value = await consentService.getOverview();\n  } catch (err: any) {\n    console.error('loadOverview error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải tổng quan consent');\n  }\n};\n\nconst loadDepartments = async () => {\n  try {\n    const response = await phongBanService.getAll({limit: 200});\n    deptOptions.value = response.data || [];\n  } catch {\n    deptOptions.value = [];\n  }\n};\n\nconst loadTracking = async () => {\n  loading.value = true;\n  try {\n    const response = await consentService.getTracking({\n      page: pagination.page,\n      limit: pagination.limit,\n      phong_ban_id: filters.phong_ban_id || undefined,\n      q: filters.q || undefined,\n    });\n    rows.value = response.data || [];\n    pagination.total = response.pagination.total;\n  } catch (err: any) {\n    console.error('loadTracking error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải danh sách consent');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst handleSearch = () => {\n  pagination.page = 1;\n  loadTracking();\n};\n\nconst handlePageChange = (page: number) => {\n  pagination.page = page;\n  loadTracking();\n};\n\nconst handleRefresh = () => {\n  loadOverview();\n  loadTracking();\n};\n\nonMounted(() => {\n  loadDepartments();\n  handleRefresh();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_pagination = _resolveComponent(\"el-pagination\")!\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h2\", null, \"Consent Hub\"),\n        _createElementVNode(\"p\", null, \"Theo dõi tình trạng đồng ý dữ liệu cá nhân theo Nghị định 13.\")\n      ], -1)),\n      _createVNode(_component_el_button, {\n        icon: _unref(Refresh),\n        onClick: handleRefresh\n      }, {\n        default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n          _createTextVNode(\"Làm mới\", -1)\n        ]))]),\n        _: 1\n      }, 8, [\"icon\"])\n    ]),\n    _createVNode(_component_el_card, { shadow: \"never\" }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"Tổng quan\", -1)),\n          _createElementVNode(\"small\", null, _toDisplayString(overviewTotal.value) + \" nhân viên đã cập nhật consent\", 1)\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_row, { gutter: 16 }, {\n          default: _withCtx(() => [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(overview.value, (item) => {\n              return (_openBlock(), _createBlock(_component_el_col, {\n                key: item.key,\n                xs: 24,\n                sm: 12,\n                md: 8\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_card, {\n                    class: \"overview-card\",\n                    \"body-style\": {padding: '16px'}\n                  }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\"strong\", null, _toDisplayString(item.name), 1),\n                        (item.required)\n                          ? (_openBlock(), _createBlock(_component_el_tag, {\n                              key: 0,\n                              size: \"small\",\n                              type: \"danger\"\n                            }, {\n                              default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                                _createTextVNode(\" Bắt buộc \", -1)\n                              ]))]),\n                              _: 1\n                            }))\n                          : _createCommentVNode(\"\", true)\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"div\", null, [\n                          _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"Đồng ý\", -1)),\n                          _createElementVNode(\"strong\", null, _toDisplayString(item.accepted), 1)\n                        ]),\n                        _createElementVNode(\"div\", null, [\n                          _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"Từ chối\", -1)),\n                          _createElementVNode(\"strong\", null, _toDisplayString(item.withdrawn), 1)\n                        ]),\n                        _createElementVNode(\"div\", null, [\n                          _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"Chưa phản hồi\", -1)),\n                          _createElementVNode(\"strong\", null, _toDisplayString(item.pending), 1)\n                        ])\n                      ])\n                    ]),\n                    _: 2\n                  }, 1024)\n                ]),\n                _: 2\n              }, 1024))\n            }), 128))\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_card, { shadow: \"never\" }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_6, [\n          _cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"Danh sách nhân viên & trạng thái đồng ý\", -1)),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createVNode(_component_el_select, {\n              modelValue: filters.phong_ban_id,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((filters.phong_ban_id) = $event)),\n              placeholder: \"Phòng ban\",\n              clearable: \"\",\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(deptOptions.value, (dept) => {\n                  return (_openBlock(), _createBlock(_component_el_option, {\n                    key: dept._id,\n                    label: dept.ten,\n                    value: dept._id\n                  }, null, 8, [\"label\", \"value\"]))\n                }), 128))\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"]),\n            _createVNode(_component_el_input, {\n              modelValue: filters.q,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((filters.q) = $event)),\n              placeholder: \"Tìm theo mã hoặc tên\",\n              size: \"small\",\n              clearable: \"\"\n            }, null, 8, [\"modelValue\"]),\n            _createVNode(_component_el_button, {\n              size: \"small\",\n              icon: _unref(Search),\n              onClick: handleSearch\n            }, {\n              default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                _createTextVNode(\" Lọc \", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"icon\"])\n          ])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n          data: rows.value,\n          \"empty-text\": loading.value ? 'Đang tải...' : 'Chưa có dữ liệu'\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_table_column, {\n              label: \"Nhân viên\",\n              \"min-width\": \"200\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createElementVNode(\"div\", _hoisted_8, [\n                  _createElementVNode(\"strong\", null, _toDisplayString(fullName(row.nhan_vien)), 1),\n                  _createElementVNode(\"span\", null, _toDisplayString(row.nhan_vien.ma_nhan_vien), 1)\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"Phòng ban\",\n              \"min-width\": \"160\"\n            }, {\n              default: _withCtx(({row}) => [\n                _createTextVNode(_toDisplayString(row.phong_ban?.ten || '--'), 1)\n              ]),\n              _: 1\n            }),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(overview.value, (purpose) => {\n              return (_openBlock(), _createBlock(_component_el_table_column, {\n                key: purpose.key,\n                label: purpose.name,\n                \"min-width\": \"160\"\n              }, {\n                default: _withCtx(({row}) => [\n                  _createVNode(_component_el_tag, {\n                    size: \"small\",\n                    type: statusTag(getStatus(row, purpose.key))\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(statusLabel(getStatus(row, purpose.key))), 1)\n                    ]),\n                    _: 2\n                  }, 1032, [\"type\"])\n                ]),\n                _: 2\n              }, 1032, [\"label\"]))\n            }), 128))\n          ]),\n          _: 1\n        }, 8, [\"data\", \"empty-text\"])), [\n          [_directive_loading, loading.value]\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createVNode(_component_el_pagination, {\n            background: \"\",\n            layout: \"total, prev, pager, next\",\n            total: pagination.total,\n            \"current-page\": pagination.page,\n            \"page-size\": pagination.limit,\n            onCurrentChange: handlePageChange\n          }, null, 8, [\"total\", \"current-page\", \"page-size\"])\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"consent-hub-page\">\n    <div class=\"page-header\">\n      <div>\n        <h2>Consent Hub</h2>\n        <p>Theo dõi tình trạng đồng ý dữ liệu cá nhân theo Nghị định 13.</p>\n      </div>\n      <el-button :icon=\"Refresh\" @click=\"handleRefresh\">Làm mới</el-button>\n    </div>\n\n    <el-card shadow=\"never\">\n      <template #header>\n        <div class=\"card-header\">\n          <h3>Tổng quan</h3>\n          <small>{{ overviewTotal }} nhân viên đã cập nhật consent</small>\n        </div>\n      </template>\n      <el-row :gutter=\"16\">\n        <el-col\n          v-for=\"item in overview\"\n          :key=\"item.key\"\n          :xs=\"24\"\n          :sm=\"12\"\n          :md=\"8\"\n        >\n          <el-card class=\"overview-card\" :body-style=\"{padding: '16px'}\">\n            <div class=\"overview-card__title\">\n              <strong>{{ item.name }}</strong>\n              <el-tag v-if=\"item.required\" size=\"small\" type=\"danger\">\n                Bắt buộc\n              </el-tag>\n            </div>\n            <div class=\"overview-card__stats\">\n              <div>\n                <span>Đồng ý</span>\n                <strong>{{ item.accepted }}</strong>\n              </div>\n              <div>\n                <span>Từ chối</span>\n                <strong>{{ item.withdrawn }}</strong>\n              </div>\n              <div>\n                <span>Chưa phản hồi</span>\n                <strong>{{ item.pending }}</strong>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n    </el-card>\n\n    <el-card shadow=\"never\">\n      <template #header>\n        <div class=\"card-header\">\n          <h3>Danh sách nhân viên & trạng thái đồng ý</h3>\n          <div class=\"card-filters\">\n            <el-select\n              v-model=\"filters.phong_ban_id\"\n              placeholder=\"Phòng ban\"\n              clearable\n              size=\"small\"\n            >\n              <el-option\n                v-for=\"dept in deptOptions\"\n                :key=\"dept._id\"\n                :label=\"dept.ten\"\n                :value=\"dept._id\"\n              />\n            </el-select>\n            <el-input\n              v-model=\"filters.q\"\n              placeholder=\"Tìm theo mã hoặc tên\"\n              size=\"small\"\n              clearable\n            />\n            <el-button size=\"small\" :icon=\"Search\" @click=\"handleSearch\">\n              Lọc\n            </el-button>\n          </div>\n        </div>\n      </template>\n\n      <el-table\n        :data=\"rows\"\n        v-loading=\"loading\"\n        :empty-text=\"loading ? 'Đang tải...' : 'Chưa có dữ liệu'\"\n      >\n        <el-table-column label=\"Nhân viên\" min-width=\"200\">\n          <template #default=\"{row}\">\n            <div class=\"employee-cell\">\n              <strong>{{ fullName(row.nhan_vien) }}</strong>\n              <span>{{ row.nhan_vien.ma_nhan_vien }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"Phòng ban\" min-width=\"160\">\n          <template #default=\"{row}\">\n            {{ row.phong_ban?.ten || '--' }}\n          </template>\n        </el-table-column>\n        <el-table-column\n          v-for=\"purpose in overview\"\n          :key=\"purpose.key\"\n          :label=\"purpose.name\"\n          min-width=\"160\"\n        >\n          <template #default=\"{row}\">\n            <el-tag\n              size=\"small\"\n              :type=\"statusTag(getStatus(row, purpose.key))\"\n            >\n              {{ statusLabel(getStatus(row, purpose.key)) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"table-pagination\">\n        <el-pagination\n          background\n          layout=\"total, prev, pager, next\"\n          :total=\"pagination.total\"\n          :current-page=\"pagination.page\"\n          :page-size=\"pagination.limit\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, reactive, onMounted, computed} from 'vue';\nimport {ElMessage} from 'element-plus';\nimport {Refresh, Search} from '@element-plus/icons-vue';\nimport consentService from '@/services/consentService';\nimport phongBanService from '@/services/phongBanService';\nimport {\n  ConsentOverviewItem,\n  ConsentAdminRow,\n  PhongBan,\n  ConsentStatus,\n} from '@/types';\n\nconst overview = ref<ConsentOverviewItem[]>([]);\nconst rows = ref<ConsentAdminRow[]>([]);\nconst deptOptions = ref<PhongBan[]>([]);\nconst loading = ref(false);\nconst filters = reactive({\n  phong_ban_id: '',\n  q: '',\n});\n\nconst pagination = reactive({\n  page: 1,\n  limit: 10,\n  total: 0,\n});\n\nconst overviewTotal = computed(() => {\n  if (!overview.value.length) return 0;\n  return (\n    overview.value.reduce((sum, item) => sum + item.accepted + item.pending + item.withdrawn, 0) /\n    overview.value.length\n  );\n});\n\nconst statusLabel = (status?: ConsentStatus | 'Pending') => {\n  switch (status) {\n    case 'Accepted':\n      return 'Đồng ý';\n    case 'Withdrawn':\n      return 'Đã rút';\n    case 'Pending':\n    default:\n      return 'Chưa phản hồi';\n  }\n};\n\nconst statusTag = (status?: string) => {\n  switch (status) {\n    case 'Accepted':\n      return 'success';\n    case 'Withdrawn':\n      return 'danger';\n    default:\n      return 'info';\n  }\n};\n\nconst fullName = (nv: ConsentAdminRow['nhan_vien']) =>\n  `${nv.ho_dem || ''} ${nv.ten || ''}`.trim();\n\nconst getStatus = (row: ConsentAdminRow, purposeKey: string) => {\n  const record = row.purposes.find((item) => item.key === purposeKey);\n  return record?.status || 'Pending';\n};\n\nconst loadOverview = async () => {\n  try {\n    overview.value = await consentService.getOverview();\n  } catch (err: any) {\n    console.error('loadOverview error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải tổng quan consent');\n  }\n};\n\nconst loadDepartments = async () => {\n  try {\n    const response = await phongBanService.getAll({limit: 200});\n    deptOptions.value = response.data || [];\n  } catch {\n    deptOptions.value = [];\n  }\n};\n\nconst loadTracking = async () => {\n  loading.value = true;\n  try {\n    const response = await consentService.getTracking({\n      page: pagination.page,\n      limit: pagination.limit,\n      phong_ban_id: filters.phong_ban_id || undefined,\n      q: filters.q || undefined,\n    });\n    rows.value = response.data || [];\n    pagination.total = response.pagination.total;\n  } catch (err: any) {\n    console.error('loadTracking error', err);\n    ElMessage.error(err.response?.data?.msg || 'Không thể tải danh sách consent');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst handleSearch = () => {\n  pagination.page = 1;\n  loadTracking();\n};\n\nconst handlePageChange = (page: number) => {\n  pagination.page = page;\n  loadTracking();\n};\n\nconst handleRefresh = () => {\n  loadOverview();\n  loadTracking();\n};\n\nonMounted(() => {\n  loadDepartments();\n  handleRefresh();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.consent-hub-page {\n  display: flex;\n  flex-direction: column;\n  gap: $spacing-lg;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: $spacing-md;\n\n  h2 {\n    margin: 0;\n  }\n\n  p {\n    margin: $spacing-xxs 0 0 0;\n    color: $text-secondary;\n  }\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: $spacing-sm;\n\n  h3 {\n    margin: 0;\n  }\n\n  small {\n    color: $text-secondary;\n  }\n}\n\n.overview-card {\n  &__title {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: $spacing-sm;\n  }\n\n  &__stats {\n    display: flex;\n    justify-content: space-between;\n\n    div {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n\n      span {\n        color: $text-secondary;\n        font-size: $font-size-sm;\n      }\n\n      strong {\n        font-size: $font-size-lg;\n      }\n    }\n  }\n}\n\n.card-filters {\n  display: flex;\n  gap: $spacing-sm;\n  flex-wrap: wrap;\n}\n\n.employee-cell {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  span {\n    color: $text-secondary;\n    font-size: $font-size-sm;\n  }\n}\n\n.table-pagination {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: $spacing-sm;\n}\n</style>\n","import script from \"./ConsentHub.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ConsentHub.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ConsentHub.vue?vue&type=style&index=0&id=47ed809c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47ed809c\"]])\n\nexport default __exports__","import api from './api';\nimport {PhongBan, PaginatedResponse, PaginationParams} from '@/types';\n\nclass PhongBanService {\n  private readonly BASE_URL = '/phongban';\n\n  async getAll(\n    params?: PaginationParams,\n  ): Promise<PaginatedResponse<PhongBan>> {\n    const response = await api.get<PaginatedResponse<PhongBan>>(this.BASE_URL, {\n      params,\n    });\n    return response.data;\n  }\n\n  async getById(id: string): Promise<PhongBan> {\n    const response = await api.get<PhongBan>(`${this.BASE_URL}/${id}`);\n    return response.data;\n  }\n\n  async create(data: Partial<PhongBan>): Promise<PhongBan> {\n    const response = await api.post<PhongBan>(this.BASE_URL, data);\n    return response.data;\n  }\n\n  async update(id: string, data: Partial<PhongBan>): Promise<PhongBan> {\n    const response = await api.put<PhongBan>(`${this.BASE_URL}/${id}`, data);\n    return response.data;\n  }\n\n  async delete(id: string): Promise<void> {\n    await api.delete(`${this.BASE_URL}/${id}`);\n  }\n}\n\nexport default new PhongBanService();\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar apply = require('../internals/function-apply');\nvar fails = require('../internals/fails');\n\nvar $TypeError = TypeError;\n\n// https://bugs.webkit.org/show_bug.cgi?id=291651\nvar FAILS_ON_INITIAL_UNDEFINED = fails(function () {\n  // eslint-disable-next-line es/no-iterator-prototype-reduce, es/no-array-prototype-keys, array-callback-return -- required for testing\n  [].keys().reduce(function () { /* empty */ }, undefined);\n});\n\nvar reduceWithoutClosingOnEarlyError = !FAILS_ON_INITIAL_UNDEFINED && iteratorHelperWithoutClosingOnEarlyError('reduce', $TypeError);\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true, forced: FAILS_ON_INITIAL_UNDEFINED || reduceWithoutClosingOnEarlyError }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    try {\n      aCallable(reducer);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    if (reduceWithoutClosingOnEarlyError) {\n      return apply(reduceWithoutClosingOnEarlyError, this, noInitial ? [reducer] : [reducer, accumulator]);\n    }\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n"],"names":["$","call","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","findWithoutClosingOnEarlyError","TypeError","target","proto","real","forced","find","predicate","this","error","record","counter","value","stop","IS_RECORD","INTERRUPTED","result","runtimeBase","window","appGlobal","baseUrl","API_BASE_URL","process","console","log","ApiService","constructor","_defineProperty","axiosInstance","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","Promise","reject","response","status","removeItem","location","href","get","url","post","data","put","delete","patch","ConsentService","getMyConsents","api","BASE_URL","items","pendingRequired","Boolean","pending_required","getPurposes","saveConsents","consents","getOverview","getTracking","params","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_defineComponent","__name","setup","__props","overview","ref","rows","deptOptions","loading","filters","reactive","phong_ban_id","q","pagination","page","limit","total","overviewTotal","computed","length","reduce","sum","item","accepted","pending","withdrawn","statusLabel","statusTag","fullName","nv","ho_dem","ten","trim","getStatus","row","purposeKey","purposes","key","loadOverview","async","consentService","err","ElMessage","msg","loadDepartments","phongBanService","getAll","loadTracking","undefined","handleSearch","handlePageChange","handleRefresh","onMounted","_ctx","_cache","_component_el_button","_resolveComponent","_component_el_tag","_component_el_card","_component_el_col","_component_el_row","_component_el_option","_component_el_select","_component_el_input","_component_el_table_column","_component_el_table","_component_el_pagination","_directive_loading","_resolveDirective","_openBlock","_createElementBlock","_createElementVNode","_createVNode","icon","_unref","Refresh","onClick","default","_withCtx","_createTextVNode","_","shadow","header","_toDisplayString","gutter","_Fragment","_renderList","_createBlock","xs","sm","md","padding","name","required","size","type","_createCommentVNode","modelValue","$event","placeholder","clearable","dept","_id","label","Search","_withDirectives","nhan_vien","ma_nhan_vien","phong_ban","purpose","background","layout","onCurrentChange","__exports__","PhongBanService","getById","id","update","apply","fails","$TypeError","FAILS_ON_INITIAL_UNDEFINED","keys","reduceWithoutClosingOnEarlyError","reducer","noInitial","arguments","accumulator","NATIVE_BIND","FunctionPrototype","Function","prototype","module","exports","Reflect","bind"],"sourceRoot":""}