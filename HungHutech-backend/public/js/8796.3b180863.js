"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[8796],{814:function(e,a,t){var l=t(1114),n=t(1526);class o{constructor(){(0,l.A)(this,"BASE_URL","/diadiem")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await n.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await n.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new o},1114:function(e,a,t){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function n(e,a){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function o(e){var a=n(e,"string");return"symbol"==l(a)?a:a+""}function i(e,a,t){return(a=o(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,{A:function(){return i}})},1526:function(e,a,t){var l=t(1114),n=t(4335);const o=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,i=o||"http://192.168.88.50:5000/api";console.log("API Base URL:",i);class u{constructor(){(0,l.A)(this,"axiosInstance",void 0),this.axiosInstance=n.A.create({baseURL:i,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,a){return this.axiosInstance.get(e,a)}post(e,a,t){return this.axiosInstance.post(e,a,t)}put(e,a,t){return this.axiosInstance.put(e,a,t)}delete(e,a){return this.axiosInstance.delete(e,a)}patch(e,a,t){return this.axiosInstance.patch(e,a,t)}}a.A=new u},6262:function(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[l,n]of a)t[l]=n;return t}},8796:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var l=t(1431),n=t(8548),o=t(163),i=t(7918),u=t(814);const r={class:"orangehrm-location-list"},c={class:"orangehrm-card-header"},d={class:"orangehrm-filter-section"},s={class:"orangehrm-pagination"};var h=(0,l.pM)({__name:"LocationList",setup(e){const a=(0,l.KR)(),t=(0,l.KR)(!1),h=(0,l.KR)(!1),p=(0,l.KR)(!1),m=(0,l.KR)(!1),_=(0,l.KR)(""),b=(0,l.KR)(1),g=(0,l.KR)(10),f=(0,l.KR)(0),v=(0,l.KR)([]),k=(0,l.Kh)({ten:"",thanh_pho:"",quoc_gia:"Việt Nam",dia_chi:"",ma_buu_dien:"",so_dien_thoai:"",email:"",fax:"",ghi_chu:"",_id:""}),y={ten:[{required:!0,message:"Vui lòng nhập tên địa điểm",trigger:"blur"}],email:[{type:"email",message:"Email không hợp lệ",trigger:"blur"}]},F=async()=>{t.value=!0;try{const e=await u.A.getAll({page:b.value,limit:g.value,q:_.value});v.value=e.data||[],f.value=e.total||0}catch(e){console.error("Error loading locations:",e),o.nk.error(e.response?.data?.msg||"Không thể tải danh sách địa điểm")}finally{t.value=!1}},w=()=>{m.value=!1,k.ten="",k.thanh_pho="",k.quoc_gia="Việt Nam",k.dia_chi="",k.ma_buu_dien="",k.so_dien_thoai="",k.email="",k.fax="",k.ghi_chu="",k._id="",p.value=!0},V=e=>{m.value=!0,k.ten=e.ten||"",k.thanh_pho=e.thanh_pho||"",k.quoc_gia=e.quoc_gia||"Việt Nam",k.dia_chi=e.dia_chi||"",k.ma_buu_dien=e.ma_buu_dien||"",k.so_dien_thoai=e.so_dien_thoai||"",k.email=e.email||"",k.fax=e.fax||"",k.ghi_chu=e.ghi_chu||"",k._id=e._id,p.value=!0},x=async e=>{try{await i.s.confirm(`Bạn có chắc chắn muốn xóa địa điểm "${e.ten}"?`,"Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await u.A.delete(e._id),o.nk.success("Xóa địa điểm thành công"),F()}catch(a){"cancel"!==a&&o.nk.error(a.response?.data?.msg||"Không thể xóa địa điểm")}},A=async()=>{if(a.value)try{const e=await a.value.validate();if(!e)return;h.value=!0;const t={ten:k.ten,thanh_pho:k.thanh_pho,quoc_gia:k.quoc_gia,dia_chi:k.dia_chi,ma_buu_dien:k.ma_buu_dien,so_dien_thoai:k.so_dien_thoai,email:k.email,fax:k.fax,ghi_chu:k.ghi_chu};m.value?(await u.A.update(k._id,t),o.nk.success("Cập nhật địa điểm thành công")):(await u.A.create(t),o.nk.success("Thêm địa điểm mới thành công")),p.value=!1,F()}catch(e){o.nk.error(e.response?.data?.msg||"Không thể lưu địa điểm")}finally{h.value=!1}},R=()=>{b.value=1,F()},S=()=>{b.value=1,F()},U=()=>{F()};return(0,l.sV)(()=>{F()}),(e,o)=>{const i=(0,l.g2)("el-button"),u=(0,l.g2)("el-input"),F=(0,l.g2)("el-col"),C=(0,l.g2)("el-row"),T=(0,l.g2)("el-table-column"),I=(0,l.g2)("el-tag"),K=(0,l.g2)("el-table"),q=(0,l.g2)("el-pagination"),L=(0,l.g2)("el-card"),B=(0,l.g2)("el-form-item"),E=(0,l.g2)("el-form"),z=(0,l.g2)("el-dialog"),P=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(L,{shadow:"never"},{header:(0,l.k6)(()=>[(0,l.Lk)("div",c,[o[15]||(o[15]=(0,l.Lk)("h2",{class:"orangehrm-card-title"},"Quản lý Địa điểm",-1)),(0,l.bF)(i,{type:"primary",icon:(0,l.R1)(n.Plus),onClick:w},{default:(0,l.k6)(()=>[...o[14]||(o[14]=[(0,l.eW)(" Thêm Địa điểm ",-1)])]),_:1},8,["icon"])])]),default:(0,l.k6)(()=>[(0,l.Lk)("div",d,[(0,l.bF)(C,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(F,{span:8},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),placeholder:"Tìm kiếm địa điểm...","prefix-icon":(0,l.R1)(n.Search),clearable:"",onClear:R,onKeyup:(0,l.jR)(R,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),(0,l.bF)(F,{span:4},{default:(0,l.k6)(()=>[(0,l.bF)(i,{type:"primary",icon:(0,l.R1)(n.Search),onClick:R},{default:(0,l.k6)(()=>[...o[16]||(o[16]=[(0,l.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(K,{data:v.value,border:"",class:"orangehrm-table",style:{"margin-top":"20px"}},{default:(0,l.k6)(()=>[(0,l.bF)(T,{prop:"ten",label:"Tên địa điểm","min-width":"200"}),(0,l.bF)(T,{prop:"thanh_pho",label:"Thành phố","min-width":"150"}),(0,l.bF)(T,{prop:"quoc_gia",label:"Quốc gia","min-width":"120"}),(0,l.bF)(T,{prop:"so_dien_thoai",label:"Số điện thoại","min-width":"130"}),(0,l.bF)(T,{label:"Số nhân viên",width:"120",align:"center"},{default:(0,l.k6)(e=>[(0,l.bF)(I,{type:"info"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.row.so_nhan_vien||0),1)]),_:2},1024)]),_:1}),(0,l.bF)(T,{label:"Thao tác",width:"180",align:"center"},{default:(0,l.k6)(e=>[(0,l.bF)(i,{size:"small",icon:(0,l.R1)(n.Edit),onClick:a=>V(e.row)},{default:(0,l.k6)(()=>[...o[17]||(o[17]=[(0,l.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,l.bF)(i,{size:"small",type:"danger",icon:(0,l.R1)(n.Delete),onClick:a=>x(e.row)},{default:(0,l.k6)(()=>[...o[18]||(o[18]=[(0,l.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[P,t.value]]),(0,l.Lk)("div",s,[(0,l.bF)(q,{"current-page":b.value,"onUpdate:currentPage":o[1]||(o[1]=e=>b.value=e),"page-size":g.value,"onUpdate:pageSize":o[2]||(o[2]=e=>g.value=e),"page-sizes":[10,20,50,100],total:f.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:U},null,8,["current-page","page-size","total"])])]),_:1}),(0,l.bF)(z,{modelValue:p.value,"onUpdate:modelValue":o[13]||(o[13]=e=>p.value=e),title:m.value?"Chỉnh sửa địa điểm":"Thêm địa điểm mới",width:"700px"},{footer:(0,l.k6)(()=>[(0,l.bF)(i,{onClick:o[12]||(o[12]=e=>p.value=!1)},{default:(0,l.k6)(()=>[...o[19]||(o[19]=[(0,l.eW)("Hủy",-1)])]),_:1}),(0,l.bF)(i,{type:"primary",loading:h.value,onClick:A},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(m.value?"Cập nhật":"Thêm mới"),1)]),_:1},8,["loading"])]),default:(0,l.k6)(()=>[(0,l.bF)(E,{ref_key:"formRef",ref:a,model:k,rules:y,"label-width":"140px"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Tên địa điểm",prop:"ten",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.ten,"onUpdate:modelValue":o[3]||(o[3]=e=>k.ten=e),placeholder:"Tên văn phòng, chi nhánh"},null,8,["modelValue"])]),_:1}),(0,l.bF)(C,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Thành phố",prop:"thanh_pho"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.thanh_pho,"onUpdate:modelValue":o[4]||(o[4]=e=>k.thanh_pho=e),placeholder:"TP.HCM"},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Quốc gia",prop:"quoc_gia"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.quoc_gia,"onUpdate:modelValue":o[5]||(o[5]=e=>k.quoc_gia=e),placeholder:"Việt Nam"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(B,{label:"Địa chỉ",prop:"dia_chi"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.dia_chi,"onUpdate:modelValue":o[6]||(o[6]=e=>k.dia_chi=e),type:"textarea",rows:2,placeholder:"Địa chỉ chi tiết"},null,8,["modelValue"])]),_:1}),(0,l.bF)(C,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Mã bưu điện",prop:"ma_buu_dien"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.ma_buu_dien,"onUpdate:modelValue":o[7]||(o[7]=e=>k.ma_buu_dien=e),placeholder:"700000"},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Số điện thoại",prop:"so_dien_thoai"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.so_dien_thoai,"onUpdate:modelValue":o[8]||(o[8]=e=>k.so_dien_thoai=e),placeholder:"028-12345678"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(C,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Email",prop:"email"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.email,"onUpdate:modelValue":o[9]||(o[9]=e=>k.email=e),type:"email",placeholder:"office@company.com"},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(F,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Fax",prop:"fax"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.fax,"onUpdate:modelValue":o[10]||(o[10]=e=>k.fax=e),placeholder:"028-87654321"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(B,{label:"Ghi chú",prop:"ghi_chu"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:k.ghi_chu,"onUpdate:modelValue":o[11]||(o[11]=e=>k.ghi_chu=e),type:"textarea",rows:3,placeholder:"Thông tin bổ sung về địa điểm"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),p=t(6262);const m=(0,p.A)(h,[["__scopeId","data-v-3e677980"]]);var _=m}}]);
//# sourceMappingURL=8796.3b180863.js.map