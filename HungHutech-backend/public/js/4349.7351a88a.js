"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[4349],{116:function(t,e,a){var n=a(6518),r=a(9565),i=a(2652),o=a(9306),l=a(8551),s=a(1767),u=a(9539),c=a(4549),d=c("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(t){l(this);try{o(t)}catch(n){u(this,"throw",n)}if(d)return r(d,this,t);var e=s(this),a=0;return i(e,function(e,n){if(t(e,a++))return n(e)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},684:function(t){t.exports=function(t,e){var a="function"==typeof Iterator&&Iterator.prototype[t];if(a)try{a.call({next:null},e).next()}catch(n){return!0}}},1385:function(t,e,a){var n=a(9539);t.exports=function(t,e,a){for(var r=t.length-1;r>=0;r--)if(void 0!==t[r])try{a=n(t[r].iterator,e,a)}catch(i){e="throw",a=i}if("throw"===e)throw a;return a}},1526:function(t,e,a){var n=a(1114),r=a(4335);const i=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,o=i||"http://192.168.88.50:5000/api";console.log("API Base URL:",o);class l{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t)),this.axiosInstance.interceptors.response.use(t=>t,t=>(401===t.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)))}get(t,e){return this.axiosInstance.get(t,e)}post(t,e,a){return this.axiosInstance.post(t,e,a)}put(t,e,a){return this.axiosInstance.put(t,e,a)}delete(t,e){return this.axiosInstance.delete(t,e)}patch(t,e,a){return this.axiosInstance.patch(t,e,a)}}e.A=new l},2489:function(t,e,a){var n=a(6518),r=a(9565),i=a(9306),o=a(8551),l=a(1767),s=a(9462),u=a(6319),c=a(6395),d=a(9539),h=a(684),p=a(4549),v=!c&&!h("filter",function(){}),f=!c&&!v&&p("filter",TypeError),g=c||v||f,y=s(function(){var t,e,a,n=this.iterator,i=this.predicate,l=this.next;while(1){if(t=o(r(l,n)),e=this.done=!!t.done,e)return;if(a=t.value,u(n,i,[a,this.counter++],!0))return a}});n({target:"Iterator",proto:!0,real:!0,forced:g},{filter:function(t){o(this);try{i(t)}catch(e){d(this,"throw",e)}return f?r(f,this,t):new y(l(this),{predicate:t})}})},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},4349:function(t,e,a){a.r(e),a.d(e,{default:function(){return w}});a(8111),a(2489),a(116),a(7588);var n=a(1431),r=a(163),i=a(8548),o=a(4749),l=a(6044);const s={class:"pipeline-page"},u={class:"page-header"},c={class:"filters"},d={class:"column-header"},h={class:"column-cards"},p={class:"candidate-header"},v={class:"candidate-subtitle"},f={class:"candidate-actions"},g={class:"candidate-date"};var y=(0,n.pM)({__name:"ApplicationPipeline",setup(t){const e=(0,n.KR)([]),a=(0,n.KR)([]),y=(0,n.KR)({}),_=(0,n.KR)(""),m=(0,n.KR)(""),w=(0,n.KR)(!1),k=[{value:"Ung tuyen",label:"Ứng tuyển"},{value:"So tuyen",label:"Sơ tuyển"},{value:"Phong van",label:"Phỏng vấn"},{value:"Tuyen dung",label:"Tuyển dụng"},{value:"Tu choi",label:"Từ chối"}],A=async()=>{try{const t=await l.A.getAll({limit:200});a.value=t.data||t.items||[]}catch(t){console.error("loadVacancies error",t)}},b=async()=>{w.value=!0;try{const t=await o.A.getAll({limit:500,vacancy_id:_.value||void 0});e.value=t.data||t.items||[];const a={};e.value.forEach(t=>{const e=t.candidate_id;e&&"object"===typeof e&&(a[String(e._id)]=e)}),y.value=a}catch(t){console.error("loadApplications error",t),r.nk.error("Không thể tải pipeline ứng viên")}finally{w.value=!1}},I=t=>{const a=m.value.trim().toLowerCase();return e.value.filter(e=>{if(e.trang_thai!==t)return!1;if(!a)return!0;const n=L(e.candidate_id).toLowerCase();return n.includes(a)})},R=async(t,e)=>{try{await o.A.updateStatus(t._id,e),r.nk.success("Đã cập nhật trạng thái ứng viên"),b()}catch(a){console.error("updateStatus error",a),r.nk.error("Không thể cập nhật trạng thái")}},L=t=>t?"string"===typeof t?y.value[t]?.ho_ten||"---":t.ho_ten||"---":"---",E=t=>t?"string"===typeof t?a.value.find(e=>e._id===t)?.tieu_de||"---":t.tieu_de||"---":"---",x=t=>{const e=t.candidate_id;e?.email&&window.open(`mailto:${e.email}`,"_blank")},S=t=>t?new Date(t).toLocaleDateString("vi-VN"):"--";return A(),b(),(t,e)=>{const r=(0,n.g2)("el-option"),o=(0,n.g2)("el-select"),l=(0,n.g2)("el-icon"),y=(0,n.g2)("el-input"),w=(0,n.g2)("el-button"),A=(0,n.g2)("el-tag"),U=(0,n.g2)("el-empty"),C=(0,n.g2)("el-card"),F=(0,n.g2)("el-col"),B=(0,n.g2)("el-row");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",u,[e[3]||(e[3]=(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,"Pipeline tuyển dụng"),(0,n.Lk)("p",null,"Theo dõi trạng thái ứng viên theo từng vòng")],-1)),(0,n.Lk)("div",c,[(0,n.bF)(o,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"Chọn vị trí",clearable:"",filterable:"",onChange:b},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,t=>((0,n.uX)(),(0,n.Wv)(r,{key:t._id,label:t.tieu_de,value:t._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),(0,n.bF)(y,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),placeholder:"Tìm theo tên ứng viên",clearable:""},{prefix:(0,n.k6)(()=>[(0,n.bF)(l,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,n.R1)(i.Search))]),_:1})]),_:1},8,["modelValue"]),(0,n.bF)(w,{icon:(0,n.R1)(i.Refresh),onClick:b},{default:(0,n.k6)(()=>[...e[2]||(e[2]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"])])]),(0,n.bF)(B,{gutter:16,class:"pipeline-board"},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(k,t=>(0,n.bF)(F,{key:t.value,xs:24,sm:12,lg:4},{default:(0,n.k6)(()=>[(0,n.bF)(C,{class:"pipeline-column",shadow:"never"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",d,[(0,n.Lk)("span",null,(0,n.v_)(t.label),1),(0,n.bF)(A,{size:"small",type:"info"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(I(t.value).length),1)]),_:2},1024)])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",h,[0===I(t.value).length?((0,n.uX)(),(0,n.Wv)(U,{key:0,description:"Chưa có","image-size":80})):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I(t.value),t=>((0,n.uX)(),(0,n.Wv)(C,{key:t._id,class:"candidate-card",shadow:"hover"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",p,[(0,n.Lk)("strong",null,(0,n.v_)(L(t.candidate_id)),1),(0,n.bF)(w,{text:"",type:"primary",size:"small",onClick:e=>x(t)},{default:(0,n.k6)(()=>[...e[4]||(e[4]=[(0,n.eW)(" Xem ",-1)])]),_:1},8,["onClick"])]),(0,n.Lk)("p",v,(0,n.v_)(E(t.vacancy_id)),1),(0,n.Lk)("div",f,[(0,n.bF)(o,{modelValue:t.trang_thai,"onUpdate:modelValue":e=>t.trang_thai=e,size:"small",onChange:e=>R(t,e)},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(k,t=>(0,n.bF)(r,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),(0,n.Lk)("small",g," Cập nhật: "+(0,n.v_)(S(t.ngay_cap_nhat||t.ngay_tao)),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)),64))]),_:1})])}}}),_=a(6262);const m=(0,_.A)(y,[["__scopeId","data-v-d52136f0"]]);var w=m},4749:function(t,e,a){var n=a(1114),r=a(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/recruitment/applications")}async getAll(t){const e=await r.A.get(this.BASE_URL,{params:t});return e.data}async getById(t){const e=await r.A.get(`${this.BASE_URL}/${t}`);return e.data}async create(t){const e=await r.A.post(this.BASE_URL,t);return e.data}async update(t,e){const a=await r.A.put(`${this.BASE_URL}/${t}`,e);return a.data}async updateStatus(t,e,a){const n=await r.A.put(`${this.BASE_URL}/${t}`,{trang_thai:e,ghi_chu:a});return n.data}async delete(t){await r.A.delete(`${this.BASE_URL}/${t}`)}}e.A=new i},6044:function(t,e,a){var n=a(1114),r=a(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/recruitment/vacancies")}async getAll(t){const e=await r.A.get(this.BASE_URL,{params:t});return e.data}async getById(t){const e=await r.A.get(`${this.BASE_URL}/${t}`);return e.data}async create(t){const e=await r.A.post(this.BASE_URL,t);return e.data}async update(t,e){const a=await r.A.put(`${this.BASE_URL}/${t}`,e);return a.data}async delete(t){await r.A.delete(`${this.BASE_URL}/${t}`)}}e.A=new i},6279:function(t,e,a){var n=a(6840);t.exports=function(t,e,a){for(var r in e)n(t,r,e[r],a);return t}},6319:function(t,e,a){var n=a(8551),r=a(9539);t.exports=function(t,e,a,i){try{return i?e(n(a)[0],a[1]):e(a)}catch(o){r(t,"throw",o)}}},7588:function(t,e,a){var n=a(6518),r=a(9565),i=a(2652),o=a(9306),l=a(8551),s=a(1767),u=a(9539),c=a(4549),d=c("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(t){l(this);try{o(t)}catch(n){u(this,"throw",n)}if(d)return r(d,this,t);var e=s(this),a=0;i(e,function(e){t(e,a++)},{IS_RECORD:!0})}})},9462:function(t,e,a){var n=a(9565),r=a(2360),i=a(6699),o=a(6279),l=a(8227),s=a(1181),u=a(5966),c=a(7657).IteratorPrototype,d=a(2529),h=a(9539),p=a(1385),v=l("toStringTag"),f="IteratorHelper",g="WrapForValidIterator",y="normal",_="throw",m=s.set,w=function(t){var e=s.getterFor(t?g:f);return o(r(c),{next:function(){var a=e(this);if(t)return a.nextHandler();if(a.done)return d(void 0,!0);try{var n=a.nextHandler();return a.returnHandlerResult?n:d(n,a.done)}catch(r){throw a.done=!0,r}},return:function(){var a=e(this),r=a.iterator;if(a.done=!0,t){var i=u(r,"return");return i?n(i,r):d(void 0,!0)}if(a.inner)try{h(a.inner.iterator,y)}catch(o){return h(r,_,o)}if(a.openIters)try{p(a.openIters,y)}catch(o){return h(r,_,o)}return r&&h(r,y),d(void 0,!0)}})},k=w(!0),A=w(!1);i(A,v,"Iterator Helper"),t.exports=function(t,e,a){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=e?g:f,r.returnHandlerResult=!!a,r.nextHandler=t,r.counter=0,r.done=!1,m(this,r)};return n.prototype=e?k:A,n}}}]);
//# sourceMappingURL=4349.7351a88a.js.map