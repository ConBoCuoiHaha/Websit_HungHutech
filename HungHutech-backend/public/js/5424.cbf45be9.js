"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[5424],{1114:function(e,a,t){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function n(e,a){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function r(e){var a=n(e,"string");return"symbol"==l(a)?a:a+""}function o(e,a,t){return(a=r(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,{A:function(){return o}})},1526:function(e,a,t){var l=t(1114),n=t(4335);const r=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,o=r||"http://192.168.88.50:5000/api";console.log("API Base URL:",o);class u{constructor(){(0,l.A)(this,"axiosInstance",void 0),this.axiosInstance=n.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,a){return this.axiosInstance.get(e,a)}post(e,a,t){return this.axiosInstance.post(e,a,t)}put(e,a,t){return this.axiosInstance.put(e,a,t)}delete(e,a){return this.axiosInstance.delete(e,a)}patch(e,a,t){return this.axiosInstance.patch(e,a,t)}}a.A=new u},4114:function(e,a,t){var l=t(6518),n=t(8981),r=t(6198),o=t(4527),u=t(6837),i=t(9039),c=i(function(){return 4294967297!==[].push.call({length:4294967296},1)}),s=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},h=c||!s();l({target:"Array",proto:!0,arity:1,forced:h},{push:function(e){var a=n(this),t=r(a),l=arguments.length;u(t+l);for(var i=0;i<l;i++)a[t]=arguments[i],t++;return o(a,t),t}})},4376:function(e,a,t){var l=t(2195);e.exports=Array.isArray||function(e){return"Array"===l(e)}},4527:function(e,a,t){var l=t(3724),n=t(4376),r=TypeError,o=Object.getOwnPropertyDescriptor,u=l&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=u?function(e,a){if(n(e)&&!o(e,"length").writable)throw new r("Cannot set read only .length");return e.length=a}:function(e,a){return e.length=a}},5424:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});t(4114);var l=t(1431),n=t(8548),r=t(163),o=t(7918),u=t(1114),i=t(1526);class c{constructor(){(0,u.A)(this,"BASE_URL","/ngay-le")}async getAll(e){const a=await i.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await i.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await i.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await i.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await i.A.delete(`${this.BASE_URL}/${e}`)}}var s=new c;const h={class:"orangehrm-holiday-page"},g={class:"orangehrm-page-header"},d={class:"orangehrm-page-actions"},p={class:"orangehrm-holiday-name"},_={key:0,class:"orangehrm-holiday-desc"},m={class:"orangehrm-date-cell"},y={class:"orangehrm-pagination"};var b=(0,l.pM)({__name:"HolidayList",setup(e){const a=(0,l.KR)([]),t=(0,l.KR)(!1),u=(0,l.KR)(""),i=(0,l.KR)(!1),c=(0,l.KR)(!1),b=(0,l.KR)(""),f=(0,l.KR)(),v=(0,l.Kh)({currentPage:1,limit:10,total:0}),k=(0,l.Kh)({year:(new Date).getFullYear(),status:"",khu_vuc:""}),F=(0,l.Kh)({ten_ngay_le:"",ngay:"",lap_lai_hang_nam:!1,mo_ta:"",khu_vuc:"Toàn quốc",trang_thai:"Kích hoạt"}),w={ten_ngay_le:[{required:!0,message:"Vui lòng nhập tên ngày lễ",trigger:"blur"},{min:2,max:200,message:"Tên phải từ 2-200 ký tự",trigger:"blur"}],ngay:[{required:!0,message:"Vui lòng chọn ngày",trigger:"change"}],khu_vuc:[{required:!0,message:"Vui lòng chọn khu vực",trigger:"change"}],trang_thai:[{required:!0,message:"Vui lòng chọn trạng thái",trigger:"change"}]},x=(0,l.EW)(()=>{const e=(new Date).getFullYear(),a=[];for(let t=e-5;t<=e+5;t++)a.push(t);return a}),V=async()=>{t.value=!0,u.value="";try{const e={page:v.currentPage,limit:v.limit};k.year&&(e.year=k.year),k.status&&(e.trang_thai=k.status),k.khu_vuc&&(e.khu_vuc=k.khu_vuc);const t=await s.getAll(e);a.value=t.data||[],v.total=t.pagination?.total||0}catch(e){console.error("Error loading holidays:",e),u.value=e.response?.data?.msg||"Không thể tải danh sách ngày lễ",r.nk.error(u.value)}finally{t.value=!1}},T=e=>{v.currentPage=e,V()},C=e=>{v.limit=e,v.currentPage=1,V()},K=()=>{v.currentPage=1,V()},A=()=>{k.year=(new Date).getFullYear(),k.status="",k.khu_vuc="",v.currentPage=1,V()},R=e=>{b.value=e._id,F.ten_ngay_le=e.ten_ngay_le,F.ngay=e.ngay,F.lap_lai_hang_nam=e.lap_lai_hang_nam||!1,F.mo_ta=e.mo_ta||"",F.khu_vuc=e.khu_vuc,F.trang_thai=e.trang_thai,c.value=!0},S=async()=>{f.value&&await f.value.validate(async e=>{if(e){i.value=!0;try{const e={ten_ngay_le:F.ten_ngay_le,ngay:F.ngay,lap_lai_hang_nam:F.lap_lai_hang_nam,mo_ta:F.mo_ta,khu_vuc:F.khu_vuc,trang_thai:F.trang_thai};b.value?(await s.update(b.value,e),r.nk.success("Cập nhật ngày lễ thành công")):(await s.create(e),r.nk.success("Thêm ngày lễ thành công")),U(),await V()}catch(a){console.error("Error saving holiday:",a),r.nk.error(a.response?.data?.msg||"Không thể lưu ngày lễ")}finally{i.value=!1}}})},M=async e=>{try{await o.s.confirm("Bạn có chắc chắn muốn xóa ngày lễ này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await s.delete(e),r.nk.success("Xóa ngày lễ thành công"),await V()}catch(a){"cancel"!==a&&(console.error("Error deleting holiday:",a),r.nk.error(a.response?.data?.msg||"Không thể xóa ngày lễ"))}},U=()=>{c.value=!1,b.value="",f.value&&f.value.resetFields(),F.ten_ngay_le="",F.ngay="",F.lap_lai_hang_nam=!1,F.mo_ta="",F.khu_vuc="Toàn quốc",F.trang_thai="Kích hoạt"},E=e=>{if(!e)return"-";const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),n=a.getFullYear();return`${t}/${l}/${n}`},P=e=>{const a={"Toàn quốc":"","Miền Bắc":"primary","Miền Nam":"success","Miền Trung":"warning"};return a[e]||"info"};return(0,l.sV)(()=>{V()}),(e,r)=>{const o=(0,l.g2)("el-button"),s=(0,l.g2)("el-option"),L=(0,l.g2)("el-select"),B=(0,l.g2)("el-form-item"),q=(0,l.g2)("el-form"),I=(0,l.g2)("el-card"),W=(0,l.g2)("el-table-column"),z=(0,l.g2)("el-icon"),N=(0,l.g2)("el-tag"),Y=(0,l.g2)("el-space"),D=(0,l.g2)("el-table"),$=(0,l.g2)("el-pagination"),j=(0,l.g2)("el-input"),X=(0,l.g2)("el-date-picker"),H=(0,l.g2)("el-col"),O=(0,l.g2)("el-row"),Q=(0,l.g2)("el-checkbox"),G=(0,l.g2)("el-dialog"),J=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",g,[r[15]||(r[15]=(0,l.Lk)("h1",{class:"orangehrm-page-title"},"Quản lý Ngày lễ",-1)),(0,l.Lk)("div",d,[(0,l.bF)(o,{icon:(0,l.R1)(n.Refresh),onClick:V},{default:(0,l.k6)(()=>[...r[13]||(r[13]=[(0,l.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,l.bF)(o,{type:"primary",icon:(0,l.R1)(n.Plus),onClick:r[0]||(r[0]=e=>c.value=!0)},{default:(0,l.k6)(()=>[...r[14]||(r[14]=[(0,l.eW)(" Thêm ngày lễ ",-1)])]),_:1},8,["icon"])])]),(0,l.bF)(I,{class:"orangehrm-filter-card",shadow:"never"},{default:(0,l.k6)(()=>[(0,l.bF)(q,{inline:!0,class:"orangehrm-filter-form"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Năm"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{modelValue:k.year,"onUpdate:modelValue":r[1]||(r[1]=e=>k.year=e),placeholder:"Chọn năm",clearable:"",style:{width:"150px"},onChange:K},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(x.value,e=>((0,l.uX)(),(0,l.Wv)(s,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(B,{label:"Trạng thái"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{modelValue:k.status,"onUpdate:modelValue":r[2]||(r[2]=e=>k.status=e),placeholder:"Chọn trạng thái",clearable:"",style:{width:"180px"},onChange:K},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"Kích hoạt",value:"Kích hoạt"}),(0,l.bF)(s,{label:"Không kích hoạt",value:"Không kích hoạt"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(B,{label:"Khu vực"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{modelValue:k.khu_vuc,"onUpdate:modelValue":r[3]||(r[3]=e=>k.khu_vuc=e),placeholder:"Chọn khu vực",clearable:"",style:{width:"180px"},onChange:K},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"Toàn quốc",value:"Toàn quốc"}),(0,l.bF)(s,{label:"Miền Bắc",value:"Miền Bắc"}),(0,l.bF)(s,{label:"Miền Nam",value:"Miền Nam"}),(0,l.bF)(s,{label:"Miền Trung",value:"Miền Trung"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(o,{icon:(0,l.R1)(n.RefreshLeft),onClick:A},{default:(0,l.k6)(()=>[...r[16]||(r[16]=[(0,l.eW)(" Đặt lại ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(I,{class:"orangehrm-table-card",shadow:"never"},{default:(0,l.k6)(()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(D,{data:a.value,style:{width:"100%"},stripe:"","empty-text":u.value||"Không có dữ liệu"},{default:(0,l.k6)(()=>[(0,l.bF)(W,{type:"index",label:"STT",width:"60"}),(0,l.bF)(W,{prop:"ten_ngay_le",label:"Tên ngày lễ","min-width":"250"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("strong",p,(0,l.v_)(e.ten_ngay_le),1),e.mo_ta?((0,l.uX)(),(0,l.CE)("div",_,(0,l.v_)(e.mo_ta),1)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(W,{label:"Ngày",width:"150"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",m,[(0,l.bF)(z,{style:{"margin-right":"5px"}},{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(n.Calendar))]),_:1}),(0,l.eW)(" "+(0,l.v_)(E(e.ngay)),1)])]),_:1}),(0,l.bF)(W,{prop:"khu_vuc",label:"Khu vực",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(N,{type:P(e.khu_vuc),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.khu_vuc),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(W,{label:"Lặp lại hàng năm",width:"170",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(N,{type:e.lap_lai_hang_nam?"success":"info",size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.lap_lai_hang_nam?"Có":"Không"),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(W,{label:"Trạng thái",width:"150"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(N,{type:"Kích hoạt"===e.trang_thai?"success":"danger",size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.trang_thai),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(W,{label:"Hành động",width:"200",fixed:"right"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(o,{size:"small",icon:(0,l.R1)(n.Edit),onClick:a=>R(e)},{default:(0,l.k6)(()=>[...r[17]||(r[17]=[(0,l.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,l.bF)(o,{size:"small",type:"danger",icon:(0,l.R1)(n.Delete),onClick:a=>M(e._id)},{default:(0,l.k6)(()=>[...r[18]||(r[18]=[(0,l.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","empty-text"])),[[J,t.value]]),(0,l.Lk)("div",y,[(0,l.bF)($,{"current-page":v.currentPage,"onUpdate:currentPage":r[4]||(r[4]=e=>v.currentPage=e),"page-size":v.limit,"onUpdate:pageSize":r[5]||(r[5]=e=>v.limit=e),"page-sizes":[10,20,50,100],total:v.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:C,onCurrentChange:T},null,8,["current-page","page-size","total"])])]),_:1}),(0,l.bF)(G,{modelValue:c.value,"onUpdate:modelValue":r[12]||(r[12]=e=>c.value=e),title:b.value?"Chỉnh sửa ngày lễ":"Thêm ngày lễ mới",width:"650px","close-on-click-modal":!1},{footer:(0,l.k6)(()=>[(0,l.bF)(o,{onClick:U},{default:(0,l.k6)(()=>[...r[20]||(r[20]=[(0,l.eW)("Hủy",-1)])]),_:1}),(0,l.bF)(o,{type:"primary",loading:i.value,onClick:S},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(b.value?"Cập nhật":"Thêm mới"),1)]),_:1},8,["loading"])]),default:(0,l.k6)(()=>[(0,l.bF)(q,{ref_key:"formRef",ref:f,model:F,rules:w,"label-width":"160px","label-position":"left"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Tên ngày lễ",prop:"ten_ngay_le",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(j,{modelValue:F.ten_ngay_le,"onUpdate:modelValue":r[6]||(r[6]=e=>F.ten_ngay_le=e),placeholder:"Vd: Tết Nguyên Đán, Quốc Khánh...",maxlength:"200"},null,8,["modelValue"])]),_:1}),(0,l.bF)(O,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(H,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Ngày",prop:"ngay",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(X,{modelValue:F.ngay,"onUpdate:modelValue":r[7]||(r[7]=e=>F.ngay=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(H,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Khu vực",prop:"khu_vuc",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(L,{modelValue:F.khu_vuc,"onUpdate:modelValue":r[8]||(r[8]=e=>F.khu_vuc=e),placeholder:"Chọn khu vực",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"Toàn quốc",value:"Toàn quốc"}),(0,l.bF)(s,{label:"Miền Bắc",value:"Miền Bắc"}),(0,l.bF)(s,{label:"Miền Nam",value:"Miền Nam"}),(0,l.bF)(s,{label:"Miền Trung",value:"Miền Trung"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(O,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(H,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Trạng thái",prop:"trang_thai",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(L,{modelValue:F.trang_thai,"onUpdate:modelValue":r[9]||(r[9]=e=>F.trang_thai=e),placeholder:"Chọn trạng thái",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"Kích hoạt",value:"Kích hoạt"}),(0,l.bF)(s,{label:"Không kích hoạt",value:"Không kích hoạt"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(H,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Lặp lại hàng năm"},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{modelValue:F.lap_lai_hang_nam,"onUpdate:modelValue":r[10]||(r[10]=e=>F.lap_lai_hang_nam=e),size:"large"},{default:(0,l.k6)(()=>[...r[19]||(r[19]=[(0,l.eW)(" Áp dụng cho mọi năm ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(B,{label:"Mô tả",prop:"mo_ta"},{default:(0,l.k6)(()=>[(0,l.bF)(j,{modelValue:F.mo_ta,"onUpdate:modelValue":r[11]||(r[11]=e=>F.mo_ta=e),type:"textarea",rows:4,placeholder:"Nhập mô tả chi tiết về ngày lễ...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),f=t(6262);const v=(0,f.A)(b,[["__scopeId","data-v-3913f7b2"]]);var k=v},6837:function(e){var a=TypeError,t=9007199254740991;e.exports=function(e){if(e>t)throw a("Maximum allowed index exceeded");return e}}}]);
//# sourceMappingURL=5424.cbf45be9.js.map