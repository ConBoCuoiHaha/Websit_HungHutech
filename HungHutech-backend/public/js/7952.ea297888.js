"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[7952],{1114:function(e,l,a){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,l){if("object"!=n(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var t=a.call(e,l||"default");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}function i(e){var l=t(e,"string");return"symbol"==n(l)?l:l+""}function o(e,l,a){return(l=i(l))in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}a.d(l,{A:function(){return o}})},1526:function(e,l,a){var n=a(1114),t=a(4335);const i=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,o=i||"http://192.168.88.50:5000/api";console.log("API Base URL:",o);class u{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const l=localStorage.getItem("token");return l&&(e.headers.Authorization=`Bearer ${l}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,l){return this.axiosInstance.get(e,l)}post(e,l,a){return this.axiosInstance.post(e,l,a)}put(e,l,a){return this.axiosInstance.put(e,l,a)}delete(e,l){return this.axiosInstance.delete(e,l)}patch(e,l,a){return this.axiosInstance.patch(e,l,a)}}l.A=new u},6262:function(e,l){l.A=(e,l)=>{const a=e.__vccOpts||e;for(const[n,t]of l)a[n]=t;return a}},6416:function(e,l,a){var n=a(1114),t=a(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/recruitment/candidates")}async getAll(e){const l=await t.A.get(this.BASE_URL,{params:e});return l.data}async getById(e){const l=await t.A.get(`${this.BASE_URL}/${e}`);return l.data}async create(e){const l=await t.A.post(this.BASE_URL,e);return l.data}async update(e,l){const a=await t.A.put(`${this.BASE_URL}/${e}`,l);return a.data}async delete(e){await t.A.delete(`${this.BASE_URL}/${e}`)}async importResume(e){const l=await t.A.post(`${this.BASE_URL}/import-resume`,e,{headers:{"Content-Type":"multipart/form-data"}});return l.data}async updatePipelineStage(e,l){const a=await t.A.post(`${this.BASE_URL}/${e}/pipeline`,l);return a.data}async searchPool(e){const l=await t.A.get(`${this.BASE_URL}/pool/search`,{params:e});return l.data}}l.A=new i},7952:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var n=a(1431),t=a(163),i=a(8548),o=a(6416);const u={class:"candidate-pool-page"},r={class:"page-header"},s={class:"page-actions"},c={class:"candidate-cell"},p={key:0},d={class:"table-pagination"},g={class:"candidate-summary"},m={class:"import-wrapper"};var _=(0,n.pM)({__name:"CandidatePool",setup(e){const l=[{value:"CV_moi",label:"CV mới"},{value:"Screening",label:"Sàng lọc"},{value:"Phong_van_v1",label:"Phỏng vấn vòng 1"},{value:"Phong_van_v2",label:"Phỏng vấn vòng 2"},{value:"Offer",label:"Offer"},{value:"Hired",label:"Đã nhận việc"},{value:"Rejected",label:"Không phù hợp"}],a=["JavaScript","Node.js","Vue.js","React","Python","HR Operations","Communication","Leadership"],_=["Talent Pool","Referral","Ưu tiên","Senior"],v=(0,n.KR)([]),h=(0,n.KR)(!1),b=(0,n.KR)(""),k=(0,n.KR)(!1),f=(0,n.KR)(null),y=(0,n.Kh)({pipeline_stage:"",ky_nang:[],min_score:0,min_exp:0}),F=(0,n.Kh)({page:1,limit:10,total:0}),w=(0,n.KR)(!1),C=(0,n.KR)(!1),V=(0,n.KR)(null),L=(0,n.KR)(null),A=(0,n.Kh)({pipeline_stage:"CV_moi",tags:[],vi_tri_mong_muon:""}),K=async()=>{h.value=!0;try{const e={page:F.page,limit:F.limit,min_score:y.min_score||void 0,min_exp:y.min_exp||void 0};y.pipeline_stage&&(e.pipeline_stage=y.pipeline_stage),y.ky_nang.length&&(e.ky_nang=y.ky_nang.join(","));const l=await o.A.searchPool(e);v.value=l.data||[],F.total=l.pagination.total}catch(e){console.error("loadPool error",e),t.nk.error(e.response?.data?.msg||"Không thể tải candidate pool")}finally{h.value=!1}},R=()=>{F.page=1,K()},S=e=>{F.page=e,K()},x=async(e,l)=>{b.value=e._id;try{const a=await o.A.updatePipelineStage(e._id,{stage:l});Object.assign(e,a),t.nk.success("Đã cập nhật pipeline")}catch(a){console.error("handlePipelineChange error",a),t.nk.error(a.response?.data?.msg||"Không thể cập nhật pipeline")}finally{b.value=""}},E=e=>{f.value=e,k.value=!0},I=()=>{w.value=!0,V.value=null,L.value=null,A.pipeline_stage="CV_moi",A.tags=[],A.vi_tri_mong_muon=""},P=e=>{const l=e.target,a=l.files?.[0];L.value=a||null,V.value=null},U=async()=>{if(L.value){C.value=!0;try{const e=new FormData;e.append("cv",L.value),e.append("pipeline_stage",A.pipeline_stage),e.append("vi_tri_mong_muon",A.vi_tri_mong_muon),A.tags.length&&e.append("tags",A.tags.join(","));const l=await o.A.importResume(e);V.value=l,t.nk.success("Đã bóc tách CV thành công"),K()}catch(e){console.error("submitImport",e),t.nk.error(e.response?.data?.msg||"Không thể bóc tách CV")}finally{C.value=!1}}else t.nk.warning("Vui lòng chọn file CV")};return K(),(e,t)=>{const o=(0,n.g2)("el-button"),L=(0,n.g2)("el-option"),B=(0,n.g2)("el-select"),W=(0,n.g2)("el-form-item"),X=(0,n.g2)("el-input-number"),j=(0,n.g2)("el-form"),$=(0,n.g2)("el-card"),T=(0,n.g2)("el-table-column"),H=(0,n.g2)("el-tag"),z=(0,n.g2)("el-space"),O=(0,n.g2)("el-table"),D=(0,n.g2)("el-pagination"),N=(0,n.g2)("el-dialog"),Q=(0,n.g2)("el-input"),G=(0,n.g2)("el-alert"),J=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",r,[t[14]||(t[14]=(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,"Candidate Pool"),(0,n.Lk)("p",null,"Bóc tách CV tự động và tìm ứng viên theo kỹ năng/điểm số.")],-1)),(0,n.Lk)("div",s,[(0,n.bF)(o,{icon:(0,n.R1)(i.Refresh),onClick:K},{default:(0,n.k6)(()=>[...t[12]||(t[12]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,n.bF)(o,{type:"primary",icon:(0,n.R1)(i.Upload),onClick:I},{default:(0,n.k6)(()=>[...t[13]||(t[13]=[(0,n.eW)(" Bóc tách CV ",-1)])]),_:1},8,["icon"])])]),(0,n.bF)($,{shadow:"never",class:"filter-card"},{default:(0,n.k6)(()=>[(0,n.bF)(j,{inline:!0,onSubmit:t[4]||(t[4]=(0,n.D$)(()=>{},["prevent"]))},{default:(0,n.k6)(()=>[(0,n.bF)(W,{label:"Pipeline"},{default:(0,n.k6)(()=>[(0,n.bF)(B,{modelValue:y.pipeline_stage,"onUpdate:modelValue":t[0]||(t[0]=e=>y.pipeline_stage=e),placeholder:"Tất cả",clearable:"",onChange:R},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(l,e=>(0,n.bF)(L,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(W,{label:"Kỹ năng"},{default:(0,n.k6)(()=>[(0,n.bF)(B,{modelValue:y.ky_nang,"onUpdate:modelValue":t[1]||(t[1]=e=>y.ky_nang=e),multiple:"","collapse-tags":"",filterable:"","allow-create":"","default-first-option":"",placeholder:"VD: JavaScript, HR...",onChange:R},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(a,e=>(0,n.bF)(L,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(W,{label:"Điểm tối thiểu"},{default:(0,n.k6)(()=>[(0,n.bF)(X,{modelValue:y.min_score,"onUpdate:modelValue":t[2]||(t[2]=e=>y.min_score=e),min:0,max:100,onChange:R},null,8,["modelValue"])]),_:1}),(0,n.bF)(W,{label:"Kinh nghiệm (năm)"},{default:(0,n.k6)(()=>[(0,n.bF)(X,{modelValue:y.min_exp,"onUpdate:modelValue":t[3]||(t[3]=e=>y.min_exp=e),min:0,max:30,onChange:R},null,8,["modelValue"])]),_:1}),(0,n.bF)(W,null,{default:(0,n.k6)(()=>[(0,n.bF)(o,{type:"primary",icon:(0,n.R1)(i.Search),onClick:R},{default:(0,n.k6)(()=>[...t[15]||(t[15]=[(0,n.eW)(" Lọc ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1}),(0,n.bF)($,{shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(O,{data:v.value,"empty-text":h.value?"Đang tải...":"Chưa có dữ liệu"},{default:(0,n.k6)(()=>[(0,n.bF)(T,{type:"index",width:"60"}),(0,n.bF)(T,{prop:"ho_ten",label:"Ứng viên","min-width":"200"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("div",c,[(0,n.Lk)("strong",null,(0,n.v_)(e.ho_ten),1),(0,n.Lk)("span",null,(0,n.v_)(e.email),1)])]),_:1}),(0,n.bF)(T,{label:"Pipeline","min-width":"180"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(B,{size:"small","model-value":e.pipeline_stage,disabled:b.value===e._id,onChange:l=>x(e,l)},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(l,e=>(0,n.bF)(L,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["model-value","disabled","onChange"])]),_:1}),(0,n.bF)(T,{label:"Kỹ năng","min-width":"220"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(z,{wrap:""},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.ky_nang||[],e=>((0,n.uX)(),(0,n.Wv)(H,{key:e,type:"success",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e),1)]),_:2},1024))),128)),e.ky_nang&&0!==e.ky_nang.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",p,"-"))]),_:2},1024)]),_:1}),(0,n.bF)(T,{prop:"score",label:"Score",width:"120"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(H,{type:e.score&&e.score>=60?"success":"info"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.score??0),1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(T,{prop:"kinh_nghiem_nam",label:"Kinh nghiệm",width:"140"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.kinh_nghiem_nam??0)+" năm ",1)]),_:1}),(0,n.bF)(T,{label:"Tóm tắt","min-width":"200"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(o,{type:"primary",text:"",size:"small",onClick:l=>E(e)},{default:(0,n.k6)(()=>[...t[16]||(t[16]=[(0,n.eW)(" Xem chi tiết ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","empty-text"])),[[J,h.value]]),(0,n.Lk)("div",d,[(0,n.bF)(D,{background:"",layout:"total, prev, pager, next",total:F.total,"page-size":F.limit,"current-page":F.page,onCurrentChange:S},null,8,["total","page-size","current-page"])])]),_:1}),(0,n.bF)(N,{modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=e=>k.value=e),title:"Thông tin ứng viên",width:"520px"},{footer:(0,n.k6)(()=>[(0,n.bF)(o,{onClick:t[5]||(t[5]=e=>k.value=!1)},{default:(0,n.k6)(()=>[...t[22]||(t[22]=[(0,n.eW)("Đóng",-1)])]),_:1})]),default:(0,n.k6)(()=>[f.value?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("p",null,[t[17]||(t[17]=(0,n.Lk)("strong",null,"Email:",-1)),(0,n.eW)(" "+(0,n.v_)(f.value.email),1)]),(0,n.Lk)("p",null,[t[18]||(t[18]=(0,n.Lk)("strong",null,"Điện thoại:",-1)),(0,n.eW)(" "+(0,n.v_)(f.value.dien_thoai||"-"),1)]),(0,n.Lk)("p",null,[t[19]||(t[19]=(0,n.Lk)("strong",null,"Kỹ năng:",-1)),(0,n.eW)(" "+(0,n.v_)((f.value.ky_nang||[]).join(", ")||"-"),1)]),t[20]||(t[20]=(0,n.Lk)("p",null,[(0,n.Lk)("strong",null,"Tóm tắt:")],-1)),(0,n.Lk)("p",g,(0,n.v_)(f.value.parsed_fields?.tom_tat||f.value.ghi_chu||"Chưa có thông tin"),1),t[21]||(t[21]=(0,n.Lk)("p",null,[(0,n.Lk)("strong",null,"Kinh nghiệm nổi bật:")],-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value.parsed_fields?.kinh_nghiem||[],e=>((0,n.uX)(),(0,n.CE)("li",{key:e},(0,n.v_)(e),1))),128))])],64)):(0,n.Q3)("",!0)]),_:1},8,["modelValue"]),(0,n.bF)(N,{modelValue:w.value,"onUpdate:modelValue":t[11]||(t[11]=e=>w.value=e),title:"Bóc tách CV tự động",width:"600px"},{footer:(0,n.k6)(()=>[(0,n.bF)(o,{onClick:t[10]||(t[10]=e=>w.value=!1)},{default:(0,n.k6)(()=>[...t[23]||(t[23]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(o,{type:"primary",loading:C.value,onClick:U},{default:(0,n.k6)(()=>[...t[24]||(t[24]=[(0,n.eW)(" Bóc tách ",-1)])]),_:1},8,["loading"])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",m,[(0,n.Lk)("input",{type:"file",accept:".pdf,.doc,.docx,.txt",onChange:P},null,32),(0,n.bF)(j,{"label-width":"160px"},{default:(0,n.k6)(()=>[(0,n.bF)(W,{label:"Pipeline ban đầu"},{default:(0,n.k6)(()=>[(0,n.bF)(B,{modelValue:A.pipeline_stage,"onUpdate:modelValue":t[7]||(t[7]=e=>A.pipeline_stage=e)},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(l,e=>(0,n.bF)(L,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(W,{label:"Tags"},{default:(0,n.k6)(()=>[(0,n.bF)(B,{modelValue:A.tags,"onUpdate:modelValue":t[8]||(t[8]=e=>A.tags=e),multiple:"","allow-create":"","collapse-tags":"",placeholder:"VD: Talent, Backend"},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(_,e=>(0,n.bF)(L,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)(W,{label:"Vị trí mong muốn"},{default:(0,n.k6)(()=>[(0,n.bF)(Q,{modelValue:A.vi_tri_mong_muon,"onUpdate:modelValue":t[9]||(t[9]=e=>A.vi_tri_mong_muon=e),placeholder:"VD: Backend Engineer"},null,8,["modelValue"])]),_:1})]),_:1}),V.value?((0,n.uX)(),(0,n.Wv)(G,{key:0,type:"success",closable:!1,class:"import-preview"},{title:(0,n.k6)(()=>[(0,n.eW)(" Đã tạo ứng viên: "+(0,n.v_)(V.value.ho_ten)+" ("+(0,n.v_)(V.value.email)+") ",1)]),default:(0,n.k6)(()=>[(0,n.Lk)("p",null,"Score: "+(0,n.v_)(V.value.score??0),1),(0,n.Lk)("p",null," Kỹ năng được bóc tách: "+(0,n.v_)((V.value.ky_nang||[]).join(", ")||"Chưa xác định"),1)]),_:1})):(0,n.Q3)("",!0)])]),_:1},8,["modelValue"])])}}}),v=a(6262);const h=(0,v.A)(_,[["__scopeId","data-v-0a6eeeeb"]]);var b=h}}]);
//# sourceMappingURL=7952.ea297888.js.map