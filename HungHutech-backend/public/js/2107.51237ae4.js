"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[2107],{1106:function(e,a,t){t.r(a),t.d(a,{default:function(){return aa}});var l=t(1431),n=t(8548),i=t(163),o=t(9395),r=t(6604),u=t(5086),s=t(6576),c=t(8487),d=t(1910),g=t(2831),h=t(7340),_=t(9646),p=t(1851),y=t(142),m=t(3405),v=t(1289),b=t(2783),k=t(3306);const f={class:"my-documents"},w={class:"my-documents__filters"},F={key:0},A={key:1},L={class:"pagination"};var R=(0,l.pM)({__name:"EmployeeMyDocuments",setup(e){const a=(0,l.KR)(!1),t=(0,l.KR)([]),i=(0,l.Kh)({page:1,limit:10,total:0}),o=(0,l.Kh)({folder:"",q:""}),r=[{label:"Hồ sơ lao động",value:"ho_so_lao_dong"},{label:"Hồ sơ BHXH",value:"ho_so_bhxh"},{label:"Hồ sơ nội bộ",value:"ho_so_noi_bo"},{label:"Hồ sơ pháp lý",value:"ho_so_phap_ly"}],s=e=>r.find(a=>a.value===e)?.label||e,c=e=>e?new Date(e).toLocaleDateString("vi-VN"):"---",d=async()=>{a.value=!0;try{const e=await k.A.getMy({page:i.page,limit:i.limit,folder:o.folder||void 0,q:o.q||void 0});t.value=e.data,i.total=e.pagination.total}catch(e){console.error("loadDocuments error",e)}finally{a.value=!1}},g=e=>{i.page=e,d()},h=e=>{if(e.file_url){const a=u.A.getFileUrl(e.file_url)||e.file_url;window.open(a,"_blank")}};return(0,l.sV)(()=>{d()}),(e,u)=>{const _=(0,l.g2)("el-option"),p=(0,l.g2)("el-select"),y=(0,l.g2)("el-input"),m=(0,l.g2)("el-table-column"),v=(0,l.g2)("el-tag"),b=(0,l.g2)("el-button"),k=(0,l.g2)("el-table"),R=(0,l.g2)("el-pagination"),E=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",f,[(0,l.Lk)("div",w,[(0,l.bF)(p,{modelValue:o.folder,"onUpdate:modelValue":u[0]||(u[0]=e=>o.folder=e),placeholder:"Tất cả thư mục",clearable:"",onChange:d},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(r,e=>(0,l.bF)(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),(0,l.bF)(y,{modelValue:o.q,"onUpdate:modelValue":u[1]||(u[1]=e=>o.q=e),placeholder:"Tìm tên tài liệu",clearable:"","prefix-icon":(0,l.R1)(n.Search),onClear:d,onKeyup:(0,l.jR)(d,["enter","native"])},null,8,["modelValue","prefix-icon"])]),(0,l.bF)(k,{data:t.value,border:"","empty-text":a.value?"Đang tải...":"Chưa có tài liệu"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{prop:"tieu_de",label:"Tên tài liệu","min-width":"220"}),(0,l.bF)(m,{label:"Thư mục",width:"160"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(v,{type:"info"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(s(e.folder)),1)]),_:2},1024)]),_:1}),(0,l.bF)(m,{label:"Hiệu lực","min-width":"200"},{default:(0,l.k6)(({row:e})=>[e.ngay_hieu_luc?((0,l.uX)(),(0,l.CE)("span",F,(0,l.v_)(c(e.ngay_hieu_luc))+" - "+(0,l.v_)(e.ngay_het_han?c(e.ngay_het_han):"Không rõ"),1)):((0,l.uX)(),(0,l.CE)("span",A,"---"))]),_:1}),(0,l.bF)(m,{label:"Hành động",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(b,{type:"primary",link:"",icon:(0,l.R1)(n.Download),onClick:a=>h(e)},{default:(0,l.k6)(()=>[...u[2]||(u[2]=[(0,l.eW)(" Tải xuống ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data","empty-text"]),(0,l.Lk)("div",L,[(0,l.bF)(R,{background:"",layout:"total, prev, pager, next",total:i.total,"current-page":i.page,"page-size":i.limit,onCurrentChange:g},null,8,["total","current-page","page-size"])])])),[[E,a.value]])}}}),E=t(6262);const C=(0,E.A)(R,[["__scopeId","data-v-58b96d29"]]);var S=C,K=t(4353),U=t.n(K),B=t(6126),V=t(8303);const W={class:"my-leave"},T={class:"my-leave__actions"},$={key:1},D={class:"pagination"};var x=(0,l.pM)({__name:"EmployeeMyLeaveRequests",setup(e){const a=(0,l.KR)(!1),t=(0,l.KR)([]),o=(0,l.Kh)({page:1,limit:10,total:0}),r=(0,l.Kh)({trang_thai:""}),u=(0,l.KR)(""),s=(0,l.KR)(!1),c=(0,l.KR)(),d=(0,l.KR)(!1),g=(0,l.KR)([]),h=(0,l.Kh)({loai_ngay_nghi_id:"",dateRange:[],ly_do:""}),_={loai_ngay_nghi_id:[{required:!0,message:"Chọn loại ngày nghỉ",trigger:"change"}],dateRange:[{required:!0,message:"Chọn khoảng thời gian",trigger:"change"}]},p=e=>"Da duyet"===e?"success":"Bi tu choi"===e?"danger":"Da huy"===e?"info":"warning",y=e=>{switch(e){case"Cho duyet":return"Chờ duyệt";case"Da duyet":return"Đã duyệt";case"Bi tu choi":return"Bị từ chối";case"Da huy":return"Đã hủy";default:return e}},m=e=>e?new Date(e).toLocaleDateString("vi-VN"):"---",v=async()=>{a.value=!0;try{const e=await B.A.getMy({page:o.page,limit:o.limit,trang_thai:r.trang_thai||void 0});t.value=e.data,o.total=e.pagination.total}catch(e){i.nk.error(e.response?.data?.msg||"Không thể tải danh sách")}finally{a.value=!1}},b=async()=>{try{const e=await V.A.getAll({limit:100});g.value=e.items||[]}catch{g.value=[]}},k=e=>{o.page=e,v()},f=()=>{h.loai_ngay_nghi_id="",h.dateRange=[],h.ly_do="",s.value=!0},w=()=>{if(2!==h.dateRange.length)return 0;const e=U()(h.dateRange[0]),a=U()(h.dateRange[1]);return a.diff(e,"day")+1},F=async()=>{if(c.value){try{await c.value.validate()}catch{return}d.value=!0;try{await B.A.create({loai_ngay_nghi_id:h.loai_ngay_nghi_id,ngay_bat_dau:h.dateRange[0],ngay_ket_thuc:h.dateRange[1],so_ngay:w(),ly_do:h.ly_do}),i.nk.success("Đã gửi yêu cầu nghỉ phép"),s.value=!1,v()}catch(e){i.nk.error(e.response?.data?.msg||"Không thể gửi yêu cầu")}finally{d.value=!1}}},A=async e=>{try{u.value=e,await B.A.cancel(e),i.nk.success("Đã hủy yêu cầu"),v()}catch(a){i.nk.error(a.response?.data?.msg||"Không thể hủy yêu cầu")}finally{u.value=""}};return(0,l.sV)(()=>{b(),v()}),(e,i)=>{const b=(0,l.g2)("el-option"),w=(0,l.g2)("el-select"),L=(0,l.g2)("el-button"),R=(0,l.g2)("el-table-column"),E=(0,l.g2)("el-tag"),C=(0,l.g2)("el-table"),S=(0,l.g2)("el-pagination"),K=(0,l.g2)("el-form-item"),U=(0,l.g2)("el-date-picker"),B=(0,l.g2)("el-input"),V=(0,l.g2)("el-form"),x=(0,l.g2)("el-dialog"),N=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",T,[(0,l.bF)(w,{modelValue:r.trang_thai,"onUpdate:modelValue":i[0]||(i[0]=e=>r.trang_thai=e),placeholder:"Tất cả trạng thái",clearable:"",onChange:v,style:{width:"200px"}},{default:(0,l.k6)(()=>[(0,l.bF)(b,{label:"Tất cả",value:""}),(0,l.bF)(b,{label:"Chờ duyệt",value:"Cho duyet"}),(0,l.bF)(b,{label:"Đang xử lý",value:"InProgress",disabled:""}),(0,l.bF)(b,{label:"Đã duyệt",value:"Da duyet"}),(0,l.bF)(b,{label:"Bị từ chối",value:"Bi tu choi"}),(0,l.bF)(b,{label:"Đã hủy",value:"Da huy"})]),_:1},8,["modelValue"]),(0,l.bF)(L,{type:"primary",icon:(0,l.R1)(n.Plus),onClick:f},{default:(0,l.k6)(()=>[...i[6]||(i[6]=[(0,l.eW)(" Gửi yêu cầu nghỉ phép ",-1)])]),_:1},8,["icon"])]),(0,l.bF)(C,{data:t.value,border:"","empty-text":a.value?"Đang tải...":"Chưa có yêu cầu"},{default:(0,l.k6)(()=>[(0,l.bF)(R,{label:"Loại","min-width":"200"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(e.loai_ngay_nghi_id?.ten||"---"),1)]),_:1}),(0,l.bF)(R,{label:"Từ - Đến","min-width":"220"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(m(e.ngay_bat_dau))+" - "+(0,l.v_)(m(e.ngay_ket_thuc)),1)]),_:1}),(0,l.bF)(R,{prop:"so_ngay",label:"Số ngày",width:"100"}),(0,l.bF)(R,{label:"Trạng thái",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(E,{type:p(e.trang_thai)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(y(e.trang_thai)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(R,{label:"Hành động",width:"160"},{default:(0,l.k6)(({row:e})=>["Cho duyet"===e.trang_thai?((0,l.uX)(),(0,l.Wv)(L,{key:0,type:"danger",link:"",size:"small",loading:u.value===e._id,onClick:a=>A(e._id)},{default:(0,l.k6)(()=>[...i[7]||(i[7]=[(0,l.eW)(" Hủy yêu cầu ",-1)])]),_:1},8,["loading","onClick"])):((0,l.uX)(),(0,l.CE)("span",$,"--"))]),_:1})]),_:1},8,["data","empty-text"]),(0,l.Lk)("div",D,[(0,l.bF)(S,{background:"",layout:"total, prev, pager, next",total:o.total,"current-page":o.page,"page-size":o.limit,onCurrentChange:k},null,8,["total","current-page","page-size"])]),(0,l.bF)(x,{modelValue:s.value,"onUpdate:modelValue":i[5]||(i[5]=e=>s.value=e),title:"Gửi yêu cầu nghỉ phép",width:"520px"},{footer:(0,l.k6)(()=>[(0,l.bF)(L,{onClick:i[4]||(i[4]=e=>s.value=!1)},{default:(0,l.k6)(()=>[...i[8]||(i[8]=[(0,l.eW)("Hủy",-1)])]),_:1}),(0,l.bF)(L,{type:"primary",loading:d.value,onClick:F},{default:(0,l.k6)(()=>[...i[9]||(i[9]=[(0,l.eW)(" Gửi yêu cầu ",-1)])]),_:1},8,["loading"])]),default:(0,l.k6)(()=>[(0,l.bF)(V,{model:h,rules:_,ref_key:"formRef",ref:c,"label-width":"150px"},{default:(0,l.k6)(()=>[(0,l.bF)(K,{label:"Loại ngày nghỉ",prop:"loai_ngay_nghi_id"},{default:(0,l.k6)(()=>[(0,l.bF)(w,{modelValue:h.loai_ngay_nghi_id,"onUpdate:modelValue":i[1]||(i[1]=e=>h.loai_ngay_nghi_id=e),placeholder:"Chọn loại",filterable:""},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.value,e=>((0,l.uX)(),(0,l.Wv)(b,{key:e._id,label:e.ten,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(K,{label:"Khoảng thời gian",prop:"dateRange"},{default:(0,l.k6)(()=>[(0,l.bF)(U,{modelValue:h.dateRange,"onUpdate:modelValue":i[2]||(i[2]=e=>h.dateRange=e),type:"daterange","unlink-panels":"","range-separator":"Đến","start-placeholder":"Ngày bắt đầu","end-placeholder":"Ngày kết thúc",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,l.bF)(K,{label:"Lý do",prop:"ly_do"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{modelValue:h.ly_do,"onUpdate:modelValue":i[3]||(i[3]=e=>h.ly_do=e),type:"textarea",placeholder:"Nhập lý do",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])),[[N,a.value]])}}});const N=(0,E.A)(x,[["__scopeId","data-v-7db2246f"]]);var M=N,X=t(7927);const Y={class:"my-overtime"},H={class:"header"},z={class:"filters"},I={key:1},q={class:"pagination"};var O=(0,l.pM)({__name:"EmployeeMyOvertime",setup(e){const a=(0,l.KR)([]),t=(0,l.KR)(!1),o=(0,l.KR)(!1),r=(0,l.KR)(!1),u=(0,l.KR)(""),s=(0,l.Kh)({page:1,limit:10,total:0}),c=(0,l.Kh)({trang_thai:""}),d=(0,l.KR)(),g=(0,l.Kh)({ngay:"",gio_bat_dau:"",gio_ket_thuc:"",ly_do:""}),h={ngay:[{required:!0,message:"Vui lòng chọn ngày",trigger:"change"}],gio_bat_dau:[{required:!0,message:"Nhập giờ bắt đầu"}],gio_ket_thuc:[{required:!0,message:"Nhập giờ kết thúc"}]},_=e=>{switch(e){case"Da duyet":return"Đã duyệt";case"Bi tu choi":return"Bị từ chối";case"Da huy":return"Đã hủy";default:return"Chờ duyệt"}},p=e=>"Da duyet"===e?"success":"Bi tu choi"===e?"danger":"Da huy"===e?"info":"warning",y=e=>{if(!e)return"Ngày thường";switch(e){case"holiday":return"Lễ/Tết";case"holiday_night":return"Lễ/Tết đêm";case"weekend":return"Ngày nghỉ";case"weekend_night":return"Ngày nghỉ đêm";case"weekday_night":return"Ngày thường đêm";default:return"Ngày thường"}},m=e=>e?new Date(e).toLocaleDateString("vi-VN"):"---",v=e=>{if(!e)return"--:--";const a=new Date(e);return Number.isNaN(a.getTime())?e:a.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})},b=e=>`${v(e.thoi_gian_bat_dau)} - ${v(e.thoi_gian_ket_thuc)}`,k=async()=>{t.value=!0;try{const e=await X.A.getMy({page:s.page,limit:s.limit,trang_thai:c.trang_thai||void 0});a.value=e.data,s.total=e.pagination.total}catch(e){i.nk.error(e.response?.data?.msg||"Không thể tải danh sách tăng ca")}finally{t.value=!1}},f=e=>{s.page=e,k()},w=()=>{s.page=1,k()},F=()=>{g.ngay="",g.gio_bat_dau="",g.gio_ket_thuc="",g.ly_do="",o.value=!0},A=async()=>{if(d.value){try{await d.value.validate()}catch{return}r.value=!0;try{await X.A.create({ngay:g.ngay,gio_bat_dau:g.gio_bat_dau,gio_ket_thuc:g.gio_ket_thuc,ly_do:g.ly_do}),i.nk.success("Đã gửi yêu cầu tăng ca"),o.value=!1,k()}catch(e){i.nk.error(e.response?.data?.msg||"Không thể gửi yêu cầu")}finally{r.value=!1}}},L=async e=>{try{u.value=e,await X.A.cancel(e),i.nk.success("Đã hủy yêu cầu tăng ca"),k()}catch(a){i.nk.error(a.response?.data?.msg||"Không thể hủy yêu cầu")}finally{u.value=""}};return k(),(e,i)=>{const v=(0,l.g2)("el-option"),k=(0,l.g2)("el-select"),R=(0,l.g2)("el-button"),E=(0,l.g2)("el-table-column"),C=(0,l.g2)("el-tag"),S=(0,l.g2)("el-table"),K=(0,l.g2)("el-pagination"),U=(0,l.g2)("el-date-picker"),B=(0,l.g2)("el-form-item"),V=(0,l.g2)("el-time-picker"),W=(0,l.g2)("el-input"),T=(0,l.g2)("el-alert"),$=(0,l.g2)("el-form"),D=(0,l.g2)("el-dialog"),x=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",Y,[(0,l.Lk)("div",H,[(0,l.Lk)("div",z,[(0,l.bF)(k,{modelValue:c.trang_thai,"onUpdate:modelValue":i[0]||(i[0]=e=>c.trang_thai=e),placeholder:"Trạng thái",clearable:"",onChange:w},{default:(0,l.k6)(()=>[(0,l.bF)(v,{label:"Tất cả",value:""}),(0,l.bF)(v,{label:"Chờ duyệt",value:"Cho duyet"}),(0,l.bF)(v,{label:"Đã duyệt",value:"Da duyet"}),(0,l.bF)(v,{label:"Bị từ chối",value:"Bi tu choi"}),(0,l.bF)(v,{label:"Đã hủy",value:"Da huy"})]),_:1},8,["modelValue"])]),(0,l.bF)(R,{type:"primary",icon:(0,l.R1)(n.Plus),onClick:F},{default:(0,l.k6)(()=>[...i[7]||(i[7]=[(0,l.eW)(" Đăng ký tăng ca ",-1)])]),_:1},8,["icon"])]),(0,l.bF)(S,{data:a.value,border:"","empty-text":t.value?"Đang tải...":"Chưa có yêu cầu"},{default:(0,l.k6)(()=>[(0,l.bF)(E,{prop:"ngay",label:"Ngày",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(m(e.ngay)),1)]),_:1}),(0,l.bF)(E,{label:"Khoảng thời gian","min-width":"200"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(b(e)),1)]),_:1}),(0,l.bF)(E,{prop:"so_gio",label:"Số giờ",width:"100"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(e.so_gio?.toFixed(2))+"h ",1)]),_:1}),(0,l.bF)(E,{label:"Loại","min-width":"160"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(y(e.loai_ngay)),1)]),_:1}),(0,l.bF)(E,{label:"Trạng thái",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(C,{type:p(e.trang_thai)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(_(e.trang_thai)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(E,{label:"Hành động",width:"160",align:"center"},{default:(0,l.k6)(({row:e})=>["Cho duyet"===e.trang_thai?((0,l.uX)(),(0,l.Wv)(R,{key:0,type:"danger",link:"",size:"small",loading:u.value===e._id,onClick:a=>L(e._id)},{default:(0,l.k6)(()=>[...i[8]||(i[8]=[(0,l.eW)(" Hủy yêu cầu ",-1)])]),_:1},8,["loading","onClick"])):((0,l.uX)(),(0,l.CE)("span",I,"--"))]),_:1})]),_:1},8,["data","empty-text"]),(0,l.Lk)("div",q,[(0,l.bF)(K,{background:"",layout:"total, prev, pager, next",total:s.total,"page-size":s.limit,"current-page":s.page,onCurrentChange:f},null,8,["total","page-size","current-page"])]),(0,l.bF)(D,{modelValue:o.value,"onUpdate:modelValue":i[6]||(i[6]=e=>o.value=e),title:"Đăng ký tăng ca",width:"520px"},{footer:(0,l.k6)(()=>[(0,l.bF)(R,{onClick:i[5]||(i[5]=e=>o.value=!1)},{default:(0,l.k6)(()=>[...i[9]||(i[9]=[(0,l.eW)("Hủy",-1)])]),_:1}),(0,l.bF)(R,{type:"primary",loading:r.value,onClick:A},{default:(0,l.k6)(()=>[...i[10]||(i[10]=[(0,l.eW)(" Gửi yêu cầu ",-1)])]),_:1},8,["loading"])]),default:(0,l.k6)(()=>[(0,l.bF)($,{model:g,rules:h,ref_key:"formRef",ref:d,"label-width":"160px"},{default:(0,l.k6)(()=>[(0,l.bF)(B,{label:"Ngày tăng ca",prop:"ngay"},{default:(0,l.k6)(()=>[(0,l.bF)(U,{modelValue:g.ngay,"onUpdate:modelValue":i[1]||(i[1]=e=>g.ngay=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,l.bF)(B,{label:"Giờ bắt đầu",prop:"gio_bat_dau"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{modelValue:g.gio_bat_dau,"onUpdate:modelValue":i[2]||(i[2]=e=>g.gio_bat_dau=e),placeholder:"HH:mm",format:"HH:mm","value-format":"HH:mm",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,l.bF)(B,{label:"Giờ kết thúc",prop:"gio_ket_thuc"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{modelValue:g.gio_ket_thuc,"onUpdate:modelValue":i[3]||(i[3]=e=>g.gio_ket_thuc=e),placeholder:"HH:mm",format:"HH:mm","value-format":"HH:mm",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,l.bF)(B,{label:"Lý do",prop:"ly_do"},{default:(0,l.k6)(()=>[(0,l.bF)(W,{modelValue:g.ly_do,"onUpdate:modelValue":i[4]||(i[4]=e=>g.ly_do=e),type:"textarea",rows:3,placeholder:"Mô tả công việc tăng ca"},null,8,["modelValue"])]),_:1}),(0,l.bF)(T,{title:"Lưu ý",type:"info",closable:!1,description:"Hệ thống tự động kiểm tra giờ tăng ca theo giới hạn: tối đa 4h/ngày, 40h/tháng, 300h/năm."})]),_:1},8,["model"])]),_:1},8,["modelValue"])])),[[x,t.value]])}}});const P=(0,E.A)(O,[["__scopeId","data-v-204355b7"]]);var Q=P,G=t(9088);const j={class:"employee-daily-summary"},J={class:"summary-toolbar"},Z={class:"summary-toolbar__filters"},ee={class:"shift-cell"},ae={class:"time-pair"},te={class:"summary-pagination"};var le=(0,l.pM)({__name:"EmployeeDailySummary",setup(e){const a=(0,l.KR)(!1),t=(0,l.KR)([]),o=(0,l.Kh)({page:1,limit:10,total:0}),r=(0,l.Kh)({dates:[U()().subtract(13,"day").format("YYYY-MM-DD"),U()().format("YYYY-MM-DD")],trang_thai:""}),u=[{label:"Tất cả",value:""},{label:"Đúng giờ",value:"OnTime"},{label:"Đi trễ",value:"Late"},{label:"Về sớm",value:"EarlyOut"},{label:"Đi trễ & Về sớm",value:"LateEarly"},{label:"Nghỉ phép",value:"Leave"},{label:"Vắng/Không chấm",value:"Absent"},{label:"Thiếu check-in",value:"MissingCheckin"},{label:"Thiếu check-out",value:"MissingCheckout"}],s=e=>{const a=u.find(a=>a.value===e);return a?.label||"---"},c=e=>{switch(e){case"OnTime":return"success";case"Leave":return"info";case"Late":case"LateEarly":return"warning";case"EarlyOut":return"warning";case"MissingCheckin":case"MissingCheckout":case"Absent":return"danger";default:return"info"}},d=e=>e?U()(e).format("DD/MM/YYYY"):"--",g=e=>e?U()(e).format("HH:mm"):"--:--",h=e=>e?e>=60?`${(e/60).toFixed(1)} giờ`:`${e} phút`:"0 phút",_=e=>e?`${e.toFixed(2)}h`:"0h",p=()=>{const[e,a]=r.dates||[];return{page:o.page,limit:o.limit,from:e,to:a,trang_thai:r.trang_thai||void 0}},y=async()=>{a.value=!0;try{const e=await G.A.getMySummaries(p());t.value=e.data||[],o.total=e.pagination.total}catch(e){console.error("loadSummaries error",e),i.nk.error(e.response?.data?.msg||"Không thể tải dữ liệu chấm công")}finally{a.value=!1}},m=e=>{o.page=e,y()},v=()=>{o.page=1,y()};return(0,l.sV)(()=>{y()}),(e,i)=>{const p=(0,l.g2)("el-date-picker"),y=(0,l.g2)("el-option"),b=(0,l.g2)("el-select"),k=(0,l.g2)("el-button"),f=(0,l.g2)("el-table-column"),w=(0,l.g2)("el-tag"),F=(0,l.g2)("el-table"),A=(0,l.g2)("el-pagination"),L=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",j,[(0,l.Lk)("div",J,[i[3]||(i[3]=(0,l.Lk)("div",{class:"summary-toolbar__info"},[(0,l.Lk)("h3",null,"Chấm công & cảnh báo"),(0,l.Lk)("p",null,"Hiển thị 14 ngày gần nhất theo rule engine Time/Leave/OT.")],-1)),(0,l.Lk)("div",Z,[(0,l.bF)(p,{modelValue:r.dates,"onUpdate:modelValue":i[0]||(i[0]=e=>r.dates=e),type:"daterange","unlink-panels":"","start-placeholder":"Từ ngày","end-placeholder":"Đến ngày","value-format":"YYYY-MM-DD",format:"DD/MM/YYYY",size:"small"},null,8,["modelValue"]),(0,l.bF)(b,{modelValue:r.trang_thai,"onUpdate:modelValue":i[1]||(i[1]=e=>r.trang_thai=e),placeholder:"Tất cả trạng thái",clearable:"",size:"small"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(u,e=>(0,l.bF)(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),(0,l.bF)(k,{size:"small",type:"primary",icon:(0,l.R1)(n.Refresh),onClick:v},{default:(0,l.k6)(()=>[...i[2]||(i[2]=[(0,l.eW)(" Lọc ",-1)])]),_:1},8,["icon"])])]),(0,l.bF)(F,{data:t.value,"empty-text":a.value?"Đang tải...":"Chưa có dữ liệu"},{default:(0,l.k6)(()=>[(0,l.bF)(f,{label:"Ngày",width:"130"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(d(e.ngay)),1)]),_:1}),(0,l.bF)(f,{label:"Ca","min-width":"160"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",ee,[(0,l.Lk)("strong",null,(0,l.v_)(e.shift_snapshot?.ten_ca||"---"),1),(0,l.Lk)("span",null,(0,l.v_)(e.shift_snapshot?.gio_bat_dau||"--:--")+" - "+(0,l.v_)(e.shift_snapshot?.gio_ket_thuc||"--:--"),1)])]),_:1}),(0,l.bF)(f,{label:"Check-in/out","min-width":"190"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",ae,[(0,l.Lk)("span",null,(0,l.v_)(g(e.check_in)),1),(0,l.Lk)("span",null,(0,l.v_)(g(e.check_out)),1)])]),_:1}),(0,l.bF)(f,{prop:"work_minutes",label:"Làm việc",width:"120"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(h(e.work_minutes)),1)]),_:1}),(0,l.bF)(f,{prop:"ot_hours",label:"OT",width:"90"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(_(e.ot_hours)),1)]),_:1}),(0,l.bF)(f,{label:"Trạng thái",width:"150"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(w,{type:c(e.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(s(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(f,{prop:"notes",label:"Ghi chú","min-width":"220","show-overflow-tooltip":""})]),_:1},8,["data","empty-text"]),(0,l.Lk)("div",te,[(0,l.bF)(A,{background:"",layout:"total, prev, pager, next",total:o.total,"current-page":o.page,"page-size":o.limit,onCurrentChange:m},null,8,["total","current-page","page-size"])])])),[[L,a.value]])}}});const ne=(0,E.A)(le,[["__scopeId","data-v-f29a0c74"]]);var ie=ne,oe=(t(8111),t(2489),t(8237),t(7945));const re={class:"my-performance"},ue={class:"section-header"},se={class:"summary-grid"},ce={class:"summary-card"},de={class:"summary-card"},ge={class:"summary-card"},he={class:"summary-card"},_e={class:"period-text"},pe={class:"score-row"},ye={class:"bonus-row"},me={key:0},ve={key:0,class:"pagination"},be={class:"detail-header"},ke={key:0,class:"detail-body"},fe={key:1},we={class:"ratings-section"},Fe={key:0,class:"history-section"};var Ae=(0,l.pM)({__name:"EmployeeMyPerformance",setup(e){const a=(0,l.KR)([]),t=(0,l.KR)(!1),o=(0,l.Kh)({page:1,limit:10,total:0}),r=(0,l.KR)(!1),u=(0,l.KR)(null),s=async()=>{t.value=!0;try{const e=await oe.A.getMine({page:o.page,limit:o.limit});a.value=e.data||[],o.total=e.pagination?.total||a.value.length}catch(e){console.error("loadReviews error",e),i.nk.error(e.response?.data?.msg||"Không thể tải đánh giá")}finally{t.value=!1}},c=(0,l.EW)(()=>{const e=o.total||a.value.length,t=a.value.filter(e=>"Completed"===e.trang_thai).length,l=a.value.filter(e=>"Completed"!==e.trang_thai).length,n=a.value.reduce((e,a)=>e+(a.diem_tong||0),0)/(a.value.length||1)||0;return{total:e,completed:t,pending:l,avgScore:n}}),d=e=>`${g(e.tu_ngay)} - ${g(e.den_ngay)}`,g=e=>e?U()(e).format("DD/MM/YYYY"):"---",h=e=>e?"string"===typeof e?e:`${e.ho_dem||""} ${e.ten||""}`.trim()||"---":"---",_=e=>void 0===e||null===e?"0.00":e.toFixed(2),p=e=>{const a=Math.max(0,Math.min(5,e.diem_tong||0));return Math.round(a/5*100)},y=e=>{switch(e){case"A":return"success";case"B":return"info";case"C":return"warning";default:return"danger"}},m=e=>"Draft"===e?"Nháp":"InReview"===e?"Đang đánh giá":"Đã hoàn tất",v=e=>"Completed"===e?"success":"InReview"===e?"warning":"info",b=e=>e?`${e.toLocaleString("vi-VN")} đ`:"0 đ",k=e=>{const a=e.payroll_history||[];return a.length?a[a.length-1]:null},f=e=>e.thuong_hieu_suat?e.da_chuyen_payroll?"success":"warning":"info",w=e=>e.thuong_hieu_suat?e.da_chuyen_payroll?"Đã trả":"Chờ chi trả":"Không có",F=e=>{u.value=e,r.value=!0},A=(0,l.EW)(()=>u.value?d(u.value):""),L=e=>{o.page=e,s()},R=window.matchMedia("(max-width: 768px)").matches;return(0,l.sV)(()=>{s()}),(e,i)=>{const E=(0,l.g2)("el-button"),C=(0,l.g2)("el-table-column"),S=(0,l.g2)("el-tag"),K=(0,l.g2)("el-progress"),U=(0,l.g2)("el-table"),B=(0,l.g2)("el-pagination"),V=(0,l.g2)("el-card"),W=(0,l.g2)("el-descriptions-item"),T=(0,l.g2)("el-descriptions"),$=(0,l.g2)("el-timeline-item"),D=(0,l.g2)("el-timeline"),x=(0,l.g2)("el-drawer"),N=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",re,[(0,l.Lk)("div",ue,[i[2]||(i[2]=(0,l.Lk)("div",null,[(0,l.Lk)("h3",null,"Đánh giá hiệu suất của tôi"),(0,l.Lk)("p",null,"Theo dõi điểm số, xếp loại và trạng thái chi trả thưởng.")],-1)),(0,l.bF)(E,{icon:(0,l.R1)(n.Refresh),onClick:s},{default:(0,l.k6)(()=>[...i[1]||(i[1]=[(0,l.eW)("Tải lại",-1)])]),_:1},8,["icon"])]),(0,l.Lk)("div",se,[(0,l.Lk)("div",ce,[i[3]||(i[3]=(0,l.Lk)("p",null,"Tổng số kỳ đánh giá",-1)),(0,l.Lk)("strong",null,(0,l.v_)(c.value.total),1)]),(0,l.Lk)("div",de,[i[4]||(i[4]=(0,l.Lk)("p",null,"Hoàn tất",-1)),(0,l.Lk)("strong",null,(0,l.v_)(c.value.completed),1)]),(0,l.Lk)("div",ge,[i[5]||(i[5]=(0,l.Lk)("p",null,"Đang chờ",-1)),(0,l.Lk)("strong",null,(0,l.v_)(c.value.pending),1)]),(0,l.Lk)("div",he,[i[6]||(i[6]=(0,l.Lk)("p",null,"Điểm TB",-1)),(0,l.Lk)("strong",null,(0,l.v_)(c.value.avgScore.toFixed(2)),1)])]),(0,l.bF)(V,{shadow:"never"},{default:(0,l.k6)(()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(U,{data:a.value,"empty-text":"Chưa có bản đánh giá nào"},{default:(0,l.k6)(()=>[(0,l.bF)(C,{label:"Kỳ đánh giá","min-width":"220"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",_e,(0,l.v_)(d(e)),1),(0,l.Lk)("small",null," Người đánh giá: "+(0,l.v_)(h(e.nguoi_danh_gia_id)),1)]),_:1}),(0,l.bF)(C,{label:"Điểm & Xếp loại","min-width":"220"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",pe,[(0,l.Lk)("strong",null,(0,l.v_)(_(e.diem_tong)),1),i[7]||(i[7]=(0,l.Lk)("span",null,"/ 5.0",-1)),e.xep_loai?((0,l.uX)(),(0,l.Wv)(S,{key:0,type:y(e.xep_loai),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.xep_loai),1)]),_:2},1032,["type"])):(0,l.Q3)("",!0)]),(0,l.bF)(K,{percentage:p(e),"stroke-width":12,"show-text":!1},null,8,["percentage"])]),_:1}),(0,l.bF)(C,{label:"Thưởng hiệu suất","min-width":"200"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",ye,[(0,l.Lk)("span",null,(0,l.v_)(b(e.thuong_hieu_suat)),1),(0,l.bF)(S,{type:f(e),size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(w(e)),1)]),_:2},1032,["type"])]),k(e)?((0,l.uX)(),(0,l.CE)("small",me," Đã vào kỳ: "+(0,l.v_)(k(e)?.ky_luong||"---"),1)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(C,{label:"Trạng thái",width:"140",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(S,{type:v(e.trang_thai),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(m(e.trang_thai)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(C,{label:"Chi tiết",width:"120",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(E,{type:"primary",link:"",size:"small",onClick:a=>F(e)},{default:(0,l.k6)(()=>[...i[8]||(i[8]=[(0,l.eW)(" Xem ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,t.value]]),o.total>o.limit?((0,l.uX)(),(0,l.CE)("div",ve,[(0,l.bF)(B,{layout:"total, prev, pager, next","current-page":o.page,"page-size":o.limit,total:o.total,onCurrentChange:L},null,8,["current-page","page-size","total"])])):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(x,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=e=>r.value=e),size:(0,l.R1)(R)?"100%":"40%"},{header:(0,l.k6)(()=>[(0,l.Lk)("div",be,[i[9]||(i[9]=(0,l.Lk)("h4",null,"Chi tiết đánh giá",-1)),(0,l.Lk)("span",null,(0,l.v_)(A.value),1)])]),default:(0,l.k6)(()=>[u.value?((0,l.uX)(),(0,l.CE)("div",ke,[(0,l.bF)(T,{column:1,size:"small",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(W,{label:"Người đánh giá"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(h(u.value.nguoi_danh_gia_id)),1)]),_:1}),(0,l.bF)(W,{label:"Điểm tổng"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(_(u.value.diem_tong))+" / 5 ",1)]),_:1}),(0,l.bF)(W,{label:"Xếp loại"},{default:(0,l.k6)(()=>[u.value.xep_loai?((0,l.uX)(),(0,l.Wv)(S,{key:0,type:y(u.value.xep_loai),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(u.value.xep_loai),1)]),_:1},8,["type"])):((0,l.uX)(),(0,l.CE)("span",fe,"Chưa xếp loại"))]),_:1}),(0,l.bF)(W,{label:"Thưởng hiệu suất"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(b(u.value.thuong_hieu_suat)),1)]),_:1}),(0,l.bF)(W,{label:"Trạng thái"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{type:v(u.value.trang_thai),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(m(u.value.trang_thai)),1)]),_:1},8,["type"])]),_:1})]),_:1}),(0,l.Lk)("div",we,[i[10]||(i[10]=(0,l.Lk)("h4",null,"KPI & điểm chi tiết",-1)),(0,l.bF)(U,{data:u.value.ratings,size:"small",border:"","empty-text":"Chưa nhập KPI"},{default:(0,l.k6)(()=>[(0,l.bF)(C,{label:"KPI",prop:"kpi_id","min-width":"200"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)("object"===typeof e.kpi_id&&e.kpi_id?e.kpi_id.ten:"---"),1)]),_:1}),(0,l.bF)(C,{label:"Điểm",width:"120",prop:"diem"}),(0,l.bF)(C,{label:"Ghi chú",prop:"ghi_chu","min-width":"200","show-overflow-tooltip":""})]),_:1},8,["data"])]),u.value.payroll_history?.length?((0,l.uX)(),(0,l.CE)("div",Fe,[i[13]||(i[13]=(0,l.Lk)("h4",null,"Lịch sử chuyển sang bảng lương",-1)),(0,l.bF)(D,null,{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value.payroll_history,e=>((0,l.uX)(),(0,l.Wv)($,{key:e.payroll_entry_id||e.ngay_chuyen,timestamp:g(e.ngay_chuyen),type:"success"},{default:(0,l.k6)(()=>[(0,l.Lk)("p",null,[i[11]||(i[11]=(0,l.Lk)("strong",null,"Kỳ lương:",-1)),(0,l.eW)(" "+(0,l.v_)(e.ky_luong||"---"),1)]),(0,l.Lk)("p",null,[i[12]||(i[12]=(0,l.Lk)("strong",null,"Số tiền:",-1)),(0,l.eW)(" "+(0,l.v_)(b(e.so_tien)),1)])]),_:2},1032,["timestamp"]))),128))]),_:1})])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)]),_:1},8,["modelValue","size"])])),[[N,t.value]])}}});const Le=(0,E.A)(Ae,[["__scopeId","data-v-5e0e6c46"]]);var Re=Le,Ee=(t(7588),t(7918)),Ce=t(1637);const Se={class:"consent-center"},Ke={class:"consent-card-header"},Ue={class:"consent-card-title"},Be={class:"consent-card-action"},Ve={class:"consent-status"},We={key:0},Te={class:"consent-details"},$e={key:0},De={key:0};var xe=(0,l.pM)({__name:"ConsentCenter",setup(e){const a=(0,l.KR)([]),t=(0,l.Kh)({}),n=(0,l.KR)(!1),o=(0,l.KR)(null),r=e=>"Accepted"===e?"Da dong y":"Withdrawn"===e?"Da rut lai":"Chua chap thuan",u=e=>"Accepted"===e?"success":"Withdrawn"===e?"danger":"info",s=e=>e?new Date(e).toLocaleString("vi-VN"):"",c=e=>{Object.keys(t).forEach(e=>{delete t[e]}),e.forEach(e=>{t[e.key]="Accepted"===e.status})},d=async()=>{n.value=!0;try{const{items:e}=await Ce.A.getMyConsents();a.value=e,c(e)}catch(e){console.error("loadConsents error",e),i.nk.error(e.response?.data?.msg||"Không thể tải thông tin đồng thuận")}finally{n.value=!1}},g=async(e,a)=>{if(e.required&&!a)return t[e.key]=!0,void i.nk.warning("Muc dich nay bat buoc theo chinh sach cong ty");if(!a)try{await Ee.s.confirm("Ban chac chan muon rut lai su dong y voi muc dich nay? Co the anh huong den viec nhan thong tin phuc loi.","Xac nhan",{confirmButtonText:"Rut lai",cancelButtonText:"Huy",type:"warning"})}catch{return void(t[e.key]=!0)}o.value=e.key;try{await Ce.A.saveConsents([{purpose:e.key,accepted:a}]),i.nk.success(a?"Da dong y muc dich nay":"Da rut lai su dong y"),await d(),window.dispatchEvent(new CustomEvent("consent-updated"))}catch(l){console.error("handleToggle error",l),t[e.key]=!a,i.nk.error(l.response?.data?.msg||"Không thể cập nhật đồng thuận")}finally{o.value=null}};return(0,l.sV)(()=>{d()}),(e,i)=>{const c=(0,l.g2)("el-alert"),d=(0,l.g2)("el-tag"),h=(0,l.g2)("el-switch"),_=(0,l.g2)("el-descriptions-item"),p=(0,l.g2)("el-descriptions"),y=(0,l.g2)("el-card"),m=(0,l.g2)("el-space"),v=(0,l.gN)("loading");return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",Se,[(0,l.bF)(c,{type:"info","show-icon":"",class:"consent-alert",title:"Nghi dinh 13/2023/ND-CP ve bao ve du lieu ca nhan",description:"Ban co the theo doi va chinh sua su dong y xu ly du lieu bat ky luc nao. Cac muc bat buoc duoc danh dau ro rang va khong the tat."}),(0,l.bF)(m,{direction:"vertical",size:16,style:{width:"100%"}},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,e=>((0,l.uX)(),(0,l.Wv)(y,{key:e.key,class:"consent-card","body-style":{padding:"16px"}},{default:(0,l.k6)(()=>[(0,l.Lk)("div",Ke,[(0,l.Lk)("div",Ue,[(0,l.Lk)("h4",null,[(0,l.eW)((0,l.v_)(e.name)+" ",1),e.required?((0,l.uX)(),(0,l.Wv)(d,{key:0,type:"danger",size:"small",effect:"plain"},{default:(0,l.k6)(()=>[...i[0]||(i[0]=[(0,l.eW)(" Bat buoc ",-1)])]),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("p",null,(0,l.v_)(e.description),1)]),(0,l.Lk)("div",Be,[(0,l.Lk)("div",Ve,[(0,l.bF)(d,{type:u(e.status),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(r(e.status)),1)]),_:2},1032,["type"]),e.granted_at||e.withdrawn_at?((0,l.uX)(),(0,l.CE)("small",We," Cap nhat: "+(0,l.v_)(s(e.granted_at||e.withdrawn_at)),1)):(0,l.Q3)("",!0)]),(0,l.bF)(h,{modelValue:t[e.key],"onUpdate:modelValue":a=>t[e.key]=a,disabled:e.required||o.value===e.key,loading:o.value===e.key,"inline-prompt":"","active-text":"Dong y","inactive-text":"Tu choi",onChange:a=>g(e,a)},null,8,["modelValue","onUpdate:modelValue","disabled","loading","onChange"])])]),(0,l.Lk)("div",Te,[(0,l.bF)(p,{column:1,size:"small",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(_,{label:"Co so phap ly"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.legal_basis||"---"),1)]),_:2},1024),(0,l.bF)(_,{label:"Loai du lieu xu ly"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.data_types,e=>((0,l.uX)(),(0,l.Wv)(d,{key:e,size:"small",class:"mr-4"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e),1)]),_:2},1024))),128)),e.data_types?.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",$e,"---"))]),_:2},1024),(0,l.bF)(_,{label:"Chia se voi don vi"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recipients,e=>((0,l.uX)(),(0,l.Wv)(d,{key:e,size:"small",class:"mr-4",type:"info"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e),1)]),_:2},1024))),128)),e.recipients?.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",De,"---"))]),_:2},1024),(0,l.bF)(_,{label:"Thoi han luu tru"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(e.retention||"Theo chinh sach luu tru cua doanh nghiep"),1)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})])),[[v,n.value]])}}});const Ne=(0,E.A)(xe,[["__scopeId","data-v-f907a298"]]);var Me=Ne;const Xe={class:"orangehrm-myinfo"},Ye={class:"orangehrm-myinfo-header-content"},He={class:"orangehrm-myinfo-avatar-section"},ze={class:"orangehrm-myinfo-info-section"},Ie={class:"orangehrm-myinfo-name"},qe={class:"orangehrm-myinfo-id"},Oe={class:"orangehrm-myinfo-tags"},Pe={class:"payslip-section"},Qe={class:"payslip-title"},Ge={class:"payslip-status"},je={class:"profile-requests-tab"},Je={class:"profile-requests-header"};var Ze=(0,l.pM)({__name:"MyInfo",setup(e){const a=(0,l.KR)(null),t=(0,l.KR)(!1),k=(0,l.KR)("personal"),f=(0,l.KR)(!1),w=(0,l.KR)([]),F=(0,l.KR)(!1),A=(0,l.KR)([]),L=(0,l.KR)(!1),R=(0,l.KR)(!1),E=async()=>{t.value=!0;try{const e=o.A.getUser();if(!e?.nhan_vien_id)return void i.nk.error("Không tìm thấy thông tin nhân viên của bạn");a.value=await r.A.getById(e.nhan_vien_id)}catch(e){console.error("Error loading employee info:",e),i.nk.error(e.response?.data?.msg||"Không thể tải thông tin cá nhân")}finally{t.value=!1}},C=e=>{"payslips"!==e.paneName||F.value||K(),"profileRequests"!==e.paneName||R.value||U()},K=async()=>{f.value=!0;try{const e=await s.A.getMyPayslips();w.value=e,F.value=!0}catch(e){console.error("Error loading payslips:",e),i.nk.error(e.response?.data?.msg||"Không thể tải phiếu lương")}finally{f.value=!1}},U=async(e=!1)=>{if(!L.value&&(e||!R.value)){L.value=!0;try{A.value=await c.A.getMy(),R.value=!0}catch(a){console.error("Error loading profile requests:",a),i.nk.error(a.response?.data?.msg||"Không thể tải danh sách yêu cầu")}finally{L.value=!1}}},B=e=>{switch(e){case"personal":return"Thông tin cá nhân";case"contact":return"Liên hệ & địa chỉ";case"dependents":return"Người phụ thuộc";default:return e}},V=e=>"Pending"===e?"Chờ duyệt":"Approved"===e?"Đã duyệt":"Rejected"===e?"Từ chối":e,W=e=>"Approved"===e?"success":"Rejected"===e?"danger":"warning",T=e=>e?new Date(e).toLocaleString("vi-VN"):"---",$=()=>{U(!0)},D=async e=>{const a=["image/jpeg","image/png","image/jpg"];if(!a.includes(e.type))return i.nk.error("Chỉ chấp nhận file ảnh JPG, PNG"),!1;const t=5242880;if(e.size>t)return i.nk.error("Kích thước file không được vượt quá 5MB"),!1;try{const a=o.A.getUser();if(!a?.nhan_vien_id)return i.nk.error("Không tìm thấy thông tin nhân viên"),!1;await u.A.uploadEmployeePhoto(a.nhan_vien_id,e),i.nk.success("Tải ảnh đại diện thành công"),await E()}catch(l){console.error("Error uploading avatar:",l),i.nk.error(l.response?.data?.msg||"Không thể tải ảnh đại diện")}return!1},x=e=>{const a={"Đang làm việc":"success","Toàn thời gian":"success","Bán thời gian":"primary","Thử việc":"warning","Nghỉ việc":"info","Tạm nghỉ":"danger","Thực tập":"primary"};return a[e]||"info"},N=(e,a="VND")=>{try{return new Intl.NumberFormat("vi-VN",{style:"currency",currency:a||"VND",maximumFractionDigits:0}).format(e||0)}catch{return`${(e||0).toLocaleString("vi-VN")} ${a}`}},X=(e,a)=>e&&a?`${new Date(e).toLocaleDateString("vi-VN")} - ${new Date(a).toLocaleDateString("vi-VN")}`:"---",Y=e=>{switch(e){case"Draft":return"Nháp";case"Cho_duyet":return"Chờ duyệt";case"Da_duyet":return"Đã duyệt";case"Da_chi":return"Đã chi";default:return e}},H=e=>"Da_duyet"===e||"Da_chi"===e?"success":"Cho_duyet"===e?"warning":"info",z=e=>{switch(e){case"Da_duyet":return"Phiếu duyệt";case"Da_chi":return"Đã chi trả";default:return"Chờ duyệt"}};return(0,l.sV)(()=>{E()}),(e,i)=>{const o=(0,l.g2)("el-icon"),r=(0,l.g2)("el-avatar"),s=(0,l.g2)("el-button"),c=(0,l.g2)("el-upload"),F=(0,l.g2)("el-tag"),R=(0,l.g2)("el-card"),K=(0,l.g2)("el-tab-pane"),I=(0,l.g2)("el-skeleton"),q=(0,l.g2)("el-empty"),O=(0,l.g2)("el-table-column"),P=(0,l.g2)("el-table"),G=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)("div",Xe,[(0,l.bF)(R,{class:"orangehrm-myinfo-header",shadow:"never"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",Ye,[(0,l.Lk)("div",He,[(0,l.bF)(r,{size:120,src:a.value?.avatar_url?(0,l.R1)(u.A).getFileUrl(a.value.avatar_url):void 0},{default:(0,l.k6)(()=>[(0,l.bF)(o,{size:60},{default:(0,l.k6)(()=>[(0,l.bF)((0,l.R1)(n.User))]),_:1})]),_:1},8,["src"]),(0,l.bF)(c,{class:"orangehrm-avatar-upload",action:"#","show-file-list":!1,"before-upload":D},{default:(0,l.k6)(()=>[(0,l.bF)(s,{size:"small",icon:(0,l.R1)(n.Camera)},{default:(0,l.k6)(()=>[...i[2]||(i[2]=[(0,l.eW)("Đổi ảnh",-1)])]),_:1},8,["icon"])]),_:1})]),(0,l.Lk)("div",ze,[(0,l.Lk)("h1",Ie,(0,l.v_)(a.value?.ho_dem)+" "+(0,l.v_)(a.value?.ten),1),(0,l.Lk)("p",qe,"Mã NV: "+(0,l.v_)(a.value?.ma_nhan_vien),1),(0,l.Lk)("div",Oe,[a.value?.thong_tin_cong_viec?.chuc_danh_id?((0,l.uX)(),(0,l.Wv)(F,{key:0,type:"primary"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(a.value.thong_tin_cong_viec.chuc_danh_id.ten_chuc_danh),1)]),_:1})):(0,l.Q3)("",!0),a.value?.thong_tin_cong_viec?.phong_ban_id?((0,l.uX)(),(0,l.Wv)(F,{key:1,type:"success"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(a.value.thong_tin_cong_viec.phong_ban_id.ten),1)]),_:1})):(0,l.Q3)("",!0),a.value?.thong_tin_cong_viec?.trang_thai_lao_dong_id?((0,l.uX)(),(0,l.Wv)(F,{key:2,type:x(a.value.thong_tin_cong_viec.trang_thai_lao_dong_id.ten)},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(a.value.thong_tin_cong_viec.trang_thai_lao_dong_id.ten),1)]),_:1},8,["type"])):(0,l.Q3)("",!0)])])])]),_:1}),(0,l.bF)(R,{class:"orangehrm-myinfo-tabs",shadow:"never"},{default:(0,l.k6)(()=>[(0,l.bF)(G,{modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=e=>k.value=e),onTabClick:C},{default:(0,l.k6)(()=>[(0,l.bF)(K,{label:"Thông tin cá nhân",name:"personal"},{default:(0,l.k6)(()=>[(0,l.bF)(d.A,{employee:a.value,loading:t.value,onReload:E,onRequestSubmitted:$},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Thông tin liên hệ",name:"contact"},{default:(0,l.k6)(()=>[(0,l.bF)(g.A,{employee:a.value,loading:t.value,onReload:E,onRequestSubmitted:$},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Th�ng tin BHXH",name:"insurance"},{default:(0,l.k6)(()=>[(0,l.bF)(b.A,{employee:a.value,loading:t.value,readonly:""},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Tai lieu cua toi",name:"documents"},{default:(0,l.k6)(()=>[(0,l.bF)(S)]),_:1}),(0,l.bF)(K,{label:"Nghi phep cua toi",name:"myLeaves"},{default:(0,l.k6)(()=>[(0,l.bF)(M)]),_:1}),(0,l.bF)(K,{label:"Cham cong cua toi",name:"myTime"},{default:(0,l.k6)(()=>[(0,l.bF)(ie)]),_:1}),(0,l.bF)(K,{label:"Tang ca cua toi",name:"myOt"},{default:(0,l.k6)(()=>[(0,l.bF)(Q)]),_:1}),(0,l.bF)(K,{label:"Danh gia hieu suat",name:"myPerformance"},{default:(0,l.k6)(()=>[(0,l.bF)(Re)]),_:1}),(0,l.bF)(K,{label:"Trình độ",name:"qualifications"},{default:(0,l.k6)(()=>[(0,l.bF)(h.A,{employee:a.value,loading:t.value,onReload:E},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Người phụ thuộc",name:"dependents"},{default:(0,l.k6)(()=>[(0,l.bF)(_.A,{employee:a.value,loading:t.value,onReload:E,onRequestSubmitted:$},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Kinh nghiệm",name:"experience"},{default:(0,l.k6)(()=>[(0,l.bF)(p.A,{employee:a.value,loading:t.value,onReload:E},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Liên hệ khẩn cấp",name:"emergency"},{default:(0,l.k6)(()=>[(0,l.bF)(y.A,{employee:a.value,loading:t.value,onReload:E},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Xuất nhập cảnh",name:"immigration"},{default:(0,l.k6)(()=>[(0,l.bF)(m.A,{employee:a.value,loading:t.value,onReload:E},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Thành viên tổ chức",name:"memberships"},{default:(0,l.k6)(()=>[(0,l.bF)(v.A,{employee:a.value,loading:t.value,onReload:E},null,8,["employee","loading"])]),_:1}),(0,l.bF)(K,{label:"Phiếu lương",name:"payslips"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",Pe,[f.value?((0,l.uX)(),(0,l.Wv)(I,{key:0,rows:4,animated:""})):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[0===w.value.length?((0,l.uX)(),(0,l.Wv)(q,{key:0,description:"Chưa có phiếu lương khả dụng"})):((0,l.uX)(),(0,l.Wv)(P,{key:1,data:w.value,border:"",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(O,{label:"Kỳ lương","min-width":"180"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",Qe,[(0,l.Lk)("strong",null,(0,l.v_)(e.ky_luong),1),(0,l.Lk)("span",null,(0,l.v_)(X(e.ngay_bat_dau,e.ngay_ket_thuc)),1)])]),_:1}),(0,l.bF)(O,{label:"Thu nhập",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(N(e.entry.tong_thu_nhap,e.currency)),1)]),_:1}),(0,l.bF)(O,{label:"Khấu trừ",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(N(e.entry.tong_khau_tru,e.currency)),1)]),_:1}),(0,l.bF)(O,{label:"Thực nhận",width:"150"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("strong",null,(0,l.v_)(N(e.entry.luong_thuc_nhan,e.currency)),1)]),_:1}),(0,l.bF)(O,{label:"Trạng thái",width:"160"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",Ge,[(0,l.bF)(F,{type:H(e.trang_thai_run),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(Y(e.trang_thai_run)),1)]),_:2},1032,["type"]),(0,l.bF)(F,{type:"info",size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(z(e.entry.trang_thai)),1)]),_:2},1024)])]),_:1})]),_:1},8,["data"]))],64))])]),_:1}),(0,l.bF)(K,{label:"Yeu cau cap nhat",name:"profileRequests"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",je,[(0,l.Lk)("div",Je,[i[4]||(i[4]=(0,l.Lk)("div",{class:"profile-requests-header-text"},[(0,l.Lk)("h3",null,"Yêu cầu cập nhật hồ sơ"),(0,l.Lk)("p",null,"Thông tin các yêu cầu thay đổi đang chờ HR xử lý")],-1)),(0,l.bF)(s,{type:"primary",size:"small",icon:(0,l.R1)(n.Refresh),plain:"",loading:L.value,onClick:i[0]||(i[0]=e=>U(!0))},{default:(0,l.k6)(()=>[...i[3]||(i[3]=[(0,l.eW)(" Làm mới ",-1)])]),_:1},8,["icon","loading"])]),L.value&&0===A.value.length?((0,l.uX)(),(0,l.Wv)(I,{key:0,rows:4,animated:""})):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[0===A.value.length?((0,l.uX)(),(0,l.Wv)(q,{key:0,description:"Chưa có yêu cầu nào"})):((0,l.uX)(),(0,l.Wv)(P,{key:1,data:A.value,border:"",stripe:""},{default:(0,l.k6)(()=>[(0,l.bF)(O,{label:"Loại","min-width":"150"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(B(e.type)),1)]),_:1}),(0,l.bF)(O,{label:"Ngày gửi","min-width":"180"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,l.v_)(T(e.ngay_tao)),1)]),_:1}),(0,l.bF)(O,{label:"Trạng thái",width:"140"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(F,{type:W(e.status),size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,l.v_)(V(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(O,{prop:"note",label:"Ghi chu","min-width":"200","show-overflow-tooltip":""}),(0,l.bF)(O,{prop:"approver_note",label:"Phan hoi tu HR","min-width":"200","show-overflow-tooltip":""})]),_:1},8,["data"]))],64))])]),_:1}),(0,l.bF)(K,{label:"Quyen du lieu",name:"consent"},{default:(0,l.k6)(()=>[(0,l.bF)(Me)]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const ea=(0,E.A)(Ze,[["__scopeId","data-v-10153f44"]]);var aa=ea},1637:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/consents")}async getMyConsents(){const e=await n.A.get(`${this.BASE_URL}/my`);return{items:e.data.data||[],pendingRequired:Boolean(e.data.pending_required)}}async getPurposes(){const e=await n.A.get(`${this.BASE_URL}/purposes`);return e.data.data||[]}async saveConsents(e){const a=await n.A.post(this.BASE_URL,{consents:e});return{items:a.data.data||[],pendingRequired:Boolean(a.data.pending_required)}}async getOverview(){const e=await n.A.get(`${this.BASE_URL}/overview`);return e.data.data||[]}async getTracking(e){const a=await n.A.get(`${this.BASE_URL}/tracking`,{params:e});return a.data}}a.A=new i},3306:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/employee-documents")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getMy(e){const a=await n.A.get(`${this.BASE_URL}/my`,{params:e});return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await n.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},6126:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/yeucaunghiphep")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await n.A.get(`${this.BASE_URL}/${e}`);return a.data}async getMy(e){const a=await n.A.get(`${this.BASE_URL}/my`,{params:e});return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async updateStatus(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}/status`,a);return t.data}async cancel(e){const a=await n.A.put(`${this.BASE_URL}/${e}/cancel`);return a.data}async delete(e){await n.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},6576:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/payroll")}async getRuns(e){const a=await n.A.get(`${this.BASE_URL}/runs`,{params:e});return a.data}async createRun(e){const a=await n.A.post(`${this.BASE_URL}/runs`,e);return a.data}async getRun(e){const a=await n.A.get(`${this.BASE_URL}/runs/${e}`);return a.data}async updateRunStatus(e,a){const t=await n.A.patch(`${this.BASE_URL}/runs/${e}/status`,{trang_thai:a});return t.data}async updateEntryStatus(e,a,t){const l=await n.A.patch(`${this.BASE_URL}/runs/${e}/entries/${a}/status`,t);return l.data}async exportRun(e){const a=await n.A.get(`${this.BASE_URL}/runs/${e}/export`,{responseType:"blob"});return a.data}async getMyPayslips(){const e=await n.A.get(`${this.BASE_URL}/my/payslips`);return e.data?.data||[]}async preview(e){const a=await n.A.post(`${this.BASE_URL}/runs/preview`,e);return a.data}async exportTemplate(e,a){const t=await n.A.get(`${this.BASE_URL}/runs/${e}/export-template/${a}`,{responseType:"blob"});return t.data}}a.A=new i},7588:function(e,a,t){var l=t(6518),n=t(9565),i=t(2652),o=t(9306),r=t(8551),u=t(1767),s=t(9539),c=t(4549),d=c("forEach",TypeError);l({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){r(this);try{o(e)}catch(l){s(this,"throw",l)}if(d)return n(d,this,e);var a=u(this),t=0;i(a,function(a){e(a,t++)},{IS_RECORD:!0})}})},7927:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/overtime-requests")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getMy(e){const a=await n.A.get(`${this.BASE_URL}/my`,{params:e});return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async updateStatus(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}/status`,a);return t.data}async cancel(e){const a=await n.A.put(`${this.BASE_URL}/${e}/cancel`);return a.data}async getAlerts(){const e=await n.A.get(`${this.BASE_URL}/alerts`);return e.data}}a.A=new i},7945:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/performance/reviews")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getMine(e){const a=await n.A.get(`${this.BASE_URL}/my`,{params:e});return a.data}async getById(e){const a=await n.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async updateStatus(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}`,{trang_thai:a});return t.data}async delete(e){await n.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},8237:function(e,a,t){var l=t(6518),n=t(2652),i=t(9306),o=t(8551),r=t(1767),u=t(9539),s=t(4549),c=t(8745),d=t(9039),g=TypeError,h=d(function(){[].keys().reduce(function(){},void 0)}),_=!h&&s("reduce",g);l({target:"Iterator",proto:!0,real:!0,forced:h||_},{reduce:function(e){o(this);try{i(e)}catch(d){u(this,"throw",d)}var a=arguments.length<2,t=a?void 0:arguments[1];if(_)return c(_,this,a?[e]:[e,t]);var l=r(this),s=0;if(n(l,function(l){a?(a=!1,t=l):t=e(t,l,s),s++},{IS_RECORD:!0}),a)throw new g("Reduce of empty iterator with no initial value");return t}})},8303:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/loaingaynghi")}async getAll(e){const a=await n.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await n.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await n.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await n.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await n.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},8745:function(e,a,t){var l=t(616),n=Function.prototype,i=n.apply,o=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(l?o.bind(i):function(){return o.apply(i,arguments)})},9088:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"BASE_URL","/time-rules")}async getDailySummaries(e){const a=await n.A.get(`${this.BASE_URL}/daily`,{params:e});return a.data}async getMySummaries(e){const a=await n.A.get(`${this.BASE_URL}/my`,{params:e});return a.data}async recalculate(e){await n.A.post(`${this.BASE_URL}/recalculate`,e)}async getViolations(e){const a=await n.A.get(`${this.BASE_URL}/violations`,{params:e});return a.data.data||[]}}a.A=new i},9395:function(e,a,t){var l=t(1114),n=t(1526);class i{constructor(){(0,l.A)(this,"TOKEN_KEY","token"),(0,l.A)(this,"USER_KEY","user")}async login(e){const a=await n.A.post("/auth/login",e),{token:t,user:l}=a.data;return localStorage.setItem(this.TOKEN_KEY,t),localStorage.setItem(this.USER_KEY,JSON.stringify(l)),a.data}async register(e){const a=await n.A.post("/auth/register",e),{token:t,user:l}=a.data;return localStorage.setItem(this.TOKEN_KEY,t),localStorage.setItem(this.USER_KEY,JSON.stringify(l)),a.data}async getCurrentUser(){const e=await n.A.get("/auth/me");return e.data}logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY)}getToken(){return localStorage.getItem(this.TOKEN_KEY)}getUser(){const e=localStorage.getItem(this.USER_KEY);if(!e)return null;try{return JSON.parse(e)}catch{return null}}isAuthenticated(){return!!this.getToken()}hasRole(e){const a=this.getUser();return!!a&&(Array.isArray(e)?e.includes(a.role):a.role===e)}}a.A=new i}}]);
//# sourceMappingURL=2107.51237ae4.js.map