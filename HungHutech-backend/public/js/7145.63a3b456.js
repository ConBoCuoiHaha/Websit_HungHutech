"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[7145],{1114:function(e,a,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function l(e,a){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,a||"default");if("object"!=n(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function i(e){var a=l(e,"string");return"symbol"==n(a)?a:a+""}function o(e,a,t){return(a=i(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,{A:function(){return o}})},1526:function(e,a,t){var n=t(1114),l=t(4335);const i=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,o=i||"http://192.168.88.50:5000/api";console.log("API Base URL:",o);class r{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=l.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,a){return this.axiosInstance.get(e,a)}post(e,a,t){return this.axiosInstance.post(e,a,t)}put(e,a,t){return this.axiosInstance.put(e,a,t)}delete(e,a){return this.axiosInstance.delete(e,a)}patch(e,a,t){return this.axiosInstance.patch(e,a,t)}}a.A=new r},3583:function(e,a,t){var n=t(1114),l=t(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/chucdanh")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},3691:function(e,a,t){var n=t(1114),l=t(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/trangthailaodong")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},4114:function(e,a,t){var n=t(6518),l=t(8981),i=t(6198),o=t(4527),r=t(6837),u=t(9039),d=u(function(){return 4294967297!==[].push.call({length:4294967296},1)}),_=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},h=d||!_();n({target:"Array",proto:!0,arity:1,forced:h},{push:function(e){var a=l(this),t=i(a),n=arguments.length;r(t+n);for(var u=0;u<n;u++)a[t]=arguments[u],t++;return o(a,t),t}})},4376:function(e,a,t){var n=t(2195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},4527:function(e,a,t){var n=t(3724),l=t(4376),i=TypeError,o=Object.getOwnPropertyDescriptor,r=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=r?function(e,a){if(l(e)&&!o(e,"length").writable)throw new i("Cannot set read only .length");return e.length=a}:function(e,a){return e.length=a}},5916:function(e,a,t){var n=t(1114),l=t(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/phongban")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},6604:function(e,a,t){var n=t(1114),l=t(1526);class i{constructor(){(0,n.A)(this,"BASE_URL","/nhanvien")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new i},6837:function(e){var a=TypeError,t=9007199254740991;e.exports=function(e){if(e>t)throw a("Maximum allowed index exceeded");return e}},7145:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});t(4114);var n=t(1431),l=t(5220),i=t(163),o=t(6604),r=t(5916),u=t(3583),d=t(3691);const _={class:"orangehrm-card-header"},h={class:"orangehrm-card-title"},s={class:"form-section"},c={class:"form-section"},g={class:"form-section"},p={class:"orangehrm-form-actions"};var m=(0,n.pM)({__name:"EmployeeForm",setup(e){const a=(0,l.rd)(),t=(0,l.lq)(),m=(0,n.KR)(),b=(0,n.KR)(!1),f=(0,n.KR)(!1),y=(0,n.KR)([]),v=(0,n.KR)([]),k=(0,n.KR)([]),A=(0,n.KR)([]),F=(0,n.EW)(()=>t.params.id),V=(0,n.EW)(()=>"EmployeeEdit"===t.name),w=(0,n.Kh)({ho_dem:"",ten:"",ma_nhan_vien:"",email:"",so_dien_thoai:"",ngay_sinh:"",gioi_tinh:"Nam",quoc_tich:"Việt Nam",dia_chi:"",phong_ban_id:"",chuc_danh_id:"",trang_thai_lao_dong_id:"",ngay_bat_dau_lam_viec:"",loai_hop_dong:"",quan_ly_truc_tiep_id:"",ngan_hang:"",so_tai_khoan_ngan_hang:""}),U={ho_dem:[{required:!0,message:"Vui lòng nhập họ và tên đệm",trigger:"blur"}],ten:[{required:!0,message:"Vui lòng nhập tên",trigger:"blur"}],email:[{required:!0,message:"Vui lòng nhập email",trigger:"blur"},{type:"email",message:"Email không hợp lệ",trigger:"blur"}],phong_ban_id:[{required:!0,message:"Vui lòng chọn phòng ban",trigger:"change"}],chuc_danh_id:[{required:!0,message:"Vui lòng chọn chức danh",trigger:"change"}],trang_thai_lao_dong_id:[{required:!0,message:"Vui lòng chọn trạng thái",trigger:"change"}],ngay_bat_dau_lam_viec:[{required:!0,message:"Vui lòng chọn ngày bắt đầu",trigger:"change"}]},E=async()=>{b.value=!0;try{const[e,a,t,n]=await Promise.all([r.A.getAll({limit:1e3}),u.A.getAll({limit:1e3}),d.A.getAll({limit:1e3}),o.A.getAll({limit:1e3})]);if(y.value=e.data||[],v.value=a.data||[],k.value=t.data||[],A.value=n.data||[],V.value){const e=await o.A.getById(F.value);Object.assign(w,{ho_dem:e.ho_dem||"",ten:e.ten||"",ma_nhan_vien:e.ma_nhan_vien||"",email:e.email||"",so_dien_thoai:e.so_dien_thoai||"",ngay_sinh:e.ngay_sinh?.split("T")[0]||"",gioi_tinh:e.gioi_tinh||"Nam",quoc_tich:e.quoc_tich||"Việt Nam",dia_chi:e.dia_chi||"",phong_ban_id:e.phong_ban_id?._id||e.phong_ban_id||"",chuc_danh_id:e.chuc_danh_id?._id||e.chuc_danh_id||"",trang_thai_lao_dong_id:e.trang_thai_lao_dong_id?._id||e.trang_thai_lao_dong_id||"",ngay_bat_dau_lam_viec:e.ngay_bat_dau_lam_viec?.split("T")[0]||"",loai_hop_dong:e.loai_hop_dong||"",quan_ly_truc_tiep_id:e.quan_ly_truc_tiep_id?._id||e.quan_ly_truc_tiep_id||"",ngan_hang:e.ngan_hang||"",so_tai_khoan_ngan_hang:e.so_tai_khoan_ngan_hang||""})}}catch(e){console.error("Error loading form data:",e),i.nk.error(e.response?.data?.msg||"Không thể tải dữ liệu form")}finally{b.value=!1}},L=async()=>{if(m.value)try{const e=await m.value.validate();if(!e)return;f.value=!0,V.value?(await o.A.update(F.value,w),i.nk.success("Cập nhật nhân viên thành công")):(await o.A.create(w),i.nk.success("Thêm nhân viên mới thành công")),a.push("/nhan-vien")}catch(e){console.error("Error saving employee:",e),i.nk.error(e.response?.data?.msg||"Không thể lưu thông tin nhân viên")}finally{f.value=!1}},S=()=>{a.push("/nhan-vien")};return(0,n.sV)(()=>{E()}),(e,a)=>{const t=(0,n.g2)("el-input"),l=(0,n.g2)("el-form-item"),i=(0,n.g2)("el-col"),o=(0,n.g2)("el-row"),r=(0,n.g2)("el-date-picker"),u=(0,n.g2)("el-radio"),d=(0,n.g2)("el-radio-group"),F=(0,n.g2)("el-option"),E=(0,n.g2)("el-select"),R=(0,n.g2)("el-button"),B=(0,n.g2)("el-form"),q=(0,n.g2)("el-card"),$=(0,n.gN)("loading");return(0,n.uX)(),(0,n.Wv)(q,{class:"orangehrm-form-card",shadow:"never"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",_,[(0,n.Lk)("h2",h,(0,n.v_)(V.value?"Chỉnh sửa nhân viên":"Thêm nhân viên mới"),1)])]),default:(0,n.k6)(()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(B,{ref_key:"formRef",ref:m,model:w,rules:U,"label-width":"150px","label-position":"left"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",s,[a[20]||(a[20]=(0,n.Lk)("h3",{class:"section-title"},"Thông tin cá nhân",-1)),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Họ và tên đệm",prop:"ho_dem",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.ho_dem,"onUpdate:modelValue":a[0]||(a[0]=e=>w.ho_dem=e),placeholder:"Nguyễn Văn"},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Tên",prop:"ten",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.ten,"onUpdate:modelValue":a[1]||(a[1]=e=>w.ten=e),placeholder:"An"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Mã nhân viên",prop:"ma_nhan_vien"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.ma_nhan_vien,"onUpdate:modelValue":a[2]||(a[2]=e=>w.ma_nhan_vien=e),placeholder:"NV001"},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Email",prop:"email",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.email,"onUpdate:modelValue":a[3]||(a[3]=e=>w.email=e),type:"email",placeholder:"nguyenvanan@company.com"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Số điện thoại",prop:"so_dien_thoai"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.so_dien_thoai,"onUpdate:modelValue":a[4]||(a[4]=e=>w.so_dien_thoai=e),placeholder:"0901234567"},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Ngày sinh",prop:"ngay_sinh"},{default:(0,n.k6)(()=>[(0,n.bF)(r,{modelValue:w.ngay_sinh,"onUpdate:modelValue":a[5]||(a[5]=e=>w.ngay_sinh=e),type:"date",placeholder:"Chọn ngày sinh",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Giới tính",prop:"gioi_tinh"},{default:(0,n.k6)(()=>[(0,n.bF)(d,{modelValue:w.gioi_tinh,"onUpdate:modelValue":a[6]||(a[6]=e=>w.gioi_tinh=e)},{default:(0,n.k6)(()=>[(0,n.bF)(u,{label:"Nam"},{default:(0,n.k6)(()=>[...a[17]||(a[17]=[(0,n.eW)("Nam",-1)])]),_:1}),(0,n.bF)(u,{label:"Nữ"},{default:(0,n.k6)(()=>[...a[18]||(a[18]=[(0,n.eW)("Nữ",-1)])]),_:1}),(0,n.bF)(u,{label:"Khác"},{default:(0,n.k6)(()=>[...a[19]||(a[19]=[(0,n.eW)("Khác",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Quốc tịch",prop:"quoc_tich"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.quoc_tich,"onUpdate:modelValue":a[7]||(a[7]=e=>w.quoc_tich=e),placeholder:"Việt Nam"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(l,{label:"Địa chỉ",prop:"dia_chi"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.dia_chi,"onUpdate:modelValue":a[8]||(a[8]=e=>w.dia_chi=e),type:"textarea",rows:3,placeholder:"Địa chỉ liên hệ"},null,8,["modelValue"])]),_:1})]),(0,n.Lk)("div",c,[a[21]||(a[21]=(0,n.Lk)("h3",{class:"section-title"},"Thông tin công việc",-1)),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Phòng ban",prop:"phong_ban_id",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(E,{modelValue:w.phong_ban_id,"onUpdate:modelValue":a[9]||(a[9]=e=>w.phong_ban_id=e),placeholder:"Chọn phòng ban",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(y.value,e=>((0,n.uX)(),(0,n.Wv)(F,{key:e._id,label:e.ten,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Chức danh",prop:"chuc_danh_id",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(E,{modelValue:w.chuc_danh_id,"onUpdate:modelValue":a[10]||(a[10]=e=>w.chuc_danh_id=e),placeholder:"Chọn chức danh",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(v.value,e=>((0,n.uX)(),(0,n.Wv)(F,{key:e._id,label:e.ten_chuc_danh,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Ngày bắt đầu",prop:"ngay_bat_dau_lam_viec",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(r,{modelValue:w.ngay_bat_dau_lam_viec,"onUpdate:modelValue":a[11]||(a[11]=e=>w.ngay_bat_dau_lam_viec=e),type:"date",placeholder:"Chọn ngày",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Trạng thái",prop:"trang_thai_lao_dong_id",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(E,{modelValue:w.trang_thai_lao_dong_id,"onUpdate:modelValue":a[12]||(a[12]=e=>w.trang_thai_lao_dong_id=e),placeholder:"Chọn trạng thái",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.value,e=>((0,n.uX)(),(0,n.Wv)(F,{key:e._id,label:e.ten,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Loại hợp đồng",prop:"loai_hop_dong"},{default:(0,n.k6)(()=>[(0,n.bF)(E,{modelValue:w.loai_hop_dong,"onUpdate:modelValue":a[13]||(a[13]=e=>w.loai_hop_dong=e),placeholder:"Chọn loại hợp đồng",style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(F,{label:"Thử việc",value:"Thử việc"}),(0,n.bF)(F,{label:"Chính thức",value:"Chính thức"}),(0,n.bF)(F,{label:"Theo hợp đồng",value:"Theo hợp đồng"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Quản lý trực tiếp",prop:"quan_ly_truc_tiep_id"},{default:(0,n.k6)(()=>[(0,n.bF)(E,{modelValue:w.quan_ly_truc_tiep_id,"onUpdate:modelValue":a[14]||(a[14]=e=>w.quan_ly_truc_tiep_id=e),placeholder:"Chọn quản lý",filterable:"",clearable:"",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(A.value,e=>((0,n.uX)(),(0,n.Wv)(F,{key:e._id,label:`${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),(0,n.Lk)("div",g,[a[22]||(a[22]=(0,n.Lk)("h3",{class:"section-title"},"Thông tin ngân hàng",-1)),(0,n.bF)(o,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Tên ngân hàng",prop:"ngan_hang"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.ngan_hang,"onUpdate:modelValue":a[15]||(a[15]=e=>w.ngan_hang=e),placeholder:"Vietcombank"},null,8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(i,{span:12},{default:(0,n.k6)(()=>[(0,n.bF)(l,{label:"Số tài khoản",prop:"so_tai_khoan_ngan_hang"},{default:(0,n.k6)(()=>[(0,n.bF)(t,{modelValue:w.so_tai_khoan_ngan_hang,"onUpdate:modelValue":a[16]||(a[16]=e=>w.so_tai_khoan_ngan_hang=e),placeholder:"1234567890"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),(0,n.Lk)("div",p,[(0,n.bF)(R,{onClick:S},{default:(0,n.k6)(()=>[...a[23]||(a[23]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(R,{type:"primary",loading:f.value,onClick:L},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(V.value?"Cập nhật":"Thêm nhân viên"),1)]),_:1},8,["loading"])])]),_:1},8,["model"])),[[$,b.value]])]),_:1})}}}),b=t(6262);const f=(0,b.A)(m,[["__scopeId","data-v-3a8a7e22"]]);var y=f}}]);
//# sourceMappingURL=7145.63a3b456.js.map