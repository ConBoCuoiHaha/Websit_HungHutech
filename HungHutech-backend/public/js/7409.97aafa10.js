"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[7409],{1114:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!=a(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=l(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:function(){return i}})},1526:function(e,t,n){var a=n(1114),l=n(4335);const o=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,i=o||"http://192.168.88.50:5000/api";console.log("API Base URL:",i);class u{constructor(){(0,a.A)(this,"axiosInstance",void 0),this.axiosInstance=l.A.create({baseURL:i,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,t){return this.axiosInstance.get(e,t)}post(e,t,n){return this.axiosInstance.post(e,t,n)}put(e,t,n){return this.axiosInstance.put(e,t,n)}delete(e,t){return this.axiosInstance.delete(e,t)}patch(e,t,n){return this.axiosInstance.patch(e,t,n)}}t.A=new u},6262:function(e,t){t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n}},7409:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(1431),l=n(8548),o=n(163),i=n(7918),u=n(1114),r=n(1526);class c{constructor(){(0,u.A)(this,"BASE_URL","/bacluong")}async getAll(e){const t=await r.A.get(this.BASE_URL,{params:e});return t.data}async getById(e){const t=await r.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await r.A.post(this.BASE_URL,e);return t.data}async update(e,t){const n=await r.A.put(`${this.BASE_URL}/${e}`,t);return n.data}async delete(e){await r.A.delete(`${this.BASE_URL}/${e}`)}}var _=new c;const d={class:"orangehrm-paygrade-page"},s={class:"orangehrm-page-header"},g={class:"orangehrm-page-actions"},h={class:"orangehrm-paygrade-name"},m={class:"orangehrm-salary-amount"},p={class:"orangehrm-salary-amount"},b={key:0,class:"orangehrm-formatted-amount"},v={key:0,class:"orangehrm-formatted-amount"};var f=(0,a.pM)({__name:"PayGradeList",setup(e){const t=(0,a.KR)([]),n=(0,a.KR)(!1),u=(0,a.KR)(""),r=(0,a.KR)(!1),c=(0,a.KR)(!1),f=(0,a.KR)(),y=(0,a.KR)(""),k=(0,a.Kh)({ten_bac_luong:"",muc_luong_toi_thieu:null,muc_luong_toi_da:null,don_vi_tien_te:"VND",ghi_chu:""}),w={ten_bac_luong:[{required:!0,message:"Vui lòng nhập tên bậc lương",trigger:"blur"}],don_vi_tien_te:[{required:!0,message:"Vui lòng chọn đơn vị tiền tệ",trigger:"change"}],muc_luong_toi_thieu:[{validator:(e,t,n)=>{null!==t&&void 0!==t&&t<0?n(new Error("Mức lương không được âm")):null!==t&&void 0!==t&&null!==k.muc_luong_toi_da&&void 0!==k.muc_luong_toi_da&&t>k.muc_luong_toi_da?n(new Error("Mức lương tối thiểu không được lớn hơn mức lương tối đa")):n()},trigger:"blur"}],muc_luong_toi_da:[{validator:(e,t,n)=>{null!==t&&void 0!==t&&t<0?n(new Error("Mức lương không được âm")):null!==t&&void 0!==t&&null!==k.muc_luong_toi_thieu&&void 0!==k.muc_luong_toi_thieu&&t<k.muc_luong_toi_thieu?n(new Error("Mức lương tối đa không được nhỏ hơn mức lương tối thiểu")):n()},trigger:"blur"}]},V=async()=>{n.value=!0,u.value="";try{const e=await _.getAll();t.value=e.data||[]}catch(e){console.error("Error loading pay grades:",e),u.value=e.response?.data?.msg||"Không thể tải danh sách bậc lương",o.nk.error(u.value)}finally{n.value=!1}},F=e=>{y.value=e._id,k.ten_bac_luong=e.ten_bac_luong,k.muc_luong_toi_thieu=e.muc_luong_toi_thieu?parseFloat(e.muc_luong_toi_thieu.toString()):null,k.muc_luong_toi_da=e.muc_luong_toi_da?parseFloat(e.muc_luong_toi_da.toString()):null,k.don_vi_tien_te=e.don_vi_tien_te||"VND",k.ghi_chu=e.ghi_chu||"",c.value=!0},S=async()=>{f.value&&await f.value.validate(async e=>{if(e){r.value=!0;try{y.value?(await _.update(y.value,k),o.nk.success("Cập nhật bậc lương thành công")):(await _.create(k),o.nk.success("Thêm bậc lương thành công")),R(),await V()}catch(t){console.error("Error saving pay grade:",t),o.nk.error(t.response?.data?.msg||"Không thể lưu bậc lương")}finally{r.value=!1}}})},A=async e=>{try{await i.s.confirm("Bạn có chắc chắn muốn xóa bậc lương này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await _.delete(e),o.nk.success("Xóa bậc lương thành công"),await V()}catch(t){"cancel"!==t&&(console.error("Error deleting pay grade:",t),o.nk.error(t.response?.data?.msg||"Không thể xóa bậc lương"))}},R=()=>{c.value=!1,y.value="",x()},x=()=>{f.value&&f.value.resetFields(),k.ten_bac_luong="",k.muc_luong_toi_thieu=null,k.muc_luong_toi_da=null,k.don_vi_tien_te="VND",k.ghi_chu=""},N=(e,t="VND")=>{if(null===e||void 0===e)return"-";let n;return n="object"===typeof e&&e.$numberDecimal?parseFloat(e.$numberDecimal):parseFloat(e.toString()),isNaN(n)?"-":"VND"===t?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)},U=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("vi-VN")};return(0,a.sV)(()=>{V()}),(e,o)=>{const i=(0,a.g2)("el-button"),_=(0,a.g2)("el-table-column"),x=(0,a.g2)("el-tag"),D=(0,a.g2)("el-space"),E=(0,a.g2)("el-table"),I=(0,a.g2)("el-card"),L=(0,a.g2)("el-input"),C=(0,a.g2)("el-form-item"),B=(0,a.g2)("el-radio-button"),W=(0,a.g2)("el-radio-group"),K=(0,a.g2)("el-form"),M=(0,a.g2)("el-dialog"),T=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",s,[o[9]||(o[9]=(0,a.Lk)("h1",{class:"orangehrm-page-title"},"Bậc lương",-1)),(0,a.Lk)("div",g,[(0,a.bF)(i,{icon:(0,a.R1)(l.Refresh),onClick:V},{default:(0,a.k6)(()=>[...o[7]||(o[7]=[(0,a.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,a.bF)(i,{type:"primary",icon:(0,a.R1)(l.Plus),onClick:o[0]||(o[0]=e=>c.value=!0)},{default:(0,a.k6)(()=>[...o[8]||(o[8]=[(0,a.eW)(" Thêm bậc lương ",-1)])]),_:1},8,["icon"])])]),(0,a.bF)(I,{class:"orangehrm-table-card",shadow:"never"},{default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(E,{data:t.value,style:{width:"100%"},stripe:"","empty-text":u.value||"Không có dữ liệu"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{prop:"ten_bac_luong",label:"Tên bậc lương","min-width":"200"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("strong",h,(0,a.v_)(e.ten_bac_luong),1)]),_:1}),(0,a.bF)(_,{label:"Mức lương tối thiểu",width:"180",align:"right"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("span",m,(0,a.v_)(N(e.muc_luong_toi_thieu,e.don_vi_tien_te)),1)]),_:1}),(0,a.bF)(_,{label:"Mức lương tối đa",width:"180",align:"right"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("span",p,(0,a.v_)(N(e.muc_luong_toi_da,e.don_vi_tien_te)),1)]),_:1}),(0,a.bF)(_,{label:"Đơn vị tiền tệ",width:"130",align:"center"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(x,{type:"VND"===e.don_vi_tien_te?"success":"primary",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(e.don_vi_tien_te),1)]),_:2},1032,["type"])]),_:1}),(0,a.bF)(_,{prop:"ghi_chu",label:"Ghi chú","min-width":"250"},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,a.v_)(e.ghi_chu||"-"),1)]),_:1}),(0,a.bF)(_,{label:"Ngày tạo",width:"150"},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,a.v_)(U(e.ngay_tao)),1)]),_:1}),(0,a.bF)(_,{label:"Hành động",width:"150",fixed:"right"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(D,null,{default:(0,a.k6)(()=>[(0,a.bF)(i,{size:"small",icon:(0,a.R1)(l.Edit),onClick:t=>F(e)},{default:(0,a.k6)(()=>[...o[10]||(o[10]=[(0,a.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,a.bF)(i,{size:"small",type:"danger",icon:(0,a.R1)(l.Delete),onClick:t=>A(e._id)},{default:(0,a.k6)(()=>[...o[11]||(o[11]=[(0,a.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","empty-text"])),[[T,n.value]])]),_:1}),(0,a.bF)(M,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=e=>c.value=e),title:y.value?"Chỉnh sửa bậc lương":"Thêm bậc lương mới",width:"600px","close-on-click-modal":!1},{footer:(0,a.k6)(()=>[(0,a.bF)(i,{onClick:R},{default:(0,a.k6)(()=>[...o[14]||(o[14]=[(0,a.eW)("Hủy",-1)])]),_:1}),(0,a.bF)(i,{type:"primary",loading:r.value,onClick:S},{default:(0,a.k6)(()=>[...o[15]||(o[15]=[(0,a.eW)(" Lưu ",-1)])]),_:1},8,["loading"])]),default:(0,a.k6)(()=>[(0,a.bF)(K,{ref_key:"formRef",ref:f,model:k,rules:w,"label-width":"150px","label-position":"left"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{label:"Tên bậc lương",prop:"ten_bac_luong",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(L,{modelValue:k.ten_bac_luong,"onUpdate:modelValue":o[1]||(o[1]=e=>k.ten_bac_luong=e),placeholder:"Ví dụ: Bậc 1, Junior, Senior..."},null,8,["modelValue"])]),_:1}),(0,a.bF)(C,{label:"Đơn vị tiền tệ",prop:"don_vi_tien_te",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:k.don_vi_tien_te,"onUpdate:modelValue":o[2]||(o[2]=e=>k.don_vi_tien_te=e)},{default:(0,a.k6)(()=>[(0,a.bF)(B,{value:"VND"},{default:(0,a.k6)(()=>[...o[12]||(o[12]=[(0,a.eW)("VND",-1)])]),_:1}),(0,a.bF)(B,{value:"USD"},{default:(0,a.k6)(()=>[...o[13]||(o[13]=[(0,a.eW)("USD",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(C,{label:"Mức lương tối thiểu",prop:"muc_luong_toi_thieu"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{modelValue:k.muc_luong_toi_thieu,"onUpdate:modelValue":o[3]||(o[3]=e=>k.muc_luong_toi_thieu=e),modelModifiers:{number:!0},type:"number",placeholder:"VND"===k.don_vi_tien_te?"Ví dụ: 10000000":"Ví dụ: 1000",min:0},{append:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(k.don_vi_tien_te),1)]),_:1},8,["modelValue","placeholder"]),k.muc_luong_toi_thieu?((0,a.uX)(),(0,a.CE)("div",b,(0,a.v_)(N(k.muc_luong_toi_thieu,k.don_vi_tien_te)),1)):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(C,{label:"Mức lương tối đa",prop:"muc_luong_toi_da"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{modelValue:k.muc_luong_toi_da,"onUpdate:modelValue":o[4]||(o[4]=e=>k.muc_luong_toi_da=e),modelModifiers:{number:!0},type:"number",placeholder:"VND"===k.don_vi_tien_te?"Ví dụ: 20000000":"Ví dụ: 2000",min:0},{append:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(k.don_vi_tien_te),1)]),_:1},8,["modelValue","placeholder"]),k.muc_luong_toi_da?((0,a.uX)(),(0,a.CE)("div",v,(0,a.v_)(N(k.muc_luong_toi_da,k.don_vi_tien_te)),1)):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(C,{label:"Ghi chú",prop:"ghi_chu"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{modelValue:k.ghi_chu,"onUpdate:modelValue":o[5]||(o[5]=e=>k.ghi_chu=e),type:"textarea",rows:3,placeholder:"Ghi chú về bậc lương này..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),y=n(6262);const k=(0,y.A)(f,[["__scopeId","data-v-fc38d430"]]);var w=k}}]);
//# sourceMappingURL=7409.97aafa10.js.map