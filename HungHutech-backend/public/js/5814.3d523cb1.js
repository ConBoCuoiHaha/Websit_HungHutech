"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[5814],{1114:function(e,t,a){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function l(e,t){if("object"!=n(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=n(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=l(e,"string");return"symbol"==n(t)?t:t+""}function r(e,t,a){return(t=o(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{A:function(){return r}})},1526:function(e,t,a){var n=a(1114),l=a(4335);const o=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,r=o||"http://192.168.88.50:5000/api";console.log("API Base URL:",r);class i{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=l.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,t){return this.axiosInstance.get(e,t)}post(e,t,a){return this.axiosInstance.post(e,t,a)}put(e,t,a){return this.axiosInstance.put(e,t,a)}delete(e,t){return this.axiosInstance.delete(e,t)}patch(e,t,a){return this.axiosInstance.patch(e,t,a)}}t.A=new i},5814:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=a(1431),l=a(8548),o=a(163),r=a(7918),i=a(8303);const s={class:"orangehrm-leavetype-page"},u={class:"orangehrm-page-header"},c={class:"orangehrm-page-actions"},p={class:"orangehrm-leavetype-name"},h={class:"orangehrm-pagination"};var g=(0,n.pM)({__name:"LeaveTypeList",setup(e){const t=(0,n.KR)([]),a=(0,n.KR)(!1),g=(0,n.KR)(""),d=(0,n.KR)(!1),m=(0,n.KR)(!1),v=(0,n.KR)(""),f=(0,n.KR)(),b=(0,n.Kh)({currentPage:1,limit:10,total:0}),y=(0,n.Kh)({ten:"",mo_ta:""}),_={ten:[{required:!0,message:"Vui lòng nhập tên loại nghỉ phép",trigger:"blur"},{min:2,max:100,message:"Tên phải từ 2-100 ký tự",trigger:"blur"}]},k=async()=>{a.value=!0,g.value="";try{const e=await i.A.getAll({page:b.currentPage,limit:b.limit});t.value=e.data||[],b.total=e.pagination?.total||0}catch(e){console.error("Error loading leave types:",e),g.value=e.response?.data?.msg||"Không thể tải danh sách loại nghỉ phép",o.nk.error(g.value)}finally{a.value=!1}},w=e=>{b.currentPage=e,k()},x=e=>{b.limit=e,b.currentPage=1,k()},A=e=>{v.value=e._id,y.ten=e.ten,y.mo_ta=e.mo_ta||"",m.value=!0},F=async()=>{f.value&&await f.value.validate(async e=>{if(e){d.value=!0;try{v.value?(await i.A.update(v.value,y),o.nk.success("Cập nhật loại nghỉ phép thành công")):(await i.A.create(y),o.nk.success("Thêm loại nghỉ phép thành công")),S(),await k()}catch(t){console.error("Error saving leave type:",t),o.nk.error(t.response?.data?.msg||"Không thể lưu loại nghỉ phép")}finally{d.value=!1}}})},R=async e=>{try{await r.s.confirm("Bạn có chắc chắn muốn xóa loại nghỉ phép này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await i.A.delete(e),o.nk.success("Xóa loại nghỉ phép thành công"),await k()}catch(t){"cancel"!==t&&(console.error("Error deleting leave type:",t),o.nk.error(t.response?.data?.msg||"Không thể xóa loại nghỉ phép"))}},S=()=>{m.value=!1,v.value="",f.value&&f.value.resetFields(),y.ten="",y.mo_ta=""},C=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("vi-VN")};return(0,n.sV)(()=>{k()}),(e,o)=>{const r=(0,n.g2)("el-button"),i=(0,n.g2)("el-table-column"),L=(0,n.g2)("el-tag"),T=(0,n.g2)("el-space"),I=(0,n.g2)("el-table"),U=(0,n.g2)("el-pagination"),P=(0,n.g2)("el-card"),K=(0,n.g2)("el-input"),B=(0,n.g2)("el-form-item"),E=(0,n.g2)("el-form"),V=(0,n.g2)("el-dialog"),W=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",u,[o[8]||(o[8]=(0,n.Lk)("h1",{class:"orangehrm-page-title"},"Loại nghỉ phép",-1)),(0,n.Lk)("div",c,[(0,n.bF)(r,{icon:(0,n.R1)(l.Refresh),onClick:k},{default:(0,n.k6)(()=>[...o[6]||(o[6]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,n.bF)(r,{type:"primary",icon:(0,n.R1)(l.Plus),onClick:o[0]||(o[0]=e=>m.value=!0)},{default:(0,n.k6)(()=>[...o[7]||(o[7]=[(0,n.eW)(" Thêm loại nghỉ phép ",-1)])]),_:1},8,["icon"])])]),(0,n.bF)(P,{class:"orangehrm-table-card",shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(I,{data:t.value,style:{width:"100%"},stripe:"","empty-text":g.value||"Không có dữ liệu"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{type:"index",label:"STT",width:"60"}),(0,n.bF)(i,{prop:"ten",label:"Tên loại nghỉ phép","min-width":"250"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("strong",p,(0,n.v_)(e.ten),1)]),_:1}),(0,n.bF)(i,{prop:"mo_ta",label:"Mô tả","min-width":"300"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.mo_ta||"-"),1)]),_:1}),(0,n.bF)(i,{label:"Trạng thái",width:"120"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(L,{type:e.da_xoa?"danger":"success",size:"small"},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.da_xoa?"Đã xóa":"Đang dùng"),1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(i,{label:"Ngày tạo",width:"150"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(C(e.ngay_tao)),1)]),_:1}),(0,n.bF)(i,{label:"Hành động",width:"200",fixed:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(T,null,{default:(0,n.k6)(()=>[(0,n.bF)(r,{size:"small",icon:(0,n.R1)(l.Edit),onClick:t=>A(e)},{default:(0,n.k6)(()=>[...o[9]||(o[9]=[(0,n.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),e.da_xoa?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(r,{key:0,size:"small",type:"danger",icon:(0,n.R1)(l.Delete),onClick:t=>R(e._id)},{default:(0,n.k6)(()=>[...o[10]||(o[10]=[(0,n.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"]))]),_:2},1024)]),_:1})]),_:1},8,["data","empty-text"])),[[W,a.value]]),(0,n.Lk)("div",h,[(0,n.bF)(U,{"current-page":b.currentPage,"onUpdate:currentPage":o[1]||(o[1]=e=>b.currentPage=e),"page-size":b.limit,"onUpdate:pageSize":o[2]||(o[2]=e=>b.limit=e),"page-sizes":[10,20,50,100],total:b.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:x,onCurrentChange:w},null,8,["current-page","page-size","total"])])]),_:1}),(0,n.bF)(V,{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=e=>m.value=e),title:v.value?"Chỉnh sửa loại nghỉ phép":"Thêm loại nghỉ phép mới",width:"600px","close-on-click-modal":!1},{footer:(0,n.k6)(()=>[(0,n.bF)(r,{onClick:S},{default:(0,n.k6)(()=>[...o[11]||(o[11]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(r,{type:"primary",loading:d.value,onClick:F},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(v.value?"Cập nhật":"Thêm mới"),1)]),_:1},8,["loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(E,{ref_key:"formRef",ref:f,model:y,rules:_,"label-width":"140px","label-position":"left"},{default:(0,n.k6)(()=>[(0,n.bF)(B,{label:"Tên loại nghỉ phép",prop:"ten",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(K,{modelValue:y.ten,"onUpdate:modelValue":o[3]||(o[3]=e=>y.ten=e),placeholder:"Nhập tên loại nghỉ phép...",maxlength:"100"},null,8,["modelValue"])]),_:1}),(0,n.bF)(B,{label:"Mô tả",prop:"mo_ta"},{default:(0,n.k6)(()=>[(0,n.bF)(K,{modelValue:y.mo_ta,"onUpdate:modelValue":o[4]||(o[4]=e=>y.mo_ta=e),type:"textarea",rows:4,placeholder:"Nhập mô tả..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),d=a(6262);const m=(0,d.A)(g,[["__scopeId","data-v-73560e30"]]);var v=m},6262:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a}},8303:function(e,t,a){var n=a(1114),l=a(1526);class o{constructor(){(0,n.A)(this,"BASE_URL","/loaingaynghi")}async getAll(e){const t=await l.A.get(this.BASE_URL,{params:e});return t.data}async getById(e){const t=await l.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await l.A.post(this.BASE_URL,e);return t.data}async update(e,t){const a=await l.A.put(`${this.BASE_URL}/${e}`,t);return a.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}t.A=new o}}]);
//# sourceMappingURL=5814.3d523cb1.js.map