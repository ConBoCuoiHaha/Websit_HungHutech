"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[2923],{1114:function(e,t,a){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if("object"!=n(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""}function r(e,t,a){return(t=l(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{A:function(){return r}})},1526:function(e,t,a){var n=a(1114),o=a(4335);const l=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,r=l||"http://192.168.88.50:5000/api";console.log("API Base URL:",r);class c{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=o.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,t){return this.axiosInstance.get(e,t)}post(e,t,a){return this.axiosInstance.post(e,t,a)}put(e,t,a){return this.axiosInstance.put(e,t,a)}delete(e,t){return this.axiosInstance.delete(e,t)}patch(e,t,a){return this.axiosInstance.patch(e,t,a)}}t.A=new c},3583:function(e,t,a){var n=a(1114),o=a(1526);class l{constructor(){(0,n.A)(this,"BASE_URL","/chucdanh")}async getAll(e){const t=await o.A.get(this.BASE_URL,{params:e});return t.data}async getById(e){const t=await o.A.get(`${this.BASE_URL}/${e}`);return t.data}async create(e){const t=await o.A.post(this.BASE_URL,e);return t.data}async update(e,t){const a=await o.A.put(`${this.BASE_URL}/${e}`,t);return a.data}async delete(e){await o.A.delete(`${this.BASE_URL}/${e}`)}}t.A=new l},5304:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(1431),o=a(8548),l=a(163),r=a(7918),c=a(3583);const i={class:"orangehrm-jobtitle-page"},s={class:"orangehrm-page-header"},u={class:"orangehrm-page-actions"},h={class:"orangehrm-jobtitle-name"};var d=(0,n.pM)({__name:"ChucDanhList",setup(e){const t=(0,n.KR)([]),a=(0,n.KR)(!1),d=(0,n.KR)(""),p=(0,n.KR)(!1),m=(0,n.KR)(!1),g=(0,n.KR)(),f=(0,n.KR)(""),_=(0,n.Kh)({ten_chuc_danh:"",mo_ta:""}),b={ten_chuc_danh:[{required:!0,message:"Vui lòng nhập tên chức danh",trigger:"blur"}]},v=async()=>{a.value=!0,d.value="";try{const e=await c.A.getAll();t.value=e.data||[]}catch(e){console.error("Error loading job titles:",e),d.value=e.response?.data?.msg||"Không thể tải danh sách chức danh",l.nk.error(d.value)}finally{a.value=!1}},y=e=>{f.value=e._id,_.ten_chuc_danh=e.ten_chuc_danh,_.mo_ta=e.mo_ta||"",m.value=!0},k=async()=>{g.value&&await g.value.validate(async e=>{if(e){p.value=!0;try{f.value?(await c.A.update(f.value,_),l.nk.success("Cập nhật chức danh thành công")):(await c.A.create(_),l.nk.success("Thêm chức danh thành công")),A(),await v()}catch(t){console.error("Error saving job title:",t),l.nk.error(t.response?.data?.msg||"Không thể lưu chức danh")}finally{p.value=!1}}})},w=async e=>{try{await r.s.confirm("Bạn có chắc chắn muốn xóa chức danh này?","Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await c.A.delete(e),l.nk.success("Xóa chức danh thành công"),await v()}catch(t){"cancel"!==t&&(console.error("Error deleting job title:",t),l.nk.error(t.response?.data?.msg||"Không thể xóa chức danh"))}},A=()=>{m.value=!1,f.value="",R()},R=()=>{g.value&&g.value.resetFields(),_.ten_chuc_danh="",_.mo_ta=""},x=e=>{if(!e)return"-";const t=new Date(e);return t.toLocaleDateString("vi-VN")};return(0,n.sV)(()=>{v()}),(e,l)=>{const r=(0,n.g2)("el-button"),c=(0,n.g2)("el-table-column"),R=(0,n.g2)("el-space"),F=(0,n.g2)("el-table"),S=(0,n.g2)("el-card"),C=(0,n.g2)("el-input"),I=(0,n.g2)("el-form-item"),L=(0,n.g2)("el-form"),U=(0,n.g2)("el-dialog"),V=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",s,[l[6]||(l[6]=(0,n.Lk)("h1",{class:"orangehrm-page-title"},"Chức danh công việc",-1)),(0,n.Lk)("div",u,[(0,n.bF)(r,{icon:(0,n.R1)(o.Refresh),onClick:v},{default:(0,n.k6)(()=>[...l[4]||(l[4]=[(0,n.eW)("Tải lại",-1)])]),_:1},8,["icon"]),(0,n.bF)(r,{type:"primary",icon:(0,n.R1)(o.Plus),onClick:l[0]||(l[0]=e=>m.value=!0)},{default:(0,n.k6)(()=>[...l[5]||(l[5]=[(0,n.eW)(" Thêm chức danh ",-1)])]),_:1},8,["icon"])])]),(0,n.bF)(S,{class:"orangehrm-table-card",shadow:"never"},{default:(0,n.k6)(()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(F,{data:t.value,style:{width:"100%"},stripe:"","empty-text":d.value||"Không có dữ liệu"},{default:(0,n.k6)(()=>[(0,n.bF)(c,{prop:"ten_chuc_danh",label:"Tên chức danh","min-width":"250"},{default:(0,n.k6)(({row:e})=>[(0,n.Lk)("strong",h,(0,n.v_)(e.ten_chuc_danh),1)]),_:1}),(0,n.bF)(c,{prop:"mo_ta",label:"Mô tả","min-width":"350"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(e.mo_ta||"-"),1)]),_:1}),(0,n.bF)(c,{label:"Ngày tạo",width:"150"},{default:(0,n.k6)(({row:e})=>[(0,n.eW)((0,n.v_)(x(e.ngay_tao)),1)]),_:1}),(0,n.bF)(c,{label:"Hành động",width:"150",fixed:"right"},{default:(0,n.k6)(({row:e})=>[(0,n.bF)(R,null,{default:(0,n.k6)(()=>[(0,n.bF)(r,{size:"small",icon:(0,n.R1)(o.Edit),onClick:t=>y(e)},{default:(0,n.k6)(()=>[...l[7]||(l[7]=[(0,n.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,n.bF)(r,{size:"small",type:"danger",icon:(0,n.R1)(o.Delete),onClick:t=>w(e._id)},{default:(0,n.k6)(()=>[...l[8]||(l[8]=[(0,n.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","empty-text"])),[[V,a.value]])]),_:1}),(0,n.bF)(U,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),title:f.value?"Chỉnh sửa chức danh":"Thêm chức danh mới",width:"500px","close-on-click-modal":!1},{footer:(0,n.k6)(()=>[(0,n.bF)(r,{onClick:A},{default:(0,n.k6)(()=>[...l[9]||(l[9]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(r,{type:"primary",loading:p.value,onClick:k},{default:(0,n.k6)(()=>[...l[10]||(l[10]=[(0,n.eW)(" Lưu ",-1)])]),_:1},8,["loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(L,{ref_key:"formRef",ref:g,model:_,rules:b,"label-width":"120px","label-position":"left"},{default:(0,n.k6)(()=>[(0,n.bF)(I,{label:"Tên chức danh",prop:"ten_chuc_danh",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(C,{modelValue:_.ten_chuc_danh,"onUpdate:modelValue":l[1]||(l[1]=e=>_.ten_chuc_danh=e),placeholder:"Ví dụ: Nhân viên kinh doanh"},null,8,["modelValue"])]),_:1}),(0,n.bF)(I,{label:"Mô tả",prop:"mo_ta"},{default:(0,n.k6)(()=>[(0,n.bF)(C,{modelValue:_.mo_ta,"onUpdate:modelValue":l[2]||(l[2]=e=>_.mo_ta=e),type:"textarea",rows:4,placeholder:"Mô tả chi tiết về chức danh này..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),p=a(6262);const m=(0,p.A)(d,[["__scopeId","data-v-0abfbb5a"]]);var g=m},6262:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a}}}]);
//# sourceMappingURL=2923.372d74d7.js.map