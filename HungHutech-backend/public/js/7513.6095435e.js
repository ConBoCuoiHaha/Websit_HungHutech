"use strict";(self["webpackChunkHungHutech"]=self["webpackChunkHungHutech"]||[]).push([[7513],{1114:function(e,a,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function l(e,a){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,a||"default");if("object"!=n(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function o(e){var a=l(e,"string");return"symbol"==n(a)?a:a+""}function r(e,a,t){return(a=o(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,{A:function(){return r}})},1526:function(e,a,t){var n=t(1114),l=t(4335);const o=window?.appGlobal?.baseUrl&&`${window.appGlobal.baseUrl}/api`,r=o||"http://192.168.88.50:5000/api";console.log("API Base URL:",r);class i{constructor(){(0,n.A)(this,"axiosInstance",void 0),this.axiosInstance=l.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)))}get(e,a){return this.axiosInstance.get(e,a)}post(e,a,t){return this.axiosInstance.post(e,a,t)}put(e,a,t){return this.axiosInstance.put(e,a,t)}delete(e,a){return this.axiosInstance.delete(e,a)}patch(e,a,t){return this.axiosInstance.patch(e,a,t)}}a.A=new i},3028:function(e,a,t){var n=t(1114),l=t(1526);class o{constructor(){(0,n.A)(this,"BASE_URL","/projects")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new o},6262:function(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t}},6604:function(e,a,t){var n=t(1114),l=t(1526);class o{constructor(){(0,n.A)(this,"BASE_URL","/nhanvien")}async getAll(e){const a=await l.A.get(this.BASE_URL,{params:e});return a.data}async getById(e){const a=await l.A.get(`${this.BASE_URL}/${e}`);return a.data}async create(e){const a=await l.A.post(this.BASE_URL,e);return a.data}async update(e,a){const t=await l.A.put(`${this.BASE_URL}/${e}`,a);return t.data}async delete(e){await l.A.delete(`${this.BASE_URL}/${e}`)}}a.A=new o},7513:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var n=t(1431),l=t(8548),o=t(163),r=t(7918),i=t(3028),u=t(6604);const c={class:"orangehrm-project-list"},s={class:"orangehrm-card-header"},d={class:"orangehrm-filter-section"},h={class:"orangehrm-pagination"};var g=(0,n.pM)({__name:"ProjectList",setup(e){const a=(0,n.KR)(),t=(0,n.KR)(!1),g=(0,n.KR)(!1),_=(0,n.KR)(!1),p=(0,n.KR)(!1),m=(0,n.KR)(""),b=(0,n.KR)(1),f=(0,n.KR)(10),v=(0,n.KR)(0),y=(0,n.KR)([]),k=(0,n.KR)([]),w=(0,n.Kh)({ten:"",khach_hang:"",mo_ta:"",trang_thai:"Hoạt động",quan_ly_du_an_id:"",_id:""}),A={ten:[{required:!0,message:"Vui lòng nhập tên dự án",trigger:"blur"}],trang_thai:[{required:!0,message:"Vui lòng chọn trạng thái",trigger:"change"}]},F=async()=>{t.value=!0;try{const e=await i.A.getAll({page:b.value,limit:f.value,q:m.value});y.value=e.data||[],v.value=e.total||0}catch(e){console.error("Error loading projects:",e),o.nk.error(e.response?.data?.msg||"Không thể tải danh sách dự án")}finally{t.value=!1}},R=async()=>{try{const e=await u.A.getAll({limit:1e3});k.value=e.data||[]}catch(e){console.error("Error loading employees:",e)}},S=e=>{const a={"Hoạt động":"success","Đang hoạt động":"success","Hoàn thành":"info","Tạm dừng":"warning","Hủy":"danger"};return a[e]||"info"},U=()=>{p.value=!1,w.ten="",w.khach_hang="",w.mo_ta="",w.trang_thai="Hoạt động",w.quan_ly_du_an_id="",w._id="",_.value=!0},V=e=>{p.value=!0,w.ten=e.ten||"",w.khach_hang=e.khach_hang||"",w.mo_ta=e.mo_ta||"",w.trang_thai=e.trang_thai||"Hoạt động",w.quan_ly_du_an_id=e.quan_ly_du_an_id?._id||e.quan_ly_du_an_id||"",w._id=e._id,_.value=!0},C=async e=>{try{await r.s.confirm(`Bạn có chắc chắn muốn xóa dự án "${e.ten}"?`,"Xác nhận xóa",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"}),await i.A.delete(e._id),o.nk.success("Xóa dự án thành công"),F()}catch(a){"cancel"!==a&&o.nk.error(a.response?.data?.msg||"Không thể xóa dự án")}},x=async()=>{if(a.value)try{const e=await a.value.validate();if(!e)return;g.value=!0;const t={ten:w.ten,khach_hang:w.khach_hang,mo_ta:w.mo_ta,trang_thai:w.trang_thai,quan_ly_du_an_id:w.quan_ly_du_an_id||void 0};p.value?(await i.A.update(w._id,t),o.nk.success("Cập nhật dự án thành công")):(await i.A.create(t),o.nk.success("Thêm dự án mới thành công")),_.value=!1,F()}catch(e){o.nk.error(e.response?.data?.msg||"Không thể lưu dự án")}finally{g.value=!1}},B=()=>{b.value=1,F()},K=()=>{b.value=1,F()},L=()=>{F()};return(0,n.sV)(()=>{F(),R()}),(e,o)=>{const r=(0,n.g2)("el-button"),i=(0,n.g2)("el-input"),u=(0,n.g2)("el-col"),F=(0,n.g2)("el-row"),R=(0,n.g2)("el-table-column"),T=(0,n.g2)("el-tag"),E=(0,n.g2)("el-table"),q=(0,n.g2)("el-pagination"),I=(0,n.g2)("el-card"),$=(0,n.g2)("el-form-item"),H=(0,n.g2)("el-option"),j=(0,n.g2)("el-select"),z=(0,n.g2)("el-form"),P=(0,n.g2)("el-dialog"),W=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(I,{shadow:"never"},{header:(0,n.k6)(()=>[(0,n.Lk)("div",s,[o[11]||(o[11]=(0,n.Lk)("h2",{class:"orangehrm-card-title"},"Quản lý Dự án",-1)),(0,n.bF)(r,{type:"primary",icon:(0,n.R1)(l.Plus),onClick:U},{default:(0,n.k6)(()=>[...o[10]||(o[10]=[(0,n.eW)(" Thêm Dự án ",-1)])]),_:1},8,["icon"])])]),default:(0,n.k6)(()=>[(0,n.Lk)("div",d,[(0,n.bF)(F,{gutter:20},{default:(0,n.k6)(()=>[(0,n.bF)(u,{span:8},{default:(0,n.k6)(()=>[(0,n.bF)(i,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value=e),placeholder:"Tìm kiếm dự án...","prefix-icon":(0,n.R1)(l.Search),clearable:"",onClear:B,onKeyup:(0,n.jR)(B,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),(0,n.bF)(u,{span:4},{default:(0,n.k6)(()=>[(0,n.bF)(r,{type:"primary",icon:(0,n.R1)(l.Search),onClick:B},{default:(0,n.k6)(()=>[...o[12]||(o[12]=[(0,n.eW)(" Tìm kiếm ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1})]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(E,{data:y.value,border:"",class:"orangehrm-table",style:{"margin-top":"20px"}},{default:(0,n.k6)(()=>[(0,n.bF)(R,{prop:"ten",label:"Tên dự án","min-width":"200"}),(0,n.bF)(R,{prop:"khach_hang",label:"Khách hàng","min-width":"150"}),(0,n.bF)(R,{prop:"mo_ta",label:"Mô tả","min-width":"250","show-overflow-tooltip":""}),(0,n.bF)(R,{label:"Trạng thái",width:"120"},{default:(0,n.k6)(e=>[(0,n.bF)(T,{type:S(e.row.trang_thai)},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(e.row.trang_thai),1)]),_:2},1032,["type"])]),_:1}),(0,n.bF)(R,{label:"Thao tác",width:"180",align:"center"},{default:(0,n.k6)(e=>[(0,n.bF)(r,{size:"small",icon:(0,n.R1)(l.Edit),onClick:a=>V(e.row)},{default:(0,n.k6)(()=>[...o[13]||(o[13]=[(0,n.eW)(" Sửa ",-1)])]),_:1},8,["icon","onClick"]),(0,n.bF)(r,{size:"small",type:"danger",icon:(0,n.R1)(l.Delete),onClick:a=>C(e.row)},{default:(0,n.k6)(()=>[...o[14]||(o[14]=[(0,n.eW)(" Xóa ",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[W,t.value]]),(0,n.Lk)("div",h,[(0,n.bF)(q,{"current-page":b.value,"onUpdate:currentPage":o[1]||(o[1]=e=>b.value=e),"page-size":f.value,"onUpdate:pageSize":o[2]||(o[2]=e=>f.value=e),"page-sizes":[10,20,50,100],total:v.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:K,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1}),(0,n.bF)(P,{modelValue:_.value,"onUpdate:modelValue":o[9]||(o[9]=e=>_.value=e),title:p.value?"Chỉnh sửa dự án":"Thêm dự án mới",width:"600px"},{footer:(0,n.k6)(()=>[(0,n.bF)(r,{onClick:o[8]||(o[8]=e=>_.value=!1)},{default:(0,n.k6)(()=>[...o[15]||(o[15]=[(0,n.eW)("Hủy",-1)])]),_:1}),(0,n.bF)(r,{type:"primary",loading:g.value,onClick:x},{default:(0,n.k6)(()=>[(0,n.eW)((0,n.v_)(p.value?"Cập nhật":"Thêm mới"),1)]),_:1},8,["loading"])]),default:(0,n.k6)(()=>[(0,n.bF)(z,{ref_key:"formRef",ref:a,model:w,rules:A,"label-width":"140px"},{default:(0,n.k6)(()=>[(0,n.bF)($,{label:"Tên dự án",prop:"ten",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(i,{modelValue:w.ten,"onUpdate:modelValue":o[3]||(o[3]=e=>w.ten=e),placeholder:"Nhập tên dự án"},null,8,["modelValue"])]),_:1}),(0,n.bF)($,{label:"Khách hàng",prop:"khach_hang"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{modelValue:w.khach_hang,"onUpdate:modelValue":o[4]||(o[4]=e=>w.khach_hang=e),placeholder:"Tên khách hàng"},null,8,["modelValue"])]),_:1}),(0,n.bF)($,{label:"Mô tả",prop:"mo_ta"},{default:(0,n.k6)(()=>[(0,n.bF)(i,{modelValue:w.mo_ta,"onUpdate:modelValue":o[5]||(o[5]=e=>w.mo_ta=e),type:"textarea",rows:4,placeholder:"Mô tả chi tiết về dự án"},null,8,["modelValue"])]),_:1}),(0,n.bF)($,{label:"Trạng thái",prop:"trang_thai",required:""},{default:(0,n.k6)(()=>[(0,n.bF)(j,{modelValue:w.trang_thai,"onUpdate:modelValue":o[6]||(o[6]=e=>w.trang_thai=e),placeholder:"Chọn trạng thái",style:{width:"100%"}},{default:(0,n.k6)(()=>[(0,n.bF)(H,{label:"Đang hoạt động",value:"Đang hoạt động"}),(0,n.bF)(H,{label:"Hoàn thành",value:"Hoàn thành"}),(0,n.bF)(H,{label:"Tạm dừng",value:"Tạm dừng"}),(0,n.bF)(H,{label:"Hủy",value:"Hủy"})]),_:1},8,["modelValue"])]),_:1}),(0,n.bF)($,{label:"Quản lý dự án",prop:"quan_ly_du_an_id"},{default:(0,n.k6)(()=>[(0,n.bF)(j,{modelValue:w.quan_ly_du_an_id,"onUpdate:modelValue":o[7]||(o[7]=e=>w.quan_ly_du_an_id=e),placeholder:"Chọn quản lý dự án",filterable:"",style:{width:"100%"}},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.value,e=>((0,n.uX)(),(0,n.Wv)(H,{key:e._id,label:`${e.ho_dem} ${e.ten}`,value:e._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),_=t(6262);const p=(0,_.A)(g,[["__scopeId","data-v-355f4e5e"]]);var m=p}}]);
//# sourceMappingURL=7513.6095435e.js.map